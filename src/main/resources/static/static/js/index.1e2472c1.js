"use strict";(self["webpackChunkroad_traffic_survey"]=self["webpackChunkroad_traffic_survey"]||[]).push([[826],{3648:function(t,e,i){i.r(e),i.d(e,{SHOW_LINK_ZOOM:function(){return Ui},default:function(){return Yi}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"root"},[e("div",{attrs:{id:"mapRoot"}},[e("div",{staticClass:"MapLayerMenu"},[e("div",{staticClass:"MapLayer_menu",class:{hide:!t.showStyleMenu},style:`width: ${50*t.styleList.length+30}px`},[e("div",{staticClass:"open_hide_btn",on:{click:function(e){t.showStyleMenu=!t.showStyleMenu}}}),t._l(t.styleList,(function(i,s){return e("img",{key:s,staticClass:"item",class:{active:t.styleActive==s},attrs:{src:i.url,title:i.style_name},on:{click:function(e){return t.handleChangeStyle(s)}}})}))],2)])]),e("Dialog",{attrs:{visible:t.showSetting,hideMinimize:"",hideClose:"",width:"400px"}},[e("div",{staticClass:"setting_box"},[e("el-collapse",{staticStyle:{"user-select":"none"},model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[e("el-collapse-item",{attrs:{title:"定位",name:"1"}},[e("el-form",{staticClass:"setting_form",attrs:{"label-position":"left","label-width":"100px",inline:!1,size:"small"}},[e("el-form-item",{attrs:{label:"路段搜索"}},[e("RouteSelect",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:t.handleMoveToRoute},model:{value:t.ruleForm.routeId,callback:function(e){t.$set(t.ruleForm,"routeId",e)},expression:"ruleForm.routeId"}})],1),e("el-form-item",{attrs:{label:"LinkId搜索"}},[e("LinkSelect",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:t.handleMoveToLink},model:{value:t.ruleForm.linkId,callback:function(e){t.$set(t.ruleForm,"linkId",e)},expression:"ruleForm.linkId"}})],1),e("el-form-item",{attrs:{label:"中心坐标"}},[e("CenterInput",{staticStyle:{width:"100%"},attrs:{size:"small"},on:{change:t.handleMoveToCenter},model:{value:t.ruleForm.center,callback:function(e){t.$set(t.ruleForm,"center",e)},expression:"ruleForm.center"}})],1),e("el-form-item",[e("div",{attrs:{slot:"label"},slot:"label"},[e("span",[t._v("zoom level ")]),e("el-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("div",[t._v("当zoom level大于"+t._s(t.SHOW_LINK_ZOOM)+"时，显示路网视图")])]),e("i",{staticClass:"el-icon-question"})])],1),e("el-slider",{attrs:{min:t.MAP_ZOOM_RANGE.MIN,max:t.MAP_ZOOM_RANGE.MAX,step:.01,marks:{[t.ruleForm.zoom]:String(t.ruleForm.zoom)}},on:{change:t.handleChangeZoomLavel},model:{value:t.ruleForm.zoom,callback:function(e){t.$set(t.ruleForm,"zoom",e)},expression:"ruleForm.zoom"}})],1)],1)],1),e("el-collapse-item",{attrs:{title:"路段流量",name:"2"}},[e("el-form",{staticClass:"setting_form",attrs:{"label-position":"left","label-width":"100px",inline:!1,size:"small"}},[e("el-form-item",{attrs:{label:"显示图层"}},[e("el-switch",{model:{value:t.showLinkStatsLayer,callback:function(e){t.showLinkStatsLayer=e},expression:"showLinkStatsLayer"}})],1),e("el-form-item",{attrs:{label:"调查时间"}},[e("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.handleLoadMaker},model:{value:t.ruleForm.timeList,callback:function(e){t.$set(t.ruleForm,"timeList",e)},expression:"ruleForm.timeList"}})],1),e("el-form-item",{attrs:{label:"调查方式"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},on:{change:t.handleLoadMaker},model:{value:t.ruleForm.type,callback:function(e){t.$set(t.ruleForm,"type",e)},expression:"ruleForm.type"}},t._l(t.typeOptions,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:String(i)}})})),1)],1),e("el-form-item",{attrs:{label:"区域框选"}},[e("div",{attrs:{slot:"label"},slot:"label"},[e("span",[t._v("区域框选 ")]),e("el-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[e("div",[t._v("1，单击鼠标左键选定开始坐标")]),e("div",[t._v("2，拖动鼠标划定范围")]),e("div",[t._v("3，单击鼠标左键选定结束坐标")])]),e("i",{staticClass:"el-icon-question"})])],1),t.ruleForm.frameSelectState==t.FRAME_SELECT_STATE_KEY.NOT_STARTED?e("div",[e("el-button",{attrs:{type:"primary"},on:{click:t.handlePlayFrameSelect}},[t._v("开始框选")])],1):t._e(),e("div",[t.frameLink.xyarr?e("el-button",{attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.handleShowFrameLink.apply(null,arguments)}}},[t._v("开始查询")]):t._e(),t.ruleForm.frameSelectState!=t.FRAME_SELECT_STATE_KEY.NOT_STARTED?e("el-button",{attrs:{type:"primary"},on:{click:t.handleStopFrameSelect}},[t._v("停止框选")]):t._e()],1)]),e("el-form-item",{attrs:{label:"路段偏移"}},[e("el-slider",{attrs:{min:0,max:30,step:.2},on:{change:t.handleChangeTwoWayOffset},model:{value:t.ruleForm.twoWayOffset,callback:function(e){t.$set(t.ruleForm,"twoWayOffset",e)},expression:"ruleForm.twoWayOffset"}})],1),e("el-form-item",{attrs:{label:"路段宽度"}},[e("el-slider",{attrs:{min:1,max:30},on:{change:t.handleChangeWayWidth},model:{value:t.ruleForm.wayWidth,callback:function(e){t.$set(t.ruleForm,"wayWidth",e)},expression:"ruleForm.wayWidth"}})],1)],1)],1),e("el-collapse-item",{attrs:{title:"交叉口",name:"3"}},[e("el-form",{staticClass:"setting_form",attrs:{"label-position":"left","label-width":"100px",inline:!1,size:"small"}},[e("el-form-item",{attrs:{label:"显示图层"}},[e("el-switch",{model:{value:t.showIntersectionListLayer,callback:function(e){t.showIntersectionListLayer=e},expression:"showIntersectionListLayer"}})],1),e("el-form-item",{attrs:{label:"新增"}},[t.ruleForm.pointSelectState==t.POINT_SELECT_STATE_KEY.DISABLE?e("el-button",{attrs:{type:"primary"},on:{click:t.handlePlayPointSelect}},[t._v("开始点选")]):t.ruleForm.pointSelectState==t.POINT_SELECT_STATE_KEY.ENABLE?e("el-button",{attrs:{type:"primary"},on:{click:t.handleStopPointSelect}},[t._v("停止点选")]):t._e()],1),e("el-form-item",{attrs:{label:"调查记录"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.crossroadsList.visible=!0}}},[t._v("查看全部")])],1)],1)],1),e("el-collapse-item",{attrs:{title:"图片上传",name:"4"}},[e("el-form",{staticClass:"setting_form",attrs:{"label-position":"left","label-width":"100px",inline:!1,size:"small"}},[e("el-form-item",{attrs:{label:"显示图层"}},[e("el-switch",{model:{value:t.showImageListLayer,callback:function(e){t.showImageListLayer=e},expression:"showImageListLayer"}})],1),e("el-form-item",{attrs:{label:"选择文件"}},[e("UploadImageZip")],1),e("el-form-item",{attrs:{label:"文件列表"}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.imageListDialog.visible=!0}}},[t._v("显示弹窗")])],1)],1)],1)],1)],1)]),e("LineFlow",{attrs:{visible:t.lineFlow.visible,linkId:t.lineFlow.linkId},on:{"update:visible":function(e){return t.$set(t.lineFlow,"visible",e)},changeLink:t.handleChangeLink,updateData:t.lineFlowUpdateData,close:t.lineFlowClose}}),e("FrameLink",{attrs:{visible:t.frameLink.visible,timeList:t.ruleForm.timeList,type:t.ruleForm.type,xyarr:t.frameLink.xyarr},on:{"update:visible":function(e){return t.$set(t.frameLink,"visible",e)}}}),e("AddIntersection",{attrs:{visible:t.addIntersection.visible,params:t.addIntersection.params},on:{"update:visible":function(e){return t.$set(t.addIntersection,"visible",e)},submited:t.handleSubmitAddIntersection,close:t.handleStopPointSelect}}),e("CrossroadsList",{attrs:{visible:t.showCrossroadsList,params:t.crossroadsList.params},on:{"update:params":function(e){return t.$set(t.crossroadsList,"params",e)},"update:visible":function(e){t.crossroadsList.visible=e},showCrossroadsDetail:t.handleShowCrossroadsDetail,showCrossroadsStatsEdit:t.handleShowCrossroadsStatsEdit,showDrawLine:t.handleShowDrawLine,showManuallyEnteringCrossroads:t.handleShowManuallyEnteringCrossroads,showVideoInputCrossroads:t.handleShowVideoInputCrossroads}}),e("VideoInputCrossroads",{attrs:{visible:t.videoInputCrossroads.visible,params:t.videoInputCrossroads.params},on:{"update:visible":function(e){return t.$set(t.videoInputCrossroads,"visible",e)},submited:t.handleSubmitVideoInputCrossroads}}),e("ManuallyEnteringCrossroads",{attrs:{visible:t.manuallyEnteringCrossroads.visible,params:t.manuallyEnteringCrossroads.params},on:{"update:visible":function(e){return t.$set(t.manuallyEnteringCrossroads,"visible",e)},submited:t.handleSubmitManuallyEnteringCrossroads}}),e("DrawLine",{attrs:{visible:t.drawLine.visible,params:t.drawLine.params},on:{"update:visible":function(e){return t.$set(t.drawLine,"visible",e)},submited:t.handleDrawLineSuccess}}),e("CrossroadsDetail",{attrs:{visible:t.crossroadsDetail.visible,params:t.crossroadsDetail.params},on:{"update:visible":function(e){return t.$set(t.crossroadsDetail,"visible",e)}}}),e("CrossroadsStatsEdit",{attrs:{visible:t.crossroadsStatsEdit.visible,params:t.crossroadsStatsEdit.params},on:{"update:visible":function(e){return t.$set(t.crossroadsStatsEdit,"visible",e)},redraw:t.handleRedraw}}),e("HelpDialog"),e("ImageListDialog",{attrs:{visible:t.imageListDialog.visible},on:{"update:visible":function(e){return t.$set(t.imageListDialog,"visible",e)},close:function(e){return t.handleSetHMash(null)}}}),e("Dialog",{staticClass:"ImageDialog",attrs:{title:"查看图片",top:50,left:100,width:"600px",hideMinimize:"",visible:t.imageDialog.visible},on:{"update:visible":function(e){return t.$set(t.imageDialog,"visible",e)},close:function(e){return t.handleSetHMash(null)}}},[t.imageDialog.data?e("el-image",{staticStyle:{width:"560px",height:"auto"},attrs:{src:t.imageDialog.data.url,"preview-src-list":[t.imageDialog.data.url]}}):t._e(),e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.handleDeleteImage(t.imageDialog.data)}}},[t._v("删除图片")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.imageDialog.visible=!1,t.handleSetHMash(null)}}},[t._v("关闭")])],1)],1)],1)},a=[],r=(i(560),i(6660)),n=i(1013),o=i(2150),l=(i(4224),i(1121),i(7133),i(8962));const h={NOT_STARTED:0,CAN_START:1,IN_PROGREES:2,ENDED:3},d={STATE_CHANGE:"handle:statechange"};class c extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","FrameSelectLayer"),(0,o.Z)(this,"color",4235007),(0,o.Z)(this,"opacity",.5),(0,o.Z)(this,"state",h.NOT_STARTED),(0,o.Z)(this,"startPoint",[0,0]),(0,o.Z)(this,"endPoint",[0,0]),this.color=t.color||4235007,this.opacity=t.opacity||.5,this.material=new l.vBJ({transparent:!0,opacity:this.opacity,color:new l.Ilk(this.color),depthFunc:l.Se2,alphaTest:.2}),this.geometry=new l.u9r,this.mesh=new l.Kj0(this.geometry,this.material)}on(t,e){t==r.kT.HANDLE_MOUSE_LEFT_DOWN&&(this.state!=h.CAN_START&&this.state!=h.ENDED||(this.startPoint=e.webMercatorXY,this.endPoint=e.webMercatorXY,this.state=h.IN_PROGREES,this.update(),this.scene.add(this.mesh),this.handleStateChange())),t==r.kT.HANDLE_MOUSE_LEFT_UP&&this.state==h.IN_PROGREES&&(this.endPoint=e.webMercatorXY,this.state=h.ENDED,this.update(),this.handleStateChange()),t==r.kT.HANDLE_MOUSE_MOVE&&this.state==h.IN_PROGREES&&(this.endPoint=e.webMercatorXY,this.update()),t==r.kT.HANDLE_CLICK_LEFT&&(this.state==h.IN_PROGREES?(this.endPoint=e.webMercatorXY,this.state=h.ENDED,this.update(),this.handleStateChange()):this.state!=h.NOT_STARTED&&(this.startPoint=e.webMercatorXY,this.endPoint=e.webMercatorXY,this.state=h.IN_PROGREES,this.update(),this.scene.add(this.mesh),this.handleStateChange())),t==r.kT.HANDLE_CLICK_RIGHT&&this.state!=h.NOT_STARTED&&(this.startPoint=[0,0],this.endPoint=[0,0],this.state=h.CAN_START,this.update(),this.handleStateChange()),t!=r.kT.UPDATE_CENTER&&t!=r.kT.UPDATE_ZOOM||this.state!=h.NOT_STARTED&&this.update(),super.on(t,e)}handleStateChange(){const t=this.map.center;let[e,i]=this.map.WebMercatorToCanvasXY(...this.startPoint,...t),[s,a]=this.map.WebMercatorToCanvasXY(...this.endPoint,...t);const r=e>s?this.startPoint:this.endPoint,n=e>s?this.endPoint:this.startPoint;this.handleEventListener(d.STATE_CHANGE,{state:this.state,xy:{rightTop:r,rightBottom:[r[0],n[1]],leftBottom:n,leftTop:[n[0],r[1]]}})}stop(){this.clearScene(),this.state=h.NOT_STARTED,this.handleStateChange()}play(){this.state=h.CAN_START,this.handleStateChange()}reset(){this.clearScene(),this.state=h.NOT_STARTED,this.startPoint=[0,0],this.endPoint=[0,0],this.update(),this.handleStateChange()}update(){const t=this.map.center;let[e,i]=this.map.WebMercatorToCanvasXY(...this.startPoint,...t),[s,a]=this.map.WebMercatorToCanvasXY(...this.endPoint,...t),r=[0,0,0,1,1,1,1,0],n=[Math.min(e,s),Math.min(i,a),0,Math.max(e,s),Math.min(i,a),0,Math.max(e,s),Math.max(i,a),0,Math.min(e,s),Math.max(i,a),0],o=[0,1,2,0,2,3];this.geometry.setAttribute("position",new l.TlE(new Float32Array(n),3)),this.geometry.setAttribute("uv",new l.TlE(new Float32Array(r),2)),this.geometry.index=new l.TlE(new Uint16Array(o),1),this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere()}}const u={DISABLE:0,ENABLE:1},p={POINT_CHANGE:"handle:pointchange",STATE_CHANGE:"handle:statechange"};class g extends r.mh{set point(t){this._point=t;try{if(this.map){const[t,e]=this.map.WebMercatorToCanvasXY(this._point[0],this._point[1]);this.mesh.position.set(t,e,0),this.scene.add(this.mesh)}}catch(e){}}get point(){return this._point}get size(){return this._size}set size(t){this._size=t,this.mesh.scale.set(this.size,this.size,1)}set state(t){this._state=t,this.handleEventListener(p.STATE_CHANGE,{state:this._state,point:this._point})}get state(){return this._state}constructor(t){super(t),(0,o.Z)(this,"_point",null),(0,o.Z)(this,"_size",100),(0,o.Z)(this,"_state",u.DISABLE),(0,o.Z)(this,"color",null),this.texture=(new l.dpR).load(i(1534));const e=new l.xeV({color:t.color,map:this.texture,transparent:!0,sizeAttenuation:!0});this.mesh=new l.jyi(e),this.mesh.center.set(.5,0),this.scene.add(this.mesh),this.size=100,this.point=[0,0],this.color=null}on(t,e){t==r.kT.UPDATE_CENTER&&(this.point=this._point),t==r.kT.HANDLE_CLICK_LEFT&&this.state==u.ENABLE&&(this.point=e.webMercatorXY,this.handleEventListener(p.POINT_CHANGE,{state:this._state,point:this._point})),t==r.kT.UPDATE_CAMERA_HEIGHT&&(this.size=this.map.cameraHeight/20)}onAdd(t){super.onAdd(t),this.point=this._point,this.size=this.map.cameraHeight/20}}var m=i(6523);const f=new l.Ilk(9474969);class y extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","NetworkLayer"),(0,o.Z)(this,"data",null),(0,o.Z)(this,"color",null),(0,o.Z)(this,"lineWidth",4),(0,o.Z)(this,"material",null),(0,o.Z)(this,"pickLayerMaterial",null),(0,o.Z)(this,"pickMaterial",null),(0,o.Z)(this,"highMaterial",null),(0,o.Z)(this,"geometry",null),this.setData(t.data),this.color=t.color||f,this.lineWidth=t.lineWidth||1}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}if(t==r.kT.HANDLE_PICK_LEFT&&e.layerId==this.id){let i=this.data.find((t=>e.pickColor==t.pickColorNum));i&&this.handleEventListener(t,i.data)}}onAdd(t){super.onAdd(t),this.update()}setData(t){try{let e=0;const i=[0,0],s=[];for(let a=0,r=t.length;a<r;a++){let r=JSON.parse(t[a].geom);0==a&&(i[0]=r.coordinates[0][0],i[1]=r.coordinates[0][1]),s[s.length]={pickColorNum:++e,path:r.coordinates.map((t=>[Math.round(t[0]-i[0]),Math.round(t[1]-i[1])])).flat(),data:t[a]}}this.center=i,this.data=s,this.update()}catch(e){this.center=[0,0],this.data=null,this.update()}}async update(){if(this.clearScene(),!this.map)return;if(!this.data)return;this.material=this.getMaterial({color:this.color}),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,pickOffset:10}),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0,pickOffset:10});const[t,e]=this.map.WebMercatorToCanvasXY(...this.center),i=new v(this.data),s=new l.Kj0(i,this.material);s.position.set(t,e,0),this.scene.add(s);const a=new l.Kj0(i,this.pickLayerMaterial);a.position.set(t,e,0),this.pickLayerScene.add(a);const r=new l.Kj0(i,this.pickMaterial);r.position.set(t,e,0),this.pickMeshScene.add(r)}setValues(t){for(const e in t)this[e]=t[e];this.material&&(this.material.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.needsUpdate=!0)}getMaterial({usePickColor:t,pickOffset:e,...i}){const s=new l.vBJ({side:l.ehD,transparent:!0,wireframe:!1,...i});return s.onBeforeCompile=i=>{i.vertexShader=i.vertexShader.replace("#include <common>","\n          #include <common>\n          vec3 lineOffset(vec2 start, vec3 current, vec2 end, float offset) {\n            float lenA = length(current.xy - start);\n            float lenB = length(current.xy - end);\n\n            if(lenA == 0. && lenB == 0.) return current;\n\n            vec2 dirA = normalize(current.xy - start);\n            vec2 dirB = normalize(current.xy - end);\n\n            if(lenA == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(-dirB.y, dirB.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else if(lenB == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(dirA.y, -dirA.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else {\n              vec2 dir = normalize(dirB - dirA);\n              vec2 normal = vec2(-dir.y, dir.x);\n              float angle = acos(dot(dirB, normal));\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            }\n          }\n\n          attribute vec3 pickColor;\n          attribute float side;\n          attribute vec2 startPosition;\n          attribute vec2 endPosition;\n        "),i.vertexShader=i.vertexShader.replace("#include <begin_vertex>",`\n          #include <begin_vertex>\n          float lineWidth = ${Number(this.lineWidth+(e||0)).toFixed(2)};\n          float offset = lineWidth / 2.0  * side;\n          transformed = lineOffset(startPosition, position, endPosition, offset);\n        `),t&&(i.vertexShader=i.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            #if defined( USE_COLOR_ALPHA )\n              vColor = vec4(pickColor,1.0);\n            #elif defined( USE_COLOR )\n              vColor.rgb = pickColor.rgb;\n            #endif\n          "))},s.customProgramCacheKey=()=>JSON.stringify({uuid:s.uuid,lineWidth:this.lineWidth,usePickColor:t,pickOffset:e}),s}getGeometry(){const t=[];for(const e of this.data){const i=e.path.length,s=new l.TlE(new Float32Array(4*i*3),3),a=new l.TlE(new Float32Array(4*i*2),2),r=new l.TlE(new Float32Array(4*i*2),2),n=new l.TlE(new Float32Array(4*i),1),o=new l.TlE(new Uint16Array(2*i*3),1),h=new l.TlE(new Float32Array(4*i*2),2),d=new l.TlE(new Float32Array(4*i*3),3),c=new l.TlE(new Float32Array(4*i*3),3),u=e.pickColor;for(let t=0;t<e.path.length;t++){const i=e.path[t],l=0==t?i:e.path[t-1],p=t==e.path.length-1?i:e.path[t+1],g=this.color,m=l.fromxy,f=i.fromxy,y=i.toxy,v=p.toxy;a.setXY(4*t,m[0],m[1]),a.setXY(4*t+1,m[0],m[1]),s.setXYZ(4*t,f[0],f[1],0),s.setXYZ(4*t+1,f[0],f[1],0),r.setXY(4*t,y[0],y[1]),r.setXY(4*t+1,y[0],y[1]),n.setX(4*t,1),n.setX(4*t+1,-1),d.setXYZ(4*t,u.r,u.g,u.b),d.setXYZ(4*t+1,u.r,u.g,u.b),c.setXYZ(4*t,g.r,g.g,g.b),c.setXYZ(4*t+1,g.r,g.g,g.b),a.setXY(4*t+2,f[0],f[1]),a.setXY(4*t+3,f[0],f[1]),s.setXYZ(4*t+2,y[0],y[1],0),s.setXYZ(4*t+3,y[0],y[1],0),r.setXY(4*t+2,v[0],v[1]),r.setXY(4*t+3,v[0],v[1]),n.setX(4*t+2,1),n.setX(4*t+3,-1),d.setXYZ(4*t+2,u.r,u.g,u.b),d.setXYZ(4*t+3,u.r,u.g,u.b),c.setXYZ(4*t+2,g.r,g.g,g.b),c.setXYZ(4*t+3,g.r,g.g,g.b),h.setXY(4*t,0,0),h.setXY(4*t+1,1,0),h.setXY(4*t+2,0,1),h.setXY(4*t+3,1,1),o.setX(6*t,4*t),o.setX(6*t+1,4*t+1),o.setX(6*t+2,4*t+3),o.setX(6*t+3,4*t),o.setX(6*t+4,4*t+3),o.setX(6*t+5,4*t+2)}const p=new l.u9r;p.setAttribute("position",s),p.setAttribute("startPosition",a),p.setAttribute("endPosition",r),p.setAttribute("side",n),p.setAttribute("uv",h),p.setAttribute("pickColor",d),p.setAttribute("color",c),p.index=o,e.geometry=p,t.push(p)}return m.qf(t,!1)}}class v extends l.u9r{constructor(t){super(),this.type="NetworkGeometry",this.isNetworkGeometry=!0;const e=new Array,i=new Array,s=new Array,a=new Array,r=new Array,n=new Array;let o=0;for(let h=0,d=t.length;h<d;h++){const d=t[h].path,c=new l.Ilk(t[h].pickColorNum);for(let t=0,l=d.length/2;t<l;t++){let h=d[2*t-2],u=d[2*t-1],p=d[2*t+0],g=d[2*t+1],m=d[2*t+2],f=d[2*t+3];0===t&&(h=2*p-m,u=2*g-f),t>=l-1&&(m=2*p-h,f=2*g-u),e[e.length]=p,e[e.length]=g,e[e.length]=0,e[e.length]=p,e[e.length]=g,e[e.length]=0,n[n.length]=c.r,n[n.length]=c.g,n[n.length]=c.b,n[n.length]=c.r,n[n.length]=c.g,n[n.length]=c.b,i[i.length]=h,i[i.length]=u,i[i.length]=h,i[i.length]=u,s[s.length]=m,s[s.length]=f,s[s.length]=m,s[s.length]=f,a[a.length]=-1,a[a.length]=1,t<l-1&&(r[r.length]=o+0,r[r.length]=o+1,r[r.length]=o+3,r[r.length]=o+0,r[r.length]=o+3,r[r.length]=o+2),o+=2}}this.setAttribute("position",new l.a$l(e,3)),this.setAttribute("startPosition",new l.a$l(i,2)),this.setAttribute("endPosition",new l.a$l(s,2)),this.setAttribute("side",new l.RNb(a,1)),this.setAttribute("pickColor",new l.a$l(n,3)),this.setIndex(r),this.computeVertexNormals()}}const b=15114812,_=16084076,w=4235007,C=new l.Ilk(9474969),A={0:new l.Ilk(b),1:new l.Ilk(_),2:new l.Ilk(w),"0,1":new l.Ilk((b+_)/2),"1,0":new l.Ilk((b+_)/2),"0,2":new l.Ilk((b+w)/2),"2,0":new l.Ilk((b+w)/2),"1,2":new l.Ilk((_+w)/2),"2,1":new l.Ilk((_+w)/2),"0,1,2":new l.Ilk((b+_+w)/3),"1,0,2":new l.Ilk((b+_+w)/3),"1,2,0":new l.Ilk((b+_+w)/3),"0,2,1":new l.Ilk((b+_+w)/3),"2,0,1":new l.Ilk((b+_+w)/3),"2,1,0":new l.Ilk((b+_+w)/3)};class S extends r.mh{get isTwoWay(){return this.data.length-1}constructor(t){super(t),(0,o.Z)(this,"name","LinkLayer"),(0,o.Z)(this,"data",null),(0,o.Z)(this,"color",null),(0,o.Z)(this,"lineWidth",4),(0,o.Z)(this,"twoWayOffset",0),(0,o.Z)(this,"selectId",null),(0,o.Z)(this,"selectMesh",null),(0,o.Z)(this,"material",null),(0,o.Z)(this,"pickLayerMaterial",null),(0,o.Z)(this,"pickMaterial",null),this.setData(t.data),this.color=t.color?new l.Ilk(t.color):C,this.lineWidth=t.lineWidth||4,this.twoWayOffset=t.twoWayOffset||0}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}if(t==r.kT.HANDLE_PICK_LEFT&&e.layerId==this.id){let i=new l.Ilk(e.pickColor);for(const e of this.data){let s=e.find((t=>t.pickColor.equals(i)));if(s){this.selectId=s.id,this.updateSelectLink(),this.handleEventListener(t,s);break}this.selectId=-1,this.updateSelectLink()}}}onAdd(t){super.onAdd(t),this.update()}setData(t,e){try{this.selectId=e,this.center=t[0][0].fromxy,this.data=JSON.parse(JSON.stringify(t)).map((t=>{let e=t.length,i=[];for(let s=0;s<e;s++){const e=JSON.parse(JSON.stringify(t[s]));e.pickColor=this.getPickMeshColor(),e.fromPoint=e.fromxy.map(((t,e)=>Math.round(t-this.center[e]))),e.toPoint=e.toxy.map(((t,e)=>Math.round(t-this.center[e]))),i.push(e)}return i}))}catch(i){this.data=null,this.selectId=null}this.update(),this.updateSelectLink()}setSelectId(t){this.selectId!=t&&(this.selectId=t,this.updateSelectLink())}update(){if(this.clearScene(),!this.map)return;if(!this.data)return;this.material=this.getMaterial({vertexColors:!0}),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,pickOffset:10}),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0,pickOffset:10});const[t,e]=this.map.WebMercatorToCanvasXY(...this.center);let i=this.getGeometry();const s=new l.Kj0(i,this.material);s.position.set(t,e,0),this.scene.add(s);const a=new l.Kj0(i,this.pickLayerMaterial);a.position.set(t,e,0),this.pickLayerScene.add(a);const r=new l.Kj0(i,this.pickMaterial);r.position.set(t,e,0),this.pickMeshScene.add(r)}setValues(t){for(const e in t)this[e]=t[e];this.material&&(this.material.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.needsUpdate=!0),this.selectMesh&&(this.selectMesh.material.needsUpdate=!0)}updateSelectLink(){if(this.selectMesh&&(this.selectMesh.removeFromParent(),this.selectMesh=null),!this.selectId)return;let t=this.getSelectGeometry(),e=this.getMaterial({color:16777215,opacity:.8,transparent:!0});const[i,s]=this.map.WebMercatorToCanvasXY(...this.center);this.selectMesh=new l.Kj0(t,e),this.selectMesh.position.set(i,s,0),this.scene.add(this.selectMesh)}getSelectGeometry(){const t=[],e=[],i=[],s=[],a=[],r=[],n=[],o=[];for(const l of this.data)for(let h=0;h<l.length;h++){const d=l[h];if(d.id==this.selectId){const c=0==h?d:l[h-1],u=h==l.length-1?d:l[h+1],p=d.pickColor,g=A[d.statsType]||this.color,m=c.fromPoint,f=d.fromPoint,y=d.toPoint,v=u.toPoint;e.push(m),e.push(m),t.push([...f,0]),t.push([...f,0]),i.push(y),i.push(y),s.push(1),s.push(-1),n.push([p.r,p.g,p.b]),n.push([p.r,p.g,p.b]),o.push([g.r,g.g,g.b]),o.push([g.r,g.g,g.b]),r.push([0,0]),r.push([1,0]),a.push([0,1,3]),e.push(f),e.push(f),t.push([...y,0]),t.push([...y,0]),i.push(v),i.push(v),s.push(1),s.push(-1),n.push([p.r,p.g,p.b]),n.push([p.r,p.g,p.b]),o.push([g.r,g.g,g.b]),o.push([g.r,g.g,g.b]),r.push([0,1]),r.push([1,1]),a.push([0,3,2])}}const h=new l.u9r;return h.setAttribute("position",new l.TlE(new Float32Array(t.flat()),3)),h.setAttribute("startPosition",new l.TlE(new Float32Array(e.flat()),2)),h.setAttribute("endPosition",new l.TlE(new Float32Array(i.flat()),2)),h.setAttribute("side",new l.TlE(new Float32Array(s.flat()),1)),h.setAttribute("uv",new l.TlE(new Float32Array(r.flat()),2)),h.setAttribute("pickColor",new l.TlE(new Float32Array(n.flat()),3)),h.setAttribute("color",new l.TlE(new Float32Array(o.flat()),3)),h.index=new l.TlE(new Uint16Array(a.flat()),1),h}getMaterial({usePickColor:t,pickOffset:e,...i}){const s=new l.vBJ({side:l.ehD,transparent:!0,wireframe:!1,...i});return s.onBeforeCompile=i=>{i.vertexShader=i.vertexShader.replace("#include <common>","\n          #include <common>\n\n          vec3 lineOffset(vec2 start, vec3 current, vec2 end, float offset) {\n            float lenA = length(current.xy - start);\n            float lenB = length(current.xy - end);\n\n            if(lenA == 0. && lenB == 0.) return current;\n\n            vec2 dirA = normalize(current.xy - start);\n            vec2 dirB = normalize(current.xy - end);\n\n            if(lenA == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(-dirB.y, dirB.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else if(lenB == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(dirA.y, -dirA.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else {\n              vec2 dir = normalize(dirB - dirA);\n              vec2 normal = vec2(-dir.y, dir.x);\n              float angle = acos(dot(dirB, normal));\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            }\n          }\n\n          attribute vec3 pickColor;\n          attribute float side;\n          attribute vec2 startPosition;\n          attribute vec2 endPosition;\n        "),i.vertexShader=i.vertexShader.replace("#include <begin_vertex>",`\n          #include <begin_vertex>\n          float lineWidth = ${Number(this.lineWidth+(e||0)).toFixed(2)};\n          float twoWayOffset = ${Number(this.twoWayOffset).toFixed(2)};\n          float isTwoWay = ${this.isTwoWay.toFixed(1)};\n          float offset = lineWidth / 2.0 * side + isTwoWay * twoWayOffset;\n          transformed = lineOffset(startPosition, position, endPosition, offset);\n        `),t&&(i.vertexShader=i.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            #if defined( USE_COLOR_ALPHA )\n              vColor = vec4(pickColor,1.0);\n            #elif defined( USE_COLOR )\n              vColor = pickColor;\n            #endif\n          "))},s.customProgramCacheKey=()=>JSON.stringify({uuid:s.uuid,lineWidth:this.lineWidth,twoWayOffset:this.twoWayOffset,isTwoWay:this.isTwoWay,usePickColor:t,pickOffset:e}),s}getGeometry(){const t=[];for(const e of this.data){const i=e.length,s=new l.TlE(new Float32Array(4*i*3+6),3),a=new l.TlE(new Float32Array(4*i*2+4),2),r=new l.TlE(new Float32Array(4*i*2+4),2),n=new l.TlE(new Float32Array(4*i+2),1),o=new l.TlE(new Uint16Array(2*i*3+6),1),h=new l.TlE(new Float32Array(4*i*2+2),2),d=new l.TlE(new Float32Array(4*i*3+6),3),c=new l.TlE(new Float32Array(4*i*3+6),3);for(let t=0;t<e.length;t++){const i=e[t],u=0==t?i:e[t-1],p=t==e.length-1?i:e[t+1],g=i.pickColor,m=A[i.statsType]||this.color,f=u.fromPoint,y=i.fromPoint,v=i.toPoint,b=p.toPoint;if(a.setXY(4*t,f[0],f[1]),a.setXY(4*t+1,f[0],f[1]),s.setXYZ(4*t,y[0],y[1],0),s.setXYZ(4*t+1,y[0],y[1],0),r.setXY(4*t,v[0],v[1]),r.setXY(4*t+1,v[0],v[1]),n.setX(4*t,1),n.setX(4*t+1,-1),d.setXYZ(4*t,g.r,g.g,g.b),d.setXYZ(4*t+1,g.r,g.g,g.b),c.setXYZ(4*t,m.r,m.g,m.b),c.setXYZ(4*t+1,m.r,m.g,m.b),a.setXY(4*t+2,y[0],y[1]),a.setXY(4*t+3,y[0],y[1]),s.setXYZ(4*t+2,v[0],v[1],0),s.setXYZ(4*t+3,v[0],v[1],0),r.setXY(4*t+2,b[0],b[1]),r.setXY(4*t+3,b[0],b[1]),n.setX(4*t+2,1),n.setX(4*t+3,-1),d.setXYZ(4*t+2,g.r,g.g,g.b),d.setXYZ(4*t+3,g.r,g.g,g.b),c.setXYZ(4*t+2,m.r,m.g,m.b),c.setXYZ(4*t+3,m.r,m.g,m.b),h.setXY(4*t,0,0),h.setXY(4*t+1,1,0),h.setXY(4*t+2,0,1),h.setXY(4*t+3,1,1),o.setX(6*t,4*t),o.setX(6*t+1,4*t+1),o.setX(6*t+2,4*t+3),o.setX(6*t+3,4*t),o.setX(6*t+4,4*t+3),o.setX(6*t+5,4*t+2),t==e.length-1){const e=new l.FM8(...y),i=new l.FM8(...v),u=new l.FM8(0,0);u.subVectors(e,i),u.setLength(15),u.add(i),u.round();const p=new l.FM8(0,0);p.subVectors(e,i),p.setLength(50),p.add(i),p.round(),a.setXY(4*t+4,p.x,p.y),a.setXY(4*t+5,p.x,p.y),s.setXYZ(4*t+4,u.x,u.y,0),s.setXYZ(4*t+5,u.x,u.y,0),r.setXY(4*t+4,v[0],v[1]),r.setXY(4*t+5,v[0],v[1]),n.setX(4*t+4,2),n.setX(4*t+5,4),d.setXYZ(4*t+4,g.r,g.g,g.b),d.setXYZ(4*t+5,g.r,g.g,g.b),c.setXYZ(4*t+4,m.r,m.g,m.b),c.setXYZ(4*t+5,m.r,m.g,m.b),h.setXY(4*t+4,0,0),h.setXY(4*t+5,1,0),o.setX(6*t+6,4*t+2),o.setX(6*t+7,4*t+4),o.setX(6*t+8,4*t+5),o.setX(6*t+9,4*t+3),o.setX(6*t+10,4*t+2),o.setX(6*t+11,4*t+4)}}const u=new l.u9r;u.setAttribute("position",s),u.setAttribute("startPosition",a),u.setAttribute("endPosition",r),u.setAttribute("side",n),u.setAttribute("uv",h),u.setAttribute("pickColor",d),u.setAttribute("color",c),u.index=o,t.push(u)}return m.qf(t,!1)}}class x extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","LinkStatsLayer"),(0,o.Z)(this,"size",100),(0,o.Z)(this,"data",[]),(0,o.Z)(this,"color",null),this.size=t.size||100,this.data=t.data,this.color=t.color||C,this.texture=(new l.dpR).load(i(3509)),this.geometry=new l.u9r,this.material=this.getMaterial({map:this.texture,vertexColors:!0,usePickColor:!1}),this.mesh=new l.woe(this.geometry,this.material),this.mesh.userData.center=[0,0],this.mesh.position.set(0,0,0),this.scene.add(this.mesh),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,vertexColors:!1,usePickColor:!1}),this.pickLayerMesh=new l.woe(this.geometry,this.pickLayerMaterial),this.mesh.userData.center=[0,0],this.pickLayerMesh.position.set(0,0,0),this.pickLayerScene.add(this.pickLayerMesh),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0}),this.pickMesh=new l.woe(this.geometry,this.pickMaterial),this.mesh.userData.center=[0,0],this.pickMesh.position.set(0,0,0),this.pickMeshScene.add(this.pickMesh)}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}t==r.kT.HANDLE_PICK_LEFT&&e.layerId==this.id&&this.handleEventListener(t,this.data[e.pickColor-1]),t==r.kT.UPDATE_CAMERA_HEIGHT&&this.setSize(this.map.cameraHeight/20)}onAdd(t){super.onAdd(t),this.update(),this.setSize(this.map.cameraHeight/20)}setSize(t){this.size=t,this.material&&(this.material.setValues({size:t}),this.material.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.setValues({size:t}),this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.setValues({size:t}),this.pickMaterial.needsUpdate=!0),this.mesh&&(this.mesh.position.z=0),this.pickLayerMesh&&(this.pickLayerMesh.position.z=0),this.pickMesh&&(this.pickMesh.position.z=0)}setData(t){this.data=t,this.update()}update(){if(!this.map)return;if(!this.data)return;const t=this.data.length,e=new l.TlE(new Float32Array(3*t),3),i=new l.TlE(new Float32Array(3*t),3),s=new l.TlE(new Float32Array(3*t),3);let a=[];for(let o=0;o<t;o++){const t=this.data[o];0==o&&(a=[t.x,t.y]),e.setXYZ(o,t.x-a[0],t.y-a[1],0);const r=new l.Ilk(o+1);i.setXYZ(o,r.r,r.g,r.b);const n=A[t.type]||this.color;s.setXYZ(o,n.r,n.g,n.b)}this.geometry.setAttribute("position",e),this.geometry.setAttribute("pickColor",i),this.geometry.setAttribute("color",s),this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere();let[r,n]=this.map.WebMercatorToCanvasXY(...a);this.mesh.userData.center=a,this.mesh.position.set(r,n,0),this.pickLayerMesh.userData.center=a,this.pickLayerMesh.position.set(r,n,0),this.pickMesh.userData.center=a,this.pickMesh.position.set(r,n,0)}getMaterial({usePickColor:t,...e}){const i=new l.UY4({size:this.size,transparent:!0,sizeAttenuation:!0,...e});return i.onBeforeCompile=e=>{t&&(e.vertexShader=e.vertexShader.replace("#include <color_pars_vertex>","\n            #include <color_pars_vertex>\n            attribute vec3 pickColor;\n          "),e.vertexShader=e.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            vColor.rgb = pickColor.rgb;\n          "))},i.customProgramCacheKey=()=>JSON.stringify({uuid:i.uuid,usePickColor:t}),i}}const k=new l.Ilk(9474969);class L extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","GuangZhouLayer"),(0,o.Z)(this,"data",null),(0,o.Z)(this,"color",null),(0,o.Z)(this,"lineWidth",4),(0,o.Z)(this,"material",null),(0,o.Z)(this,"pickLayerMaterial",null),(0,o.Z)(this,"pickMaterial",null),(0,o.Z)(this,"highMaterial",null),(0,o.Z)(this,"geometry",null),this.setData(t.data),this.color=t.color||k,this.lineWidth=t.lineWidth||1}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.data.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.data.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...this.data.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}t==r.kT.UPDATE_CAMERA_HEIGHT&&this.setValues({lineWidth:this.map.cameraHeight/400})}onAdd(t){super.onAdd(t),this.setValues({lineWidth:this.map.cameraHeight/400}),this.update()}setData(t){this.data=t,this.update()}update(){if(this.clearScene(),!this.map)return;if(!this.data)return;this.material=this.getMaterial({color:this.color}),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,pickOffset:10}),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0,pickOffset:10});const[t,e]=this.map.WebMercatorToCanvasXY(...this.data.center),i=this.getGeometry(),s=new l.Kj0(i,this.material);s.position.set(t,e,0),this.scene.add(s);const a=new l.Kj0(i,this.pickLayerMaterial);a.position.set(t,e,0),this.pickLayerScene.add(a);const r=new l.Kj0(i,this.pickMaterial);r.position.set(t,e,0),this.pickMeshScene.add(r)}setValues(t){for(const e in t)this[e]=t[e];this.material&&(this.material.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.needsUpdate=!0)}getMaterial({usePickColor:t,pickOffset:e,...i}){const s=new l.vBJ({side:l.ehD,transparent:!0,wireframe:!1,...i});return s.onBeforeCompile=i=>{i.vertexShader=i.vertexShader.replace("#include <common>","\n          #include <common>\n          vec3 lineOffset(vec2 start, vec3 current, vec2 end, float offset) {\n            float lenA = length(current.xy - start);\n            float lenB = length(current.xy - end);\n\n            if(lenA == 0. && lenB == 0.) return current;\n\n            vec2 dirA = normalize(current.xy - start);\n            vec2 dirB = normalize(current.xy - end);\n\n            if(lenA == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(-dirB.y, dirB.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else if(lenB == 0.) {\n              float angle = PI / 2.0;\n              vec2 normal = vec2(dirA.y, -dirA.x);\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            } else {\n              vec2 dir = normalize(dirB - dirA);\n              vec2 normal = vec2(-dir.y, dir.x);\n              float angle = acos(dot(dirB, normal));\n              return vec3(current.xy + normal * offset / sin(angle), current.z);\n            }\n          }\n\n          attribute vec3 pickColor;\n          attribute float side;\n          attribute vec2 startPosition;\n          attribute vec2 endPosition;\n        "),i.vertexShader=i.vertexShader.replace("#include <begin_vertex>",`\n          #include <begin_vertex>\n          float lineWidth = ${Number(this.lineWidth+(e||0)).toFixed(2)};\n          float offset = lineWidth / 2.0  * side;\n          transformed = lineOffset(startPosition, position, endPosition, offset);\n        `),t&&(i.vertexShader=i.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            #if defined( USE_COLOR_ALPHA )\n              vColor = vec4(pickColor,1.0);\n            #elif defined( USE_COLOR )\n              vColor = pickColor;\n            #endif\n          "))},s.customProgramCacheKey=()=>JSON.stringify({uuid:s.uuid,lineWidth:this.lineWidth,usePickColor:t,pickOffset:e}),s}getGeometry(){const t=[];for(const e of this.data.lineList){const i=e.length,s=new l.TlE(new Float32Array(4*i*3),3),a=new l.TlE(new Float32Array(4*i*2),2),r=new l.TlE(new Float32Array(4*i*2),2),n=new l.TlE(new Float32Array(4*i),1),o=new l.TlE(new Uint16Array(2*i*3),1),h=new l.TlE(new Float32Array(4*i*2),2),d=new l.TlE(new Float32Array(4*i*3),3),c=new l.TlE(new Float32Array(4*i*3),3);for(let t=0;t<e.length;t++){const i=e[t],l=0==t?i:e[t-1],u=t==e.length-1?i:e[t+1],p=this.color,g=this.getPickMeshColor(),m=l.fromxy,f=i.fromxy,y=i.toxy,v=u.toxy;a.setXY(4*t,m[0],m[1]),a.setXY(4*t+1,m[0],m[1]),s.setXYZ(4*t,f[0],f[1],0),s.setXYZ(4*t+1,f[0],f[1],0),r.setXY(4*t,y[0],y[1]),r.setXY(4*t+1,y[0],y[1]),n.setX(4*t,1),n.setX(4*t+1,-1),d.setXYZ(4*t,g.r,g.g,g.b),d.setXYZ(4*t+1,g.r,g.g,g.b),c.setXYZ(4*t,p.r,p.g,p.b),c.setXYZ(4*t+1,p.r,p.g,p.b),a.setXY(4*t+2,f[0],f[1]),a.setXY(4*t+3,f[0],f[1]),s.setXYZ(4*t+2,y[0],y[1],0),s.setXYZ(4*t+3,y[0],y[1],0),r.setXY(4*t+2,v[0],v[1]),r.setXY(4*t+3,v[0],v[1]),n.setX(4*t+2,1),n.setX(4*t+3,-1),d.setXYZ(4*t+2,g.r,g.g,g.b),d.setXYZ(4*t+3,g.r,g.g,g.b),c.setXYZ(4*t+2,p.r,p.g,p.b),c.setXYZ(4*t+3,p.r,p.g,p.b),h.setXY(4*t,0,0),h.setXY(4*t+1,1,0),h.setXY(4*t+2,0,1),h.setXY(4*t+3,1,1),o.setX(6*t,4*t),o.setX(6*t+1,4*t+1),o.setX(6*t+2,4*t+3),o.setX(6*t+3,4*t),o.setX(6*t+4,4*t+3),o.setX(6*t+5,4*t+2)}const u=new l.u9r;u.setAttribute("position",s),u.setAttribute("startPosition",a),u.setAttribute("endPosition",r),u.setAttribute("side",n),u.setAttribute("uv",h),u.setAttribute("pickColor",d),u.setAttribute("color",c),u.index=o,t.push(u)}return m.qf(t,!1)}}const M={0:new l.Ilk(9474969),1:new l.Ilk(4235007),2:new l.Ilk(15114812),3:new l.Ilk(6799930),4:new l.Ilk(16084076)},E=M[0];class T extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","IntersectionListLayer"),(0,o.Z)(this,"size",100),(0,o.Z)(this,"data",[]),(0,o.Z)(this,"color",null),this.size=t.size||100,this.data=t.data,this.color=t.color||E,this.texture=(new l.dpR).load(t.texture||i(2219)),this.geometry=new l.u9r,this.material=this.getMaterial({map:this.texture,vertexColors:!0,usePickColor:!1}),this.mesh=new l.woe(this.geometry,this.material),this.mesh.userData.center=[0,0],this.mesh.position.set(0,0,0),this.scene.add(this.mesh),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,vertexColors:!1,usePickColor:!1}),this.pickLayerMesh=new l.woe(this.geometry,this.pickLayerMaterial),this.mesh.userData.center=[0,0],this.pickLayerMesh.position.set(0,0,0),this.pickLayerScene.add(this.pickLayerMesh),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0}),this.pickMesh=new l.woe(this.geometry,this.pickMaterial),this.mesh.userData.center=[0,0],this.pickMesh.position.set(0,0,0),this.pickMeshScene.add(this.pickMesh)}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}t==r.kT.HANDLE_PICK_LEFT&&e.layerId==this.id&&(console.log(e.pickColor),this.handleEventListener(t,this.data[e.pickColor-1])),t==r.kT.UPDATE_CAMERA_HEIGHT&&this.setSize(this.map.cameraHeight/20)}onAdd(t){super.onAdd(t),this.update(),this.setSize(this.map.cameraHeight/20)}setSize(t){this.size=t,this.material&&(this.material.setValues({size:t}),this.material.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.setValues({size:t}),this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.setValues({size:t}),this.pickMaterial.needsUpdate=!0),this.mesh&&(this.mesh.position.z=0),this.pickLayerMesh&&(this.pickLayerMesh.position.z=0),this.pickMesh&&(this.pickMesh.position.z=0)}setData(t){this.data=t,this.update()}update(){if(!this.map)return;if(!this.data)return;const t=this.data.length,e=new l.TlE(new Float32Array(3*t),3),i=new l.TlE(new Float32Array(3*t),3),s=new l.TlE(new Float32Array(3*t),3);let a=[];for(let o=0;o<t;o++){const t=this.data[o];0==o&&(a=[t.x,t.y]),e.setXYZ(o,t.x-a[0],t.y-a[1],0);const r=new l.Ilk(o+1);i.setXYZ(o,r.r,r.g,r.b);const n=M[t.status]||M[1];s.setXYZ(o,n.r,n.g,n.b)}this.geometry.setAttribute("position",e),this.geometry.setAttribute("pickColor",i),this.geometry.setAttribute("color",s),this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere();let[r,n]=this.map.WebMercatorToCanvasXY(...a);this.mesh.userData.center=a,this.mesh.position.set(r,n,0),this.pickLayerMesh.userData.center=a,this.pickLayerMesh.position.set(r,n,0),this.pickMesh.userData.center=a,this.pickMesh.position.set(r,n,0)}getMaterial({usePickColor:t,...e}){const i=new l.UY4({size:this.size,transparent:!0,sizeAttenuation:!0,...e});return i.onBeforeCompile=e=>{t&&(e.vertexShader=e.vertexShader.replace("#include <color_pars_vertex>","\n            #include <color_pars_vertex>\n            attribute vec3 pickColor;\n          "),e.vertexShader=e.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            vColor.rgb = pickColor.rgb;\n          "))},i.customProgramCacheKey=()=>JSON.stringify({uuid:i.uuid,usePickColor:t}),i}}class D extends r.mh{constructor(t){super(t),(0,o.Z)(this,"name","ImageListLayer"),(0,o.Z)(this,"size",100),(0,o.Z)(this,"data",[]),(0,o.Z)(this,"color",null),this.size=t.size||100,this.data=t.data,this.color=t.color||new l.Ilk("orange"),this.hColor=t.hColor||new l.Ilk("#67C23A"),this.texture=(new l.dpR).load(t.texture||i(5564)),this.geometry=new l.u9r,this.material=this.getMaterial({map:this.texture,vertexColors:!0,usePickColor:!1}),this.mesh=new l.woe(this.geometry,this.material),this.mesh.userData.center=[0,0],this.mesh.position.set(0,0,0),this.scene.add(this.mesh),this.pickLayerMaterial=this.getMaterial({color:this.pickLayerColor,vertexColors:!1,usePickColor:!1}),this.pickLayerMesh=new l.woe(this.geometry,this.pickLayerMaterial),this.pickLayerMesh.userData.center=[0,0],this.pickLayerMesh.position.set(0,0,0),this.pickLayerScene.add(this.pickLayerMesh),this.pickMaterial=this.getMaterial({vertexColors:!0,usePickColor:!0}),this.pickMesh=new l.woe(this.geometry,this.pickMaterial),this.pickMesh.userData.center=[0,0],this.pickMesh.position.set(0,0,0),this.pickMeshScene.add(this.pickMesh),this.hGeometry=new l.u9r,this.hGeometry.setAttribute("position",new l.TlE(new Float32Array([0,0,0]),3)),this.hMaterial=this.getMaterial({map:this.texture,color:this.hColor,vertexColors:!1,usePickColor:!1}),this.hMesh=new l.woe(this.hGeometry,this.hMaterial),this.hMesh.userData.center=[0,0],this.hMesh.position.set(0,0,-1e3)}on(t,e){if(t==r.kT.UPDATE_CENTER){for(const t of this.scene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickLayerScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}for(const t of this.pickMeshScene.children){const[e,i]=this.map.WebMercatorToCanvasXY(...t.userData.center);t.position.set(e,i,t.position.z)}this.handleEventListener(t)}t==r.kT.HANDLE_PICK_LEFT&&e.layerId==this.id&&this.handleEventListener(t,this.data[e.pickColor-1]),t==r.kT.UPDATE_CAMERA_HEIGHT&&this.setSize(this.map.cameraHeight/20)}onAdd(t){super.onAdd(t),this.update(),this.setSize(this.map.cameraHeight/20)}setSize(t){this.size=t,this.material&&(this.material.setValues({size:t}),this.material.needsUpdate=!0),this.hMaterial&&(this.hMaterial.setValues({size:t}),this.hMaterial.needsUpdate=!0),this.pickLayerMaterial&&(this.pickLayerMaterial.setValues({size:t}),this.pickLayerMaterial.needsUpdate=!0),this.pickMaterial&&(this.pickMaterial.setValues({size:t}),this.pickMaterial.needsUpdate=!0),this.hMesh&&(this.hMesh.position.z=1),this.mesh&&(this.mesh.position.z=0),this.pickLayerMesh&&(this.pickLayerMesh.position.z=0),this.pickMesh&&(this.pickMesh.position.z=0)}setData(t){this.data=t,this.update()}setHMesh(t){if(console.log(t),t){const e=[t.x,t.y];if(this.hMesh.userData.center=e,this.map){let[t,i]=this.map.WebMercatorToCanvasXY(...e);this.hMesh.position.set(t,i,1)}this.scene.add(this.hMesh)}else this.scene.remove(this.hMesh)}update(){if(!this.map)return;if(!this.data)return;const t=this.data.length,e=new l.TlE(new Float32Array(3*t),3),i=new l.TlE(new Float32Array(3*t),3),s=new l.TlE(new Float32Array(3*t),3);let a=[];for(let o=0;o<t;o++){const t=this.data[o];0==o&&(a=[t.x,t.y]),e.setXYZ(o,t.x-a[0],t.y-a[1],0);const r=new l.Ilk(o+1);i.setXYZ(o,r.r,r.g,r.b);const n=this.color;s.setXYZ(o,n.r,n.g,n.b)}this.geometry.setAttribute("position",e),this.geometry.setAttribute("pickColor",i),this.geometry.setAttribute("color",s),this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere();let[r,n]=this.map.WebMercatorToCanvasXY(...a);this.mesh.userData.center=a,this.mesh.position.set(r,n,0),this.pickLayerMesh.userData.center=a,this.pickLayerMesh.position.set(r,n,0),this.pickMesh.userData.center=a,this.pickMesh.position.set(r,n,0)}getMaterial({usePickColor:t,...e}){const i=new l.UY4({size:this.size,transparent:!0,sizeAttenuation:!0,...e});return i.onBeforeCompile=e=>{t&&(e.vertexShader=e.vertexShader.replace("#include <color_pars_vertex>","\n            #include <color_pars_vertex>\n            attribute vec3 pickColor;\n          "),e.vertexShader=e.vertexShader.replace("#include <color_vertex>","\n            #include <color_vertex>\n            vColor.rgb = pickColor.rgb;\n          "))},i.customProgramCacheKey=()=>JSON.stringify({uuid:i.uuid,usePickColor:t}),i}}var F=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"el-zoom-in-right"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"LineFlow"},[e("div",{staticClass:"_header"},[e("i",{staticClass:"el-icon-close",on:{click:t.close}}),e("span",{staticStyle:{"margin-left":"20px"}},[t._v("Link流量详情")])]),e("div",{staticClass:"_bodyer"},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:t.infoEdit?24:8}},[e("el-form",{ref:"infoForm",staticClass:"form_box",attrs:{model:t.infoForm,rules:t.infoRules,"label-width":"100px",inline:!1,size:"small","label-position":"left"}},[e("el-form-item",{attrs:{label:"SegmentID：",prop:"origid"}},[t.infoEdit?[t._v(t._s(t.infoForm.origid))]:[t._v(t._s(t.info.origid))]],2),e("el-form-item",{attrs:{label:"LinkID：",prop:"id"}},[t.infoEdit?[t._v(t._s(t.infoForm.id))]:[t._v(t._s(t.info.id))]],2),e("el-form-item",{attrs:{label:"道路名称：",prop:"name"}},[t.infoEdit?e("el-input",{model:{value:t.infoForm.name,callback:function(e){t.$set(t.infoForm,"name",e)},expression:"infoForm.name"}}):[t._v(t._s(t.info.name))]],2),e("el-form-item",{attrs:{label:"车道数：",prop:"lane"}},[t.infoEdit?e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,step:1,"step-strictly":""},model:{value:t.infoForm.lane,callback:function(e){t.$set(t.infoForm,"lane",e)},expression:"infoForm.lane"}}):[t._v(t._s(t.info.lane))]],2),e("el-form-item",{attrs:{label:"道路类型：",prop:"type"}},[t.infoEdit?e("el-select",{staticStyle:{width:"100%"},model:{value:t.infoForm.type,callback:function(e){t.$set(t.infoForm,"type",e)},expression:"infoForm.type"}},t._l(t.linkTypeOption,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:i}})})),1):[t._v(t._s(t.linkTypeOption[t.info.type]))]],2),e("el-form-item",{attrs:{label:"自由流速度：",prop:"freespeed"}},[t.infoEdit?e("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0},model:{value:t.infoForm.freespeed,callback:function(e){t.$set(t.infoForm,"freespeed",e)},expression:"infoForm.freespeed"}}):[t._v(t._s(t.info.freespeed)+" 米 / 秒")]],2),e("el-form-item",{attrs:{"label-width":"0px"}},[t.infoEdit?t._e():[e("el-button",{attrs:{type:"primary"},on:{click:t.handleEditInfo}},[t._v("编辑")]),e("el-button",{attrs:{type:"primary"},on:{click:t.handleReverse}},[t._v("切换反向道路")])],t.infoEdit?[e("el-button",{attrs:{type:"success"},on:{click:t.handleUpdateLink}},[t._v("更新当前link")]),e("el-button",{attrs:{type:"success"},on:{click:t.handleUpdateInWay}},[t._v("更新整段segment")]),e("el-button",{attrs:{type:"warning"},on:{click:t.handleCloseEditInfo}},[t._v("取消")])]:t._e()],2)],1)],1),e("el-col",{attrs:{span:t.infoEdit?24:16}},[e("div",{staticClass:"chart_box"},[e("div",{ref:"echart",staticClass:"chart"})])]),e("el-col",{attrs:{span:24}},[e("div",{staticStyle:{"font-size":"14px","line-height":"32px","margin-bottom":"10px"}},[e("span",{staticStyle:{width:"100px"}},[t._v("历史信息：")]),e("el-select",{attrs:{clearable:"",multiple:"",size:"small"},on:{change:t.handleQuery},model:{value:t.queryParams.type,callback:function(e){t.$set(t.queryParams,"type",e)},expression:"queryParams.type"}},t._l(t.typeOptions,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:i}})})),1),e("el-button",{attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("添加")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"small",attrs:{height:"calc(100vh - 450px)",data:t.dataList},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{label:"编号",align:"center",prop:"id"}}),e("el-table-column",{attrs:{label:"调查开始时间",align:"center",prop:"beginTime"}}),e("el-table-column",{attrs:{label:"调查结束时间",align:"center",prop:"endTime"}}),e("el-table-column",{attrs:{label:"调查方式",align:"center",prop:"type"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return e("span",{},[t._v(t._s(t.typeOptions[i.type]||""))])}}])}),e("el-table-column",{attrs:{label:"pcu/h",align:"center",prop:"pcuH"}}),e("el-table-column",{attrs:{label:"小型客车",align:"center",prop:"scar"}}),e("el-table-column",{attrs:{label:"小型货车",align:"center",prop:"struck"}}),e("el-table-column",{attrs:{label:"中型客车",align:"center",prop:"mcar"}}),e("el-table-column",{attrs:{label:"中型货车",align:"center",prop:"mtruck"}}),e("el-table-column",{attrs:{label:"大型客车",align:"center",prop:"lcar"}}),e("el-table-column",{attrs:{label:"大型货车",align:"center",prop:"ltruck"}}),e("el-table-column",{attrs:{label:"视频",align:"center"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return e("a",{staticClass:"file_name",attrs:{href:`/file/download?url=${i.video}`}},[t._v(" "+t._s(i.video)+" ")])}}])}),e("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"150",align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(e){return t.handleUpdate(i.row)}}},[t._v("修改")]),e("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(i.row)}}},[t._v("删除")])]}}])})],1),e("pagination",{staticStyle:{"line-height":"1","padding-top":"20px"},attrs:{layout:"total, sizes, prev, pager, next",pagerCount:5,total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1)],1)],1),e("Dialog",{attrs:{title:t.title,visible:t.open,left:440,width:"550px",handleClose:""},on:{"update:visible":function(e){t.open=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"调查时间",prop:"timeList"}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.timeList,callback:function(e){t.$set(t.form,"timeList",e)},expression:"form.timeList"}}),e("div",{staticStyle:{color:"red"}},[t._v("注意: 请输入实际调查起止时间，时长需准确")])],1),e("el-form-item",{attrs:{label:"调查方式",prop:"type"}},[e("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeOptions,(function(i,s){return e("el-radio",{key:s,attrs:{label:String(s)}},[t._v(t._s(i))])})),1)],1),e("el-form-item",{attrs:{label:"上传视频",prop:"video"}},[e("UploadVideo",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}})],1),e("el-form-item",{attrs:{label:"视频录像是否可以覆盖到对向车道","label-width":"auto",prop:"isTwoWay"}},[e("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.form.isTwoWay,callback:function(e){t.$set(t.form,"isTwoWay",e)},expression:"form.isTwoWay"}})],1),e("el-form-item",{attrs:{label:"观察数据"}},[e("div",{staticStyle:{color:"red"}},[t._v("注：请输入实际观测到数量无需换算成一小时的量")]),e("el-form-item",{attrs:{label:"小型客车",prop:"scar","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.scar,callback:function(e){t.$set(t.form,"scar",e)},expression:"form.scar"}}),t._v(" 辆 ")],1),e("el-form-item",{attrs:{label:"小型货车",prop:"struck","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.struck,callback:function(e){t.$set(t.form,"struck",e)},expression:"form.struck"}}),t._v(" 辆 ")],1),e("el-form-item",{attrs:{label:"中型客车",prop:"mcar","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.mcar,callback:function(e){t.$set(t.form,"mcar",e)},expression:"form.mcar"}}),t._v(" 辆 ")],1),e("el-form-item",{attrs:{label:"中型货车",prop:"mtruck","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.mtruck,callback:function(e){t.$set(t.form,"mtruck",e)},expression:"form.mtruck"}}),t._v(" 辆 ")],1),e("el-form-item",{attrs:{label:"大型客车",prop:"lcar","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.lcar,callback:function(e){t.$set(t.form,"lcar",e)},expression:"form.lcar"}}),t._v(" 辆 ")],1),e("el-form-item",{attrs:{label:"大型货车",prop:"ltruck","label-width":"auto"}},[e("el-input-number",{attrs:{step:1,"step-strictly":"",min:0},model:{value:t.form.ltruck,callback:function(e){t.$set(t.form,"ltruck",e)},expression:"form.ltruck"}}),t._v(" 辆 ")],1)],1),e("el-form-item",{attrs:{label:"备注",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入备注",autosize:{minRows:3}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),e("div",{staticClass:"dialog-footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),e("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)])},P=[],I=i(7004);function N(t){return(0,I.Z)({url:"/osm/way/getGeomjson",method:"post",data:t})}function R(t){return(0,I.Z)({url:`/matsim/link/getMatsimLink/${t}`,method:"get"})}function O(t){return(0,I.Z)({url:`/link/stats/${t}`,method:"get"})}function B(t){return(0,I.Z)({url:"/link/stats/insert",method:"POST",data:t})}function G(t){return(0,I.Z)({url:"/link/stats/update",method:"POST",data:t})}function U(t){return(0,I.Z)({url:"/link/stats/queryByArea",method:"POST",data:t})}function z(t){return(0,I.Z)({url:"/link/stats/queryAllMaker",method:"get",params:t})}function W(t,e){return(0,I.Z)({url:`/link/stats/queryByLinkId/${t}`,method:"post",data:e})}function V(t){return(0,I.Z)({url:`/link/stats/delete/${t}`,method:"delete"})}function Y(t){return(0,I.Z)({url:"/link/stats/export",method:"post",responseType:"blob",data:t})}function H(t){return(0,I.Z)({url:`/matsim/link/${t}`,method:"get"})}function X(t){return(0,I.Z)({url:"/matsim/link/update",method:"post",data:t})}function K(t){return(0,I.Z)({url:"/matsim/link/updateInWay",method:"post",data:t})}function Q(){return(0,I.Z)({url:"/matsim/link/getAllHighwayType",method:"get"})}function q(t){return(0,I.Z)({url:`/matsim/link/getReverseLink/${t}`,method:"get"})}function Z(t){return(0,I.Z)({url:"/osm/way/getWayByName",method:"get",params:t})}function j(t){return(0,I.Z)({url:"/matsim/link/getLinkId",method:"get",params:t})}function J(t){return(0,I.Z)({url:"/link/stats/queryAvgStats",method:"post",data:t})}function $(t){return(0,I.Z)({url:"/crossroads/insert",method:"post",data:t})}function tt(t){return(0,I.Z)({url:"/crossroads/saveline",method:"post",data:t})}function et(t){return(0,I.Z)({url:"/crossroads/list",method:"post",data:t})}function it(t){return(0,I.Z)({url:`/crossroads/delete/${t}`,method:"delete"})}function st(t){return(0,I.Z)({url:`/crossroads/corssStatsTable/${t}`,method:"get"})}function at(t){return(0,I.Z)({url:`/crossroads/deleteStats/${t}`,method:"delete"})}function rt(t){return(0,I.Z)({url:"/crossroads/updateStats",method:"post",data:t})}function nt(t){return(0,I.Z)({url:"/crossroads/insertStats",method:"post",data:t})}function ot(t){return(0,I.Z)({url:`/crossroads/runVehicleCounts/${t}`,method:"get"})}function lt(t){return window.open(`/crossroads/analyzeVideo/${t}`,"_blank")}function ht(t){return window.open(`/crossroads/trackImage/${t}`,"_blank")}function dt(t){return window.open(`/crossroads/exportCorssStatsTable/${t}`,"_blank")}function ct(t){return(0,I.Z)({url:`/crossroads/detail/${t}`,method:"get"})}function ut(t){return(0,I.Z)({url:"/intersection/list",method:"post",data:t})}function pt(t){return(0,I.Z)({url:`/intersection/detail/${t}`,method:"get"})}function gt(t){return(0,I.Z)({url:"/intersection/insert",method:"post",data:t})}function mt(t){return(0,I.Z)({url:"/intersection/update",method:"post",data:t})}function ft(t){return(0,I.Z)({url:"/crossroads/update",method:"post",data:t})}function yt(t){return(0,I.Z)({url:"/mappicture/allMaker",method:"post",data:t})}function vt(t){return(0,I.Z)({url:`/mappicture/delete/${t}`,method:"delete"})}function bt(t){return(0,I.Z)({url:"/mappicture/treeList",method:"post",data:t})}function _t(t){return(0,I.Z)({url:"/mappicture/deleteByPath",method:"post",data:t})}var wt=i(1400),Ct={components:{},props:{visible:{type:Boolean},linkId:{type:[String,Number]}},watch:{linkId:{handler(t){t!=this._linkId&&(this._linkId=t,this.infoEdit=!1,this.visible&&(this.getAllLinkType(),this.getDetail(),this.handleQuery(),this.initEcharts()))},immediate:!0,deep:!0}},data(){return{info:{},infoEdit:!1,infoForm:{},infoRules:{},loading:!0,exportLoading:!1,ids:[],single:!0,multiple:!0,total:0,dataList:[],queryParams:{pageNum:1,pageSize:10,type:null,beginTime:null,endTime:null},open:!1,title:"",form:{},rules:{timeList:[{required:!0,message:"时间不能为空",trigger:"blur"}],type:[{required:!0,message:"调查方式不能为空",trigger:"blur"}]},typeOptions:{0:"其他",1:"人工",2:"视频识别",3:"互联网路况估算"},linkTypeOption:[]}},methods:{handleCloseEditInfo(){this.infoEdit=!1,this.updateEcharts()},handleReverse(){q(this.linkId).then((t=>{console.log(t),t.data?this.$emit("changeLink",t.data):this.$message.warning("切换失败，没有找到反向道路")}))},initEcharts(){this.$nextTick((()=>{this._echart=wt.S1(this.$refs.echart),this.updateEcharts()}))},updateEcharts(){J({ids:this.ids,linkId:this.linkId,type:this.queryParams.type?this.queryParams.type.join(","):null}).then((t=>{this._echart.resize(),this._echart.setOption(this.getEchartsOption(t.data))}))},getEchartsOption(t){let e=new Array(24).fill().map(((e,i)=>t.find((t=>t.hour==i))||{hour:i,pcu_h:0,scar:0,struck:0,mcar:0,mtruck:0,lcar:0,ltruck:0}));return console.log(e),{tooltip:{trigger:"axis"},legend:{data:["pcu/h","小型客车","小型货车","中型客车","中型货车","大型客车","大型货车"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:e.map((t=>t.hour.toString()))},yAxis:[{type:"value",position:"left",alignTicks:!0},{type:"value",position:"right",alignTicks:!0}],series:[{name:"pcu/h",type:"bar",yAxisIndex:1,data:e.map((t=>t.pcu_h))},{name:"小型客车",type:"line",smooth:!0,data:e.map((t=>t.scar))},{name:"小型货车",type:"line",smooth:!0,data:e.map((t=>t.struck))},{name:"中型客车",type:"line",smooth:!0,data:e.map((t=>t.mcar))},{name:"中型货车",type:"line",smooth:!0,data:e.map((t=>t.mtruck))},{name:"大型客车",type:"line",smooth:!0,data:e.map((t=>t.lcar))},{name:"大型货车",type:"line",smooth:!0,data:e.map((t=>t.ltruck))}]}},close(){this.$emit("update:visible",!1),this.$emit("close")},getAllLinkType(){Q().then((t=>{let e={};for(const{code:i,name:s}of t.data)e[i]=s;this.linkTypeOption=e}))},handleEditInfo(){this.infoForm={id:this.info.id,origid:this.info.origid,name:this.info.name,lane:this.info.lane,type:this.info.type,freespeed:this.info.freespeed},this.infoEdit=!0,this.updateEcharts()},handleUpdateLink(){this.$refs["infoForm"].validate((t=>{if(t){let t=JSON.parse(JSON.stringify(this.infoForm));X(t).then((t=>{this.$message.success("修改成功"),this.infoEdit=!1,this.getDetail()}))}}))},handleUpdateInWay(){this.$refs["infoForm"].validate((t=>{if(t){let t=JSON.parse(JSON.stringify(this.infoForm));K(t).then((t=>{this.$message.success("修改成功"),this.infoEdit=!1,this.getDetail()}))}}))},getDetail(){H(this.linkId).then((t=>{t.data.freespeed=Number(t.data.freespeed).toFixed(2),this.info=t.data}))},handleQuery(){this.queryParams.pageNum=1,this.getList(),this.updateEcharts()},resetQuery(){this.handleQuery()},getList(){if(!this.linkId)return;this.loading=!0;const t={pageNum:this.queryParams.pageNum,pageSize:this.queryParams.pageSize,beginTime:this.queryParams.beginTime,endTime:this.queryParams.endTime,type:this.queryParams.type?this.queryParams.type.join(","):null};W(this.linkId,t).then((t=>{this.dataList=t.data.data,this.total=t.data.total,this.loading=!1}))},handleSelectionChange(t){this.ids=t.map((t=>t.id)),this.single=1!=t.length,this.multiple=!t.length,this.updateEcharts()},handleAdd(){this.reset(),this.open=!0,this.title="添加道路信息"},cancel(){this.open=!1,this.reset()},reset(){this.form={linkId:this.linkId,timeList:[],beginTime:null,endTime:null,type:"0",pcuH:0,remark:null,isTwoWay:!1,video:"",scar:"",struck:"",mcar:"",mtruck:"",lcar:"",ltruck:""}},handleUpdate(t){this.reset();const e=t.id;O(e).then((t=>{t.data.timeList=[t.data.beginTime,t.data.endTime],this.form=t.data,this.open=!0,this.title="修改道路信息"}))},submitForm:function(){this.$refs["form"].validate((t=>{if(t){let t=JSON.parse(JSON.stringify(this.form));t.beginTime=t.timeList[0],t.endTime=t.timeList[1],void 0!=t.id?G(t).then((t=>{this.$message.success("修改成功"),this.open=!1,this.getList(),this.$emit("updateData")})):B(t).then((t=>{this.$message.success("新增成功"),this.open=!1,this.getList(),this.$emit("updateData")}))}}))},handleDelete(t){const e=t.id;this.$confirm('是否确认编号为"'+e+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return V(e)})).then((()=>{this.getList(),this.$message.success("删除成功"),this.$emit("updateData")})).catch((()=>{}))}}},At=Ct,St=i(1001),xt=(0,St.Z)(At,F,P,!1,null,"39286bd8",null),kt=xt.exports,Lt=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{top:50,left:100,width:"calc(100vw - 200px)",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("div",{staticClass:"FrameLinkDialog"},[e("el-form",{ref:"queryForm",attrs:{model:t.queryParams,inline:!0,"label-width":"68px",size:"small"}},[e("el-form-item",{attrs:{label:"时间",prop:"timeList"}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("el-form-item",{attrs:{label:"调查方式",prop:"type"}},[e("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.queryParams.type,callback:function(e){t.$set(t.queryParams,"type",e)},expression:"queryParams.type"}},t._l(t.typeOptions,(function(t,i){return e("el-option",{key:String(i),attrs:{label:t,value:String(i)}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleQuery}},[t._v("搜索")]),e("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:t.resetQuery}},[t._v("重置")])],1)],1),e("el-row",{staticClass:"mb8",attrs:{gutter:10}},[e("el-col",{attrs:{span:1.5}},[e("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-download",loading:t.exportLoading,disabled:t.multiple,size:"small"},on:{click:t.handleExport}},[t._v("导出")])],1),e("el-col",{attrs:{span:1.5}},[e("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-download",loading:t.exportAllLoading,size:"small"},on:{click:t.handleExportAll}},[t._v("导出全部")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"small",attrs:{data:t.dataList,height:"calc(100vh - 300px)"},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e("el-table-column",{attrs:{label:"记录编号",align:"center",prop:"id"}}),e("el-table-column",{attrs:{label:"路段编号",align:"center",prop:"linkId"}}),e("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"beginTime"}}),e("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"endTime"}}),e("el-table-column",{attrs:{label:"调查方式",align:"center",prop:"type"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return e("span",{},[t._v(t._s(t.typeOptions[i.type]))])}}])}),e("el-table-column",{attrs:{label:"pcu/h",align:"center",prop:"pcuH"}}),e("el-table-column",{attrs:{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}})],1),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticStyle:{"line-height":"1","padding-top":"20px"},attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.getList}})],1)])},Mt=[],Et=(i(8858),i(1318),i(3228),{props:{visible:{type:Boolean},xyarr:{type:Array,default:()=>[]},timeList:{type:Array,default:()=>[]},type:{type:[Number,String],default:""}},watch:{visible:{handler(t){t&&(this.dateRange=this.timeList||[],this.queryParams.type=this.type,this.handleQuery())},immediate:!0,deep:!0}},data(){return{loading:!0,exportLoading:!1,exportAllLoading:!1,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,dataList:[],title:"",open:!1,statusOptions:[],dateRange:[],queryParams:{pageNum:1,pageSize:10,type:null,beginTime:null,endTime:null},form:{},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictType:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]},typeOptions:{0:"其他",1:"人工",2:"视频识别",3:"互联网路况估算"}}},created(){},methods:{handleClose(){this.$emit("update:visible",!1),this.$emit("close")},getList(){if(!this.xyarr)return;this.loading=!0;let t=JSON.parse(JSON.stringify(this.queryParams));t.xyarr=this.xyarr,this.dateRange&&this.dateRange[0]&&this.dateRange[1]&&(t.beginTime=this.dateRange[0],t.endTime=this.dateRange[1]),U(t).then((t=>{this.dataList=t.data.data,this.total=t.data.total,this.loading=!1}))},handleQuery(){this.dataList=[],this.total=0,this.queryParams.pageNum=1,this.getList()},resetQuery(){this.dateRange=[],this.queryParams={pageNum:1,pageSize:10,type:null,beginTime:null,endTime:null},this.dataList=[],this.total=0,this.getList()},handleSelectionChange(t){this.ids=t.map((t=>t.id)),this.single=1!=t.length,this.multiple=!t.length},handleDelete(t){const e=t.id||this.ids;this.$confirm('是否确认删除字典编号为"'+e+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return delType(e)})).then((()=>{this.getList(),this.msgSuccess("删除成功")})).catch((()=>{}))},handleExport(){const t=this.ids;this.$confirm("是否确认导出数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.exportLoading=!0,Y({ids:t})))).then((t=>{const e=window.URL.createObjectURL(t.data),i=`${(new Date).getTime()}.xls`,s=document.createElement("a");s.href=e,s.download=i,s.click(),window.URL.revokeObjectURL(e),this.exportLoading=!1})).catch((t=>{this.exportLoading=!1}))},handleExportAll(){this.$confirm("是否确认导出所有数据项?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>(this.exportAllLoading=!0,Y({xyarr:this.xyarr})))).then((t=>{const e=window.URL.createObjectURL(t.data),i=`${(new Date).getTime()}.xls`,s=document.createElement("a");s.href=e,s.download=i,s.click(),window.URL.revokeObjectURL(e),this.exportAllLoading=!1})).catch((t=>{this.exportAllLoading=!1}))}}}),Tt=Et,Dt=(0,St.Z)(Tt,Lt,Mt,!1,null,"5dd923cc",null),Ft=Dt.exports,Pt=function(){var t=this,e=t._self._c;return e("el-select",{attrs:{value:t.s_value,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.remoteMethod,loading:t.loading,size:t.size},on:{input:t.handleInput}},t._l(t.options,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)},It=[],Nt={props:["value","label","size"],watch:{value:{handler(t){t!==this.s_value&&(this.s_value=t)}}},data(){return{options:[],s_value:null,loading:!1}},mounted(){},methods:{handleInput(t){let e=this.options.find((e=>e.id==t));this.s_value=e.id,this.$emit("input",e.id),this.$emit("update:label",e.name),this.$emit("change",{value:e.id,item:e})},remoteMethod(t){""!==t?(this.loading=!0,Z({name:t}).then((t=>{this.loading=!1,this.options=t.data}))):this.options=[]}}},Rt=Nt,Ot=(0,St.Z)(Rt,Pt,It,!1,null,null,null),Bt=Ot.exports,Gt=function(){var t=this,e=t._self._c;return e("el-select",{attrs:{value:t.s_value,filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键词","remote-method":t.remoteMethod,loading:t.loading,size:t.size},on:{input:t.handleInput}},t._l(t.options,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)},Ut=[],zt={props:["value","label","size"],watch:{value:{handler(t){t!==this.s_value&&(this.s_value=t)}}},data(){return{options:[],s_value:null,loading:!1}},mounted(){},methods:{handleInput(t){let e=this.options.find((e=>e.id==t));this.s_value=e.id,this.$emit("input",e.id),this.$emit("update:label",e.name),this.$emit("change",{value:e.id,item:e})},remoteMethod(t){""!==t?(this.loading=!0,j({id:t}).then((t=>{this.loading=!1,this.options=t.data}))):this.options=[]}}},Wt=zt,Vt=(0,St.Z)(Wt,Gt,Ut,!1,null,null,null),Yt=Vt.exports,Ht=function(){var t=this,e=t._self._c;return e("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"经纬度"},on:{change:t.handleInput},model:{value:t.center,callback:function(e){t.center=e},expression:"center"}},[e("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:"请选择"},on:{change:t.handleChangeCenter},slot:"prepend",model:{value:t.centerType,callback:function(e){t.centerType=e},expression:"centerType"}},[e("el-option",{attrs:{label:"经纬度",value:1}}),e("el-option",{attrs:{label:"墨卡托",value:2}})],1)],1)},Xt=[],Kt={props:{value:{type:Array,default:()=>[]}},data(){return{center:"",centerType:1}},computed:{s_value(){let t=this.center.split(",").map((t=>Number(t)));return 1==this.centerType?(0,n.ob)(...t):2==this.centerType?t:void 0}},watch:{value:{handler(){this.handleChangeCenter()},immediate:!0,deep:!0}},methods:{handleInput(){this.$emit("input",this.s_value),this.$emit("change",this.s_value)},handleChangeCenter(){let t=this.value;1==this.centerType?(t=(0,n.Nq)(...this.value),t=t.map((t=>Math.ceil(1e5*t)/1e5))):2==this.centerType&&(t=t.map((t=>Math.ceil(100*t)/100))),this.center=t.join(",")}}},Qt=Kt,qt=(0,St.Z)(Qt,Ht,Xt,!1,null,null,null),Zt=qt.exports,jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"HelpDialog"},[e("div",{staticClass:"_flex"},[e("div",{staticClass:"el-icon-question",on:{click:function(e){t.open=!0}}}),e("a",{staticClass:"bug",attrs:{href:"https://doc.weixin.qq.com/sheet/e3_AdQA8Aa_ADMt1qh97LkSHer6ALqI2?scode=APwA6gfEAA0aeGdABPAdQA8Aa_ADM&tab=BB08J2",target:"_blank"}},[t._v("BUG")]),e("a",{staticClass:"count",attrs:{href:"./keyPressed.html",target:"_blank"}},[t._v("C")]),e("a",{staticClass:"count",attrs:{href:"/#/demo/page1",target:"_blank"}},[t._v("demo")])]),e("el-dialog",{attrs:{visible:t.open,width:"500px","append-to-body":"",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.open=e},close:t.handleClose}},[e("div",{staticClass:"body"},t._l(t.pageNum,(function(i){return e(`page${i}`,{directives:[{name:"show",rawName:"v-show",value:t.carouselIndex==i,expression:"carouselIndex == item"}],key:i,tag:"component"})})),1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini"},on:{click:t.handleClose}},[t._v("关闭")]),1!=t.carouselIndex?e("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){t.carouselIndex--}}},[t._v("上一步")]):t._e(),t.carouselIndex<t.pageNum?e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.carouselIndex++}}},[t._v("下一步")]):t._e()],1)])],1)},Jt=[],$t=function(){var t=this;t._self._c;return t._m(0)},te=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page1"},[e("h2",[t._v("1.按住鼠标右键移动地图")]),e("img",{staticClass:"video",attrs:{src:i(2630)}})])}],ee={},ie=ee,se=(0,St.Z)(ie,$t,te,!1,null,"89829d00",null),ae=se.exports,re=function(){var t=this;t._self._c;return t._m(0)},ne=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page2"},[e("h2",[t._v("2. 滑动滚轮缩放/扩大地图")]),e("img",{staticClass:"video",attrs:{src:i(5311)}})])}],oe={},le=oe,he=(0,St.Z)(le,re,ne,!1,null,"6500d309",null),de=he.exports,ce=function(){var t=this;t._self._c;return t._m(0)},ue=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page3"},[e("h2",[t._v("3. 点击框选按钮，按住鼠标左键选择范围并导出至本地")]),e("img",{staticClass:"video",attrs:{src:i(3140)}}),e("h4",[e("img",{staticClass:"icon",attrs:{src:i(5061),alt:""}}),t._v("通过人工计数记录的流量 ")]),e("h4",[e("img",{staticClass:"icon",attrs:{src:i(9595),alt:""}}),t._v("通过视频识别转换的流量 ")]),e("h4",[e("img",{staticClass:"icon",attrs:{src:i(7674),alt:""}}),t._v("通过其他方式获取的流量 ")])])}],pe={},ge=(0,St.Z)(pe,ce,ue,!1,null,"3619bb93",null),me=ge.exports,fe=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page4"},[e("h2",[t._v("4. 缩放至"+t._s(t.SHOW_LINK_ZOOM)+"级地图显示可录入路段")]),e("img",{staticClass:"video",attrs:{src:i(2165)}})])},ye=[],ve={data(){return{SHOW_LINK_ZOOM:Ui}}},be=ve,_e=(0,St.Z)(be,fe,ye,!1,null,"4fb215b4",null),we=_e.exports,Ce=function(){var t=this;t._self._c;return t._m(0)},Ae=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"page5"},[e("h2",[t._v("5. 点击路段，调整路段宽度，单双向道路偏移后选取详细路段输入流量")]),e("img",{staticClass:"video",attrs:{src:i(7274)}})])}],Se={},xe=Se,ke=(0,St.Z)(xe,Ce,Ae,!1,null,"9d688ca8",null),Le=ke.exports,Me={components:{page1:ae,page2:de,page3:me,page4:we,page5:Le},data(){return{open:!localStorage.getItem("HelpDialogClose"),carouselIndex:1,pageNum:5}},watch:{open(t){t&&(this.carouselIndex=1)}},methods:{handleClose(){this.open=!1,localStorage.setItem("HelpDialogClose",!0)},handleNext(){this.$refs.carousel.next()},handlePrev(){this.$refs.carousel.prev()}}},Ee=Me,Te=(0,St.Z)(Ee,jt,Jt,!1,null,"33b75f7b",null),De=Te.exports,Fe=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"VideoInputCrossroads",attrs:{title:"视频录入交叉口",top:50,left:100,width:"600px",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:"调查时间",prop:"date"}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),e("el-form-item",{attrs:{label:"调查视频",prop:"video"}},[e("UploadVideo",{model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}})],1),e("el-form-item",{attrs:{label:"视频角度",prop:"videoType"}},[e("el-radio-group",{model:{value:t.form.videoType,callback:function(e){t.$set(t.form,"videoType",e)},expression:"form.videoType"}},t._l(t.videoType,(function(i){return e("el-radio",{key:i.value,attrs:{label:i.value,disabled:i.disabled}},[t._v(" "+t._s(i.label))])})),1)],1),e("el-form-item",{attrs:{label:"附件",prop:"annex"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"/file/upload",multiple:"","file-list":t.form.annex,"on-success":t.handleUploadAnnex}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),e("el-form-item",{attrs:{label:"备注",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("el-form-item",[e("el-button",{on:{click:t.handleClose}},[t._v("取消")]),e("el-button",{attrs:{loading:t.saving,type:"primary"},on:{click:t.handleSubmit}},[t._v("下一步")])],1)],1)],1)},Pe=[],Ie={name:"VideoInputCrossroads",inject:["rootVue"],props:{visible:{type:Boolean},params:{type:Object}},components:{},computed:{},watch:{visible:{handler(t){t?this.handleEnable():this.handleDisable()},immediate:!0,deep:!0}},data(){return{upload:{loading:!1,progress:0,file:null},saving:!1,form:{date:[],video:"",remark:"",videoType:1,annex:[]},rules:{date:[{required:!0,message:"调查时间不能为空",trigger:"blur"}],video:[{required:!0,message:"调查视频不能为空",trigger:"blur"}]},videoType:[{label:"俯视航拍",value:1},{label:"侧面路拍",value:2,disabled:!0},{label:"正斜角拍摄",value:3,disabled:!0}]}},created(){},mounted(){},beforeDestroy(){this.handleDisable()},methods:{handleChangeSelectState(t){this._PointSelectLayer&&(this.rootVue._PointSelectLayer.state=t)},handleEnable(){pt(this.params.intersectionId).then((t=>{this.intersectionDetail=t.data,this.form={date:[],video:"",remark:"",videoType:1,annex:[]}}))},handleDisable(){},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleUploadAnnex(t,e,i){this.form.annex=i},handleSubmit(){this.$refs["form"].validate((t=>{if(t){const t={intersectionId:this.intersectionDetail.id,beginTime:this.form.date[0],endTime:this.form.date[1],type:"2",video:this.form.video,videoType:this.form.videoType,annex:this.form.annex.map((t=>({name:t.name,url:t.response.data}))),mapInfo:JSON.stringify({center:[this.intersectionDetail.x,this.intersectionDetail.y],zoom:19,rotation:0}),remark:this.form.remark};this.saving=!0,$(t).then((t=>{this.$emit("submited",t.data),this.saving=!1})).catch((t=>{this.saving=!1}))}}))}}},Ne=Ie,Re=(0,St.Z)(Ne,Fe,Pe,!1,null,"40dce00c",null),Oe=Re.exports,Be=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"ManuallyEnteringCrossroads",attrs:{title:"人工录入交叉口",top:50,left:100,width:"600px",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:"调查时间",prop:"date"}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),e("el-form-item",{attrs:{label:"附件",prop:"annex"}},[e("el-upload",{staticClass:"upload-demo",attrs:{action:"/file/upload",multiple:"","file-list":t.form.annex,"on-success":t.handleUploadAnnex}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1),e("el-form-item",{attrs:{label:"备注",prop:"remark"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),e("el-form-item",[e("el-button",{on:{click:t.handleClose}},[t._v("取消")]),e("el-button",{attrs:{loading:t.saving,type:"primary"},on:{click:t.handleSubmit}},[t._v("下一步")])],1)],1)],1)},Ge=[],Ue={name:"ManuallyEnteringCrossroads",inject:["rootVue"],props:{visible:{type:Boolean},params:{type:Object}},components:{},computed:{},watch:{visible:{handler(t){t?this.handleEnable():this.handleDisable()},immediate:!0,deep:!0}},data(){return{upload:{loading:!1,progress:0,file:null},saving:!1,form:{date:[],video:"",center:[0,0],remark:"",videoType:1,annex:[]},rules:{date:[{required:!0,message:"调查时间不能为空",trigger:"blur"}],video:[{required:!0,message:"调查视频不能为空",trigger:"blur"}]}}},created(){},mounted(){},methods:{handleEnable(){pt(this.params.intersectionId).then((t=>{this.intersectionDetail=t.data,this.form={date:[],video:"",center:[0,0],remark:"",videoType:1,annex:[]}}))},handleDisable(){},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleUploadAnnex(t,e,i){this.form.annex=i},handleSubmit(){this.$refs["form"].validate((t=>{if(t){const t={intersectionId:this.intersectionDetail.id,beginTime:this.form.date[0],endTime:this.form.date[1],type:"1",video:"",videoType:"",annex:this.form.annex.map((t=>({name:t.name,url:t.response.data}))),mapInfo:JSON.stringify({center:[this.intersectionDetail.x,this.intersectionDetail.y],zoom:19,rotation:0}),remark:this.form.remark};this.saving=!0,$(t).then((t=>{this.$emit("submited",t.data),this.saving=!1})).catch((t=>{this.saving=!1}))}}))}}},ze=Ue,We=(0,St.Z)(ze,Be,Ge,!1,null,"57489a18",null),Ve=We.exports,Ye=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"FrameCrossroads_DrawLine",attrs:{title:"绘制检测线",top:40,left:100,width:"calc(100vw - 200px)",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("div",{staticClass:"FrameCrossroads_DrawLine_body"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24,lg:16,xl:13}},[e("div",{staticClass:"draw_map_box"},[e("div",{staticClass:"img_size",style:{paddingBottom:t.drawHeight/t.drawWidth*100+"%"}}),e("div",{staticClass:"draw_map",attrs:{id:"draw_map"}})])]),e("el-col",{attrs:{span:24,lg:8,xl:11}},[e("div",{staticClass:"draw_toolbar"},[e("div",{staticClass:"row"},[t.isChangeMap?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleEndChangeMap}},[t._v("结束调整")]):e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleStartChangeMap}},[t._v("调整位置")]),e("div",{staticClass:"open_btn el-icon-arrow-down",class:{hide:!t.showChangeMapSetting},on:{click:function(e){t.showChangeMapSetting=!t.showChangeMapSetting}}})],1),t.showChangeMapSetting?[e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("显示地图:")]),e("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.showMapLayer,callback:function(e){t.showMapLayer=e},expression:"showMapLayer"}})],1),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("显示路网:")]),e("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},model:{value:t.showNetworkLayer,callback:function(e){t.showNetworkLayer=e},expression:"showNetworkLayer"}})],1),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("地图透明度:")]),e("el-slider",{staticStyle:{width:"100%",padding:"0 2em 0 0"},attrs:{disabled:!t.showMapLayer,step:.01,min:0,max:1},model:{value:t.mapLayerOpacity,callback:function(e){t.mapLayerOpacity=e},expression:"mapLayerOpacity"}})],1),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("topLeft:")]),e("span",[t._v(t._s(t.mapFrom.topLeft))])]),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("topRight:")]),e("span",[t._v(t._s(t.mapFrom.topRight))])]),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("bottomLeft:")]),e("span",[t._v(t._s(t.mapFrom.bottomLeft))])]),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("bottomRight:")]),e("span",[t._v(t._s(t.mapFrom.bottomRight))])])]:t._e(),e("div",{staticClass:"row"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAddDrawLine}},[t._v("添加画线")]),e("div",{staticClass:"open_btn el-icon-arrow-down",class:{hide:!t.showChangeDrawLineSetting},on:{click:function(e){t.showChangeDrawLineSetting=!t.showChangeDrawLineSetting}}})],1),t.showChangeDrawLineSetting?[t.drawLineFrom?[e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("线名：")]),e("el-input",{attrs:{placeholder:"",size:"mini",clearable:""},on:{change:function(t){}},model:{value:t.drawLineFrom.name,callback:function(e){t.$set(t.drawLineFrom,"name",e)},expression:"drawLineFrom.name"}})],1),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("开始点：")]),e("span",[t._v(" "+t._s(t.formatterPoint(t.drawLineFrom.begin)))])]),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("结束点：")]),e("span",[t._v(" "+t._s(t.formatterPoint(t.drawLineFrom.end)))])]),e("div",{staticClass:"row"},[e("span",{staticClass:"label"},[t._v("颜色：")]),e("el-color-picker",{attrs:{predefine:t.predefineColors,size:"mini"},model:{value:t.drawLineFrom.color,callback:function(e){t.$set(t.drawLineFrom,"color",e)},expression:"drawLineFrom.color"}})],1),e("div",{staticClass:"row"},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleConfirmDrawLine}},[t._v("确定")]),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleCancelLine}},[t._v("取消")])],1)]:[e("div",{staticClass:"row"},[e("el-table",{staticClass:"small",attrs:{data:t.drawLineList,border:"",stripe:"",height:"300px"}},[e("el-table-column",{attrs:{prop:"color",label:"颜色",width:"50"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-color-picker",{attrs:{predefine:t.predefineColors,size:"mini"},model:{value:i.color,callback:function(e){t.$set(i,"color",e)},expression:"row.color"}})]}}],null,!1,1854218370)}),e("el-table-column",{attrs:{prop:"name",label:"线名"}}),e("el-table-column",{attrs:{prop:"begin",label:"开始点"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(t._s(t.formatterPoint(e.begin)))]}}],null,!1,3747343221)}),e("el-table-column",{attrs:{prop:"end",label:"结束点"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(t._s(t.formatterPoint(e.end)))]}}],null,!1,909673469)}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function({row:i,$index:s}){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleEditDrawLine(i,s)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.handleRemoveDrawLine(i,s)}}},[t._v("删除")])]}}],null,!1,317898410)})],1)],1)]]:t._e()],2)])],1)],1),e("div",{staticClass:"FrameCrossroads_DrawLine_footer"},[e("el-button",{on:{click:t.handleClose}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",loading:t.saving},on:{click:t.handleSubmit}},[t._v("保存绘制内容")])],1)])},He=[],Xe=i(7991);const Ke=new l.dpR,Qe={DISABLE:0,CHANGE_BEGIN:1,CHANGE_END:2};class qe extends r.mh{constructor(t){if(super(t),(0,o.Z)(this,"isAdd",!1),(0,o.Z)(this,"drawLineIndex",0),(0,o.Z)(this,"drawLineList",[]),(0,o.Z)(this,"lineColor",65280),(0,o.Z)(this,"lineHighlightColor",16711680),(0,o.Z)(this,"image",null),(0,o.Z)(this,"drawImage",null),this.url=t.url,this.width=t.width,this.height=t.height,this.url){const t=new l.vBJ({depthWrite:!1,side:l.ehD,map:Ke.load(this.url)}),e=new l.u9r;e.setAttribute("position",new l.a$l([0,0,0,0,-this.height,0,this.width,-this.height,0,this.width,0,0],3)),e.setAttribute("uv",new l.a$l([0,1,0,0,1,0,1,1],2)),e.setIndex(new l.qlB([0,1,2,0,2,3],1)),e.computeBoundingBox(),e.computeVertexNormals(),this.imageMesh=new l.Kj0(e,t),this.scene.add(this.imageMesh)}if(t.drawLineList){this.drawLineList=t.drawLineList.map((t=>new Ze(t.name,[t.beginx,t.beginy],[t.endx,t.endy],t.color))),console.log(this.drawLineList);for(const t of this.drawLineList)this.scene.add(t._mesh)}}onAdd(t){this.map&&this.removeFromParent(),this.map=t,this.setPickLayerColor(this.map.getPickLayerColor());const e=.05,i=this.map.camera.fov,s=this.height/2/Math.tan(i*Math.PI/360);this.map.camera.add(this.scene),this.scene.position.set(-this.width/2*e,this.height/2*e,-s*e),this.scene.scale.set(e,e,1)}on(t,e){const i=this.drawLineList[this.drawLineIndex];if(t==r.kT.HANDLE_CLICK_LEFT&&i){const[t,s]=e.windowSize,[a,r]=e.webMercatorXY,[n,o]=e.windowXY,l=n*this.width/t,h=o*this.height/s;i.state==Qe.CHANGE_BEGIN?(i.state=Qe.CHANGE_END,i.begin=[l,h],i.end=[l,h],i.updateGeometry()):i.state==Qe.CHANGE_END&&(i.state=Qe.CHANGE_BEGIN,i.end=[l,h],i.updateGeometry())}if(t==r.kT.HANDLE_MOUSE_MOVE&&i){const[t,s]=e.windowSize,[a,r]=e.webMercatorXY,[n,o]=e.windowXY,l=n*this.width/t,h=o*this.height/s;console.log(i.state),i.state==Qe.CHANGE_END&&(i.end=[l,h],i.updateGeometry())}}addLine(){const t=new Ze;return t.state=Qe.CHANGE_BEGIN,this.scene.add(t._mesh),this.drawLineIndex=this.drawLineList.length,this.drawLineList.push(t),this.isAdd=!0,t}editLine(t){const e=this.drawLineList[t];if(e)return this.drawLineIndex=t,this._editLineJson=e.toJSON(),this.isAdd=!1,e.state=Qe.CHANGE_BEGIN,e}confirmLine(){const t=this.drawLineList[this.drawLineIndex];t&&(t.state=Qe.DISABLE,this.drawLineIndex=-1)}cancelLine(){this.isAdd?(this.removeLine(this.drawLineIndex),this.drawLineIndex=-1):(this.drawLineList[this.drawLineIndex].setFromJSON(this._editLineJson),this.confirmLine())}removeLine(t){const e=this.drawLineList[t];return this.drawLineList.splice(t,1),e&&this.scene.remove(e._mesh),e}setHighlight(t){for(let e=0;e<this.drawLineList.length;e++)t==e?this.drawLineList[e].material.setValue({color:this.lineHighlightColor}):this.drawLineList[e].material.setValue({color:this.lineColor})}dispose(){super.dispose(),this.imageMesh&&(this.imageMesh.material.map.dispose(),this.imageMesh.geometry.dispose()),this.drawLineList.map((t=>{t.dispose()}))}}class Ze{set begin(t){this.state!=Qe.DISABLE&&(this._begin=t.map((t=>parseInt(t))),this.updateGeometry())}get begin(){return this._begin}set end(t){this.state!=Qe.DISABLE&&(this._end=t.map((t=>parseInt(t))),this.updateGeometry())}get end(){return this._end}set color(t){this._color=t,this._material.setValues({color:this.color}),this._material.needsUpdate=!0}get color(){return this._color}constructor(t="",e=[0,0],i=[0,0],s="#ff4500"){(0,o.Z)(this,"state",Qe.CHANGE_BEGIN),(0,o.Z)(this,"_begin",[0,0]),(0,o.Z)(this,"_end",[0,0]),(0,o.Z)(this,"_color","#ff4500"),this._geometry=new l.u9r,this._material=new l.nls({depthFunc:l.Se2}),this._mesh=new l.x12(this._geometry,this._material),this._mesh.renderOrder=999,this.uuid=(0,Xe.M8)(),this.name=t||this.uuid.substring(0,8),this.color=s,this.begin=e,this.end=i,this.state=Qe.DISABLE}updateGeometry(){this._geometry.setAttribute("position",new l.a$l([this.begin[0],-this.begin[1],.1,this.end[0],-this.end[1],.1],3)),this._geometry.computeBoundingSphere(),this._geometry.needsUpdate=!0}setFromJSON(t){this.uuid=t.uuid,this.name=t.name,this.begin=t.begin,this.end=t.end,this.color=t.color}dispose(){this._geometry.dispose()}toJSON(){return{uuid:this.uuid,name:this.name,begin:[...this.begin],end:[...this.end],color:this.color}}}var je={name:"FrameCrossroads_DrawLine",inject:["rootVue"],props:{visible:{type:Boolean},params:{type:Object,default:()=>({})}},components:{},computed:{},watch:{visible:{handler(t){t?this.handleEnable():this.handleDisable()},immediate:!0,deep:!0},showMapLayer:{handler(t){this._Map&&(t?this._Map.addLayer(this._MapLayer):this._Map.removeLayer(this._MapLayer))}},showNetworkLayer:{handler(t){this._Map&&(t?this._Map.addLayer(this._NetworkLayer):this._Map.removeLayer(this._NetworkLayer))}},mapLayerOpacity:{handler(t){this._MapLayer&&this._MapLayer.setOpacity(t)}}},data(){return{loading:!1,saving:!1,inited:!1,predefineColors:["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"],drawUrl:"",drawWidth:1600,drawHeight:900,drawLineFrom:null,drawLineList:[],isChangeMap:!1,showMapLayer:!1,mapLayerOpacity:.5,mapFrom:{topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]},showNetworkLayer:!1,showChangeMapSetting:!0,showChangeDrawLineSetting:!0}},created(){},mounted(){this.initMap(),this.handleLoadNetwork(),this.rootVue.$on("loadNetwork",this.handleLoadNetwork)},beforeDestroy(){this.handleDisable(),this._Map&&this._Map.dispose(),this.rootVue.$off("loadNetwork",this.handleLoadNetwork)},methods:{handleLoadNetwork(){this.rootVue._NetworkData&&this._NetworkLayer&&this._NetworkLayer.setData(this.rootVue._NetworkData)},async handleEnable(){if(!this.inited)return await new Promise((t=>setTimeout(t,500))),void(this.visible&&this.handleEnable());const t=this.params.id;if(t){ct(t).then((t=>{console.log(t)})),this.loading=!0;const e=await ct(t);this.detail=e.data.crossroads;const i=(0,Xe.HW)(e.data.crossroads.mapInfo,{center:[12614426,2646623],zoom:19,rotation:0});if(1==e.data.crossroads.type)this.drawUrl="",this.drawName="",this.drawWidth=1600,this.drawHeight=900,this.mapFrom={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0],width:1600,height:900},this.drawLineFrom=null,this.showMapLayer=!0,this.showNetworkLayer=!0,this.mapLayerOpacity=1;else if(2==e.data.crossroads.type){const t=e.data.frame;this.drawUrl=t.url,this.drawName=t.name,this.drawWidth=t.width,this.drawHeight=t.height,this.mapFrom={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0],width:t.width,height:t.height},this.drawLineFrom=null,this.showMapLayer=!1,this.showNetworkLayer=!1,this.mapLayerOpacity=.5}this._Map.setCenter(i.center),this._Map.setZoom(i.zoom),this._Map.setPitchAndRotation(void 0,i.rotation);const s=(0,Xe.HW)(e.data.crossroads.lines,[]);s.forEach((t=>{t.name=t.lineName||""})),this._DrawLineLayer=new qe({zIndex:0,url:this.drawUrl,width:this.drawWidth,height:this.drawHeight,drawLineList:s}),this.drawLineList=this._DrawLineLayer.drawLineList,this._Map.addLayer(this._DrawLineLayer),this.loading=!1}},handleDisable(){this.drawUrl="",this.drawName="",this.drawWidth=1600,this.drawHeight=900,this.mapFrom={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0],width:1600,height:900},this.drawLineFrom=null,this.showMapLayer=!0,this.showNetworkLayer=!0,this.mapLayerOpacity=1,this._DrawLineLayer&&(this._DrawLineLayer.dispose(),this._DrawLineLayer=null)},initMap(){this._Map=new r.s1({rootId:"draw_map",minPitch:90,enableRotate:!1,enableZoom:!1,enablePan:!1,event:{[r.kT.UPDATE_CENTER]:this.handleChangeMapFrom,[r.kT.UPDATE_CAMERA_HEIGHT]:this.handleChangeMapFrom,[r.kT.UPDATE_CAMERA_ROTATE]:this.handleChangeMapFrom}}),this._MapLayer=new r.t5({tileClass:r.LA[0],zIndex:20,opacity:this.mapLayerOpacity}),this.showMapLayer&&this._Map.addLayer(this._MapLayer),this._NetworkLayer=new y({zIndex:100,lineWidth:5,color:"#409EFF"}),this.showNetworkLayer&&this._Map.addLayer(this._NetworkLayer),this.inited=!0},handleChangeMapFrom(t){this._handleChangeMapFromTime||(this._handleChangeMapFromTime=setTimeout((()=>{if(this._Map){const t=this._Map.getWindowRangeAndWebMercator();this.mapFrom.topLeft=this.MercatorToWGS84(t.topLeft),this.mapFrom.topRight=this.MercatorToWGS84(t.topRight),this.mapFrom.bottomLeft=this.MercatorToWGS84(t.bottomLeft),this.mapFrom.bottomRight=this.MercatorToWGS84(t.bottomRight),this.mapFrom.width=t.width,this.mapFrom.height=t.height}this._handleChangeMapFromTime=null}),200))},MercatorToWGS84(t){const[e,i]=(0,n.Nq)(t[0]||0,t[1]||0);return[Number(Number(e).toFixed(8)),Number(Number(i).toFixed(8))]},handleStartChangeMap(){this.isChangeMap=!0,this._Map.enableRotate=!0,this._Map.enableZoom=!0,this._Map.enablePan=!0,this._showMapLayer=this.showMapLayer,this.showMapLayer=!0,this._showNetworkLayer=this.showNetworkLayer,this.showNetworkLayer=!0},handleEndChangeMap(){this.isChangeMap=!1,this._Map.enableRotate=!1,this._Map.enableZoom=!1,this._Map.enablePan=!1,this.showMapLayer=this._showMapLayer,this.showNetworkLayer=this._showNetworkLayer},handleAddDrawLine(){this.handleConfirmDrawLine(),this._DrawLineLayer&&(this.drawLineFrom=this._DrawLineLayer.addLine())},handleEditDrawLine(t,e){this.handleConfirmDrawLine(),this.drawLineFrom=this._DrawLineLayer.editLine(e)},handleConfirmDrawLine(){this.drawLineFrom=null,this._DrawLineLayer&&this._DrawLineLayer.confirmLine()},handleCancelLine(){this.drawLineFrom=null,this._DrawLineLayer&&this._DrawLineLayer.cancelLine()},handleRemoveDrawLine(t,e){this._DrawLineLayer&&this._DrawLineLayer.removeLine(e)},formatterPoint(t){try{return[Number(Number(t[0]).toFixed(6)),Number(Number(t[1]).toFixed(6))]}catch(e){return e.message}},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleSubmit(){const t=this._Map.rootDoc.clientWidth/this.drawWidth,e={cossroadsId:this.params.id,mapInfo:JSON.stringify({center:this._Map.center,zoom:this._Map.zoom,rotation:this._Map.rotation,width:this.mapFrom.width,height:this.mapFrom.height}),vertex:[(0,n.ob)(...this.mapFrom.topLeft),(0,n.ob)(...this.mapFrom.topRight),(0,n.ob)(...this.mapFrom.bottomRight),(0,n.ob)(...this.mapFrom.bottomLeft),(0,n.ob)(...this.mapFrom.topLeft)],lines:this.drawLineList.map((e=>{const i=this._Map.WindowXYToWebMercator(e.begin[0]*t,e.begin[1]*t),s=this._Map.WindowXYToWebMercator(e.end[0]*t,e.end[1]*t),a={lineName:e.name,imageName:this.drawName,beginx:parseInt(e.begin[0]),beginy:parseInt(e.begin[1]),endx:parseInt(e.end[0]),endy:parseInt(e.end[1]),width:parseInt(this.drawWidth),height:parseInt(this.drawHeight),mktBeginx:i[0],mktBeginy:i[1],mktEndx:s[0],mktEndy:s[1]};return a}))};console.log(e),this.saving=!0,tt(e).then((t=>{this.$emit("submited",t),this.saving=!1})).catch((t=>{this.saving=!1}))}}},Je=je,$e=(0,St.Z)(Je,Ye,He,!1,null,null,null),ti=$e.exports,ei=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"CrossroadsDetail",attrs:{title:{1:"人工录入交叉口",2:"视频录入交叉口"}[t.detail.type],top:20,left:"center",width:"80vw",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"CrossroadsDetail_body"},[e("h3",{staticStyle:{"margin-top":"0"}},[t._v("交叉口流量表")]),e("el-form",{attrs:{"label-width":"auto",size:"small",inline:""}},[e("el-form-item",{attrs:{label:"调查时间",prop:"date"}},[e("el-date-picker",{attrs:{disabled:!t.changeCrossroadsData,type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.crossroadsData,callback:function(e){t.crossroadsData=e},expression:"crossroadsData"}})],1),e("el-form-item",[t.changeCrossroadsData?t._e():e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeCrossroadsData=!0}}},[t._v("修改调查时间")]),t.changeCrossroadsData?[e("el-button",{attrs:{loading:t.saving,type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")]),e("el-button",{attrs:{loading:t.saving,type:"primary"},on:{click:t.handleQx}},[t._v("取消")])]:t._e()],2)],1),2==t.detail.type?e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleDownload(t.detail.video)}}},[t._v("下载原视频")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.crossroadsExportCorssStatsTable}},[t._v("导出交叉口流量表")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.crossroadsAnalyzeVideo}},[t._v("导出识别视频")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.crossroadsTrackImage}},[t._v("导出轨迹图片")])],1):1==t.detail.type?e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.crossroadsExportCorssStatsTable}},[t._v("导出交叉口流量表")])],1):t._e(),e("el-table",{staticClass:"small",attrs:{data:t.tableList1,border:"",stripe:"","max-height":"300px"}},[e("el-table-column",{attrs:{label:"编号",prop:"id"}}),e("el-table-column",{attrs:{label:"线名",prop:"name"}}),e("el-table-column",{attrs:{label:"初始线",prop:"inLink"}}),e("el-table-column",{attrs:{label:"终点线",prop:"outLink"}}),e("el-table-column",{attrs:{label:"PCU/H",prop:"pcuH"}}),e("el-table-column",{attrs:{label:"小型客车",prop:"car"}}),e("el-table-column",{attrs:{label:"小型货车",prop:"van"}}),e("el-table-column",{attrs:{label:"大型客车",prop:"bus"}}),e("el-table-column",{attrs:{label:"大型货车",prop:"truck"}}),e("el-table-column",{attrs:{label:"合计",prop:"count"}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleEdit(i)}}},[t._v("修改")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("h3",[t._v("附件")]),e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini",loading:t.updoading||t.saving},on:{click:t.addAnnex}},[t._v("上传附件")])],1),e("el-table",{staticClass:"small",staticStyle:{"margin-bottom":"18px"},attrs:{data:t.detail.annex,border:"",stripe:"","max-height":"300px"}},[e("el-table-column",{attrs:{label:"附件名称",prop:"name"}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function({row:i,$index:s}){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleDownload(i.url)}}},[t._v("下载")]),e("el-button",{attrs:{type:"text",size:"mini",loading:t.saving},on:{click:function(e){return t.deleteAnnex(s)}}},[t._v("删除")])]}}])})],1),e("h3",[t._v("交叉口流向图")]),e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleChartToDataUrl}},[t._v("导出")])],1),e("div",{staticClass:"canvas",style:{height:t.drawHeight},attrs:{id:"CrossroadsDetail_canvas"}})],1),e("el-dialog",{attrs:{title:"修改交叉口流量",visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"mini"}},[e("el-form-item",{attrs:{label:"线名",prop:"name"}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t.form.id?t._e():e("el-form-item",{attrs:{label:"初始线",prop:"inLink"}},[e("el-select",{model:{value:t.form.inLink,callback:function(e){t.$set(t.form,"inLink",e)},expression:"form.inLink"}},t._l(t.inLinkList,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:t}})})),1)],1),t.form.id?t._e():e("el-form-item",{attrs:{label:"终点线",prop:"outLink"}},[e("el-select",{model:{value:t.form.outLink,callback:function(e){t.$set(t.form,"outLink",e)},expression:"form.outLink"}},t._l(t.outLinkList,(function(t,i){return e("el-option",{key:i,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"PCU/H",prop:"pcuH"}},[e("el-input-number",{attrs:{step:.01},model:{value:t.form.pcuH,callback:function(e){t.$set(t.form,"pcuH",e)},expression:"form.pcuH"}})],1),e("el-form-item",{attrs:{label:"小型客车",prop:"car"}},[e("el-input-number",{attrs:{step:.01},model:{value:t.form.car,callback:function(e){t.$set(t.form,"car",e)},expression:"form.car"}})],1),e("el-form-item",{attrs:{label:"小型货车",prop:"van"}},[e("el-input-number",{attrs:{step:.01},model:{value:t.form.van,callback:function(e){t.$set(t.form,"van",e)},expression:"form.van"}})],1),e("el-form-item",{attrs:{label:"大型客车",prop:"bus"}},[e("el-input-number",{attrs:{step:.01},model:{value:t.form.bus,callback:function(e){t.$set(t.form,"bus",e)},expression:"form.bus"}})],1),e("el-form-item",{attrs:{label:"大型货车",prop:"truck"}},[e("el-input-number",{attrs:{step:.01},model:{value:t.form.truck,callback:function(e){t.$set(t.form,"truck",e)},expression:"form.truck"}})],1),e("el-form-item",{attrs:{label:"合计",prop:"count"}},[t._v(" "+t._s(t.form.car+t.form.van+t.form.bus+t.form.truck)+" ")])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")])],1)],1)],1)},ii=[],si=i(8684),ai=i.n(si);const ri=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"];var ni={name:"CrossroadsDetail",props:{visible:{type:Boolean},params:{type:Object}},components:{},computed:{},watch:{visible:{handler(t){t&&Promise.all([this.getCrossroadsDetail(),this.getCrossroadsCorssStatsTable()]).then((t=>{this.handleDraw()}))},immediate:!0,deep:!0}},data(){return{loading:!1,tableList1:[],inLinkList:[],outLinkList:[],form:{},changeCrossroadsData:!1,crossroadsData:[],saving:!1,rules:{center:[{required:!0,message:"交叉口位置不能为空",trigger:"blur"}]},open:!1,drawWidth:1200,drawHeight:675,detail:{annex:[]},updoading:!1}},created(){},mounted(){this._stage=new(ai().Stage)({container:"CrossroadsDetail_canvas",draggable:!0}),this._layer=new(ai().Layer)({width:2048,height:2048}),this._stage.add(this._layer),this._group=new(ai().Group)({}),this._layer.add(this._group),this._stage.on("wheel",(t=>{const e=this._group.scale().x+(t.evt.wheelDelta>0?.2:-.2);this._group.scale({x:e,y:e}),t.evt.preventDefault()})),this._resizeObserver=new ResizeObserver((t=>{this._setSizeTimeout||(this._setSizeTimeout=setTimeout((()=>{this.handleChartResize(),this._setSizeTimeout=null}),1e3/120))})),this._resizeObserver.observe(document.getElementById("CrossroadsDetail_canvas"))},beforeDestroy(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._stage&&this._stage.destroy()},methods:{handleDownload(t){const e=document.createElement("a");e.download=t.split("/").pop(),e.href="/file/download?url="+t,document.body.appendChild(e),e.click(),document.body.removeChild(e)},handleChartResize(){if(this.detail.mapInfo){const{width:t,height:e,rotation:i}=this.detail.mapInfo;if(this.drawWidth=document.getElementById("CrossroadsDetail_canvas").clientWidth,this.drawHeight=this.drawWidth*e/t,this._stage.width(this.drawWidth),this._stage.height(this.drawHeight),this._group){this._group.x(this.drawWidth/2),this._group.y(this.drawHeight/2),this._group.rotation(i);const e=this.drawWidth/t*.75;this._group.scale({x:e,y:e})}}},getChart(t,e){const i=new(ai().Group)({}),s=(new l.FM8).fromArray(t),a=3,r=3,n={},o={},h={},d={},c={},u={},p={};let g=Number.MIN_SAFE_INTEGER,m=Number.MAX_SAFE_INTEGER,f=0;for(const y in e){const t=e[y],i={id:t.id,value:Number(t.pcuH),name:t.name,inLink:t.inLink,outLink:t.outLink,sort:0},a=(new l.FM8).fromArray((0,Xe.HW)(t.startPoint,[0,0])).sub(s).multiply(new l.FM8(1,-1)),r=(new l.FM8).fromArray(t.inLinkInfo.toxy).sub(s).multiply(new l.FM8(1,-1)),h=(new l.FM8).fromArray(t.outLinkInfo.fromxy).sub(s).multiply(new l.FM8(1,-1)),d=(new l.FM8).fromArray((0,Xe.HW)(t.endPoint,[0,0])).sub(s).multiply(new l.FM8(1,-1));i.startPoint=a,i.startPointControl=r,i.endPointControl=h,i.endPoint=d,i.value>g&&(g=i.value),i.value<m&&(m=i.value);const c=i.startPointControl.clone().sub(i.startPoint).negate(),u=i.endPoint.clone().sub(i.startPoint),p=i.endPointControl.clone().sub(i.endPoint),v=c.angle(),b=u.angle(),_=p.angle();i.sort=b>v?b-v:2*Math.PI+(b-v),i.inNormal=new l.FM8(c.y,-c.x),i.outNormal=new l.FM8(p.y,-p.x);let w=n[i.inLink];w||(w={id:i.inLink,name:t.inLine,color:ri[f],list:[],count:0,max:Number.MIN_SAFE_INTEGER,point:i.startPoint.clone(),dir:c.clone(),normal:i.inNormal.clone(),angle:v},n[i.inLink]=w,f+=1),i.value>w.max&&(w.max=i.value),w.count+=i.value,w.list.push(i);let C=o[i.outLink];C||(C={id:i.outLink,name:t.outLine,color:ri[f],list:[],count:0,max:Number.MIN_SAFE_INTEGER,point:i.endPoint.clone(),dir:p.clone(),normal:i.outNormal.clone(),angle:_},o[i.outLink]=C),i.value>C.max&&(C.max=i.value),C.count+=i.value,C.list.push(i)}for(const l of Object.values(n)){l.list.sort(((t,e)=>t.sort-e.sort));const t=a/2;let e=0,s=0;for(const[u,p]of l.list.entries()){let n=(1+((p.value-m)/(g-m)||0))*r,o=0;0==u?(o=e,e+=n/2+.2*r):(e+=n/2,o=e,e+=n/2+.2*r);const f=new(ai().Text)({text:p.value,fontSize:a,fontFamily:"Calibri",fill:"black",rotation:180*l.angle/Math.PI});h[String(p.id)]=f,i.add(f);const y=f.width();y>s&&(s=y);const v=p.startPoint.clone();v.add(l.dir.setLength(t+f.width())).add(p.inNormal.setLength(t+o-f.height())),f.x(v.x),f.y(v.y),f.scale({x:-1,y:-1});const b=p.startPoint.clone().add(p.inNormal.setLength(o)).toArray(),_=p.startPointControl.clone().add(p.inNormal.setLength(o)).toArray(),w=p.endPointControl.toArray(),C=p.endPoint.toArray(),A=new(ai().Arrow)({name:String(p.id),points:[b,_,w,C].flat(2),fill:l.color,stroke:l.color,strokeWidth:n,pointerWidth:n,pointerLength:n,bezier:!0});d[String(p.id)]=A,i.add(A);const S=new(ai().TextPath)({text:`     ${p.name}`,fontSize:.8*r,fontFamily:"Calibri",fill:"#fff",data:`M${b.join(" ")} C ${_.join(" ")}, ${w.join(" ")}, ${C.join(" ")}`});c[String(p.id)]=S,i.add(S),A.on("click",(t=>{const e=t.target.name();h[e].moveToTop(),d[e].moveToTop(),c[e].moveToTop()})),A.on("mouseenter",(t=>{})),A.on("mouseleave",(t=>{}))}const n=new(ai().Text)({text:`${l.name}：${l.count}`,fontSize:2*a,fontFamily:"Calibri",fill:"black",rotation:180*l.angle/Math.PI});u[String(l.id)]=n,i.add(n);const o=l.point.clone();o.add(l.dir.setLength(s+2*a+n.width())).add(l.normal.setLength((e-n.height())/2)),n.x(o.x),n.y(o.y),n.scale({x:-1,y:-1})}for(const l of Object.values(o)){let t=(1+((l.max-m)/(g-m)||0))*r;const e=l.point.clone(),s=new(ai().Text)({text:`${l.name}：${l.count}`,fontSize:2*a,fontFamily:"Calibri",fill:"black",rotation:180*l.angle/Math.PI});p[String(l.id)]=s,i.add(s),e.sub(l.dir.setLength(s.width()+2*t)),e.add(l.normal.setLength(s.height()/2)),s.x(e.x),s.y(e.y)}return{_group:i,_LineMap:d,_LineTextMap:h,_LineNameMap:c,_inTextMap:u,_outTextMap:p}},handleDraw(){const{center:t=[0,0]}=this.detail.mapInfo,{_group:e,_LineMap:i,_LineTextMap:s,_LineNameMap:a,_inTextMap:r,_outTextMap:n}=this.getChart(t,this.tableList1);this._group&&this._group.destroy(),this._group=e,this._layer.add(this._group),this.handleChartResize(),this._LineMap=i,this._LineTextMap=s,this._LineNameMap=a,this._inTextMap=r,this._outTextMap=n},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},getCrossroadsDetail(){return ct(this.params.id).then((t=>{t.data.crossroads.mapInfo=(0,Xe.HW)(t.data.crossroads.mapInfo,{}),t.data.crossroads.annex=(0,Xe.HW)(t.data.crossroads.annex,[]),this.detail=t.data.crossroads,this.crossroadsData=[this.detail.beginTime,this.detail.endTime]}))},getCrossroadsCorssStatsTable(){return this.loading=!0,st(this.params.id).then((t=>{this.tableList1=t.data,this.loading=!1}))},crossroadsAnalyzeVideo(){(this.params||this.params.id)&&lt(this.params.id)},crossroadsTrackImage(){(this.params||this.params.id)&&ht(this.params.id)},crossroadsExportCorssStatsTable(){(this.params||this.params.id)&&dt(this.params.id)},handleDelete(t,e){this.$confirm(`是否确认删除线名为 ${t.name} 的记录?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return at(t.id)})).then((()=>(this.$message.success("删除成功"),this.getCrossroadsCorssStatsTable()))).then((()=>{this.handleDraw()})).catch((()=>{}))},handleEdit(t){this.form=JSON.parse(JSON.stringify(t)),this.open=!0},handleSave(){this.$refs["form"].validate((t=>{if(t){const t=JSON.parse(JSON.stringify(this.form));t.count=t.car+t.van+t.bus+t.truck,void 0!=t.id?rt(t).then((t=>(this.$message.success("修改成功"),this.open=!1,this.getCrossroadsCorssStatsTable()))).then((()=>{this.handleDraw()})):nt(t).then((t=>(this.$message.success("新增成功"),this.open=!1,this.getCrossroadsCorssStatsTable()))).then((()=>{this.handleDraw()}))}}))},handleChartToDataUrl(){this.handleChartResize();const t=document.createElement("a");t.download="chart.png",t.href=this._layer.toDataURL(),document.body.appendChild(t),t.click(),document.body.removeChild(t)},handleSubmit(){const t=JSON.parse(JSON.stringify(this.detail));t.mapInfo=JSON.stringify(t.mapInfo),t.annex=JSON.stringify(t.annex),t.beginTime=this.crossroadsData[0],t.endTime=this.crossroadsData[1],this.saving=!0,ft(t).then((t=>{this.changeCrossroadsData=!1,this.saving=!1,this.$message.success("修改成功"),Promise.all([this.getCrossroadsDetail(),this.getCrossroadsCorssStatsTable()]).then((t=>{this.handleDraw()}))})).catch((t=>{this.saving=!1}))},addAnnex(){let t=document.createElement("input");t.type="file",t.accept="video/*",t.style="position: fixed;left: -100vw;top: -100vh;",t.onchange=()=>{let e=t.files[0];if(e){this.updoading=!0;let i=new FormData;i.append("file",e),(0,I.Z)({url:"/file/upload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:i}).then((t=>{this.detail.annex.push({name:e.name,url:t.data}),this.handleSubmit()})).finally((()=>{document.body.removeChild(t),this.updoading=!1}))}else document.body.removeChild(t)},document.body.appendChild(t),t.click()},deleteAnnex(t){this.detail.annex.splice(t,1),this.handleSubmit()},handleQx(){this.changeCrossroadsData=!1,this.crossroadsData=[this.detail.beginTime,this.detail.endTime]}}},oi=ni,li=(0,St.Z)(oi,ei,ii,!1,null,"0cdc1ea4",null),hi=li.exports,di=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"CrossroadsStatsEdit",attrs:{title:"编辑交叉口流量线",top:50,left:100,width:"calc(100vw - 200px)",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"CrossroadsStatsEdit_body"},[e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.loadData}},[t._v("刷新")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.$emit("redraw")}}},[t._v("重新绘制检测线")])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24,lg:16,xl:16}},[e("div",{staticClass:"canvas",attrs:{id:"CrossroadsStatsEdit_canvas"}})]),e("el-col",{attrs:{span:24,lg:8,xl:8}},[e("el-table",{staticClass:"small",attrs:{data:t.tableList1,border:"",height:"calc(100vh - 240px)","row-class-name":t.tableRowClassName},on:{"row-click":t.handleTableRowClick}},[e("el-table-column",{attrs:{label:"编号",prop:"id"}}),e("el-table-column",{attrs:{label:"线名",prop:"name"}}),e("el-table-column",{attrs:{label:"初始线",prop:"inLink"}}),e("el-table-column",{attrs:{label:"终点线",prop:"outLink"}}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleEdit(i)}}},[t._v("修改")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleDelete(i)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),e("el-dialog",{attrs:{title:"修改交叉口流量",visible:t.open,width:"500px","append-to-body":""},on:{"update:visible":function(e){t.open=e}}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"mini"}},[e("el-form-item",{attrs:{label:"线名",prop:"name"}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.open=!1}}},[t._v("取 消")])],1)],1)],1)},ci=[],ui={name:"CrossroadsStatsEdit",props:{visible:{type:Boolean},params:{type:Object}},components:{},computed:{},watch:{visible:{handler(t){t&&this.loadData()},immediate:!0,deep:!0}},data(){return{loading:!1,tableList1:[],inLinkList:[],outLinkList:[],form:{},rules:{center:[{required:!0,message:"交叉口位置不能为空",trigger:"blur"}]},open:!1,drawWidth:1200,drawHeight:675,detail:{},selectLineId:-1}},created(){},mounted(){this._stage=new(ai().Stage)({container:"CrossroadsStatsEdit_canvas",width:this.drawWidth,height:this.drawHeight,draggable:!0}),this._layer=new(ai().Layer),this._stage.add(this._layer),this._group=new(ai().Group)({}),this._layer.add(this._group),this._resizeObserver=new ResizeObserver((t=>{this._setSizeTimeout||(this._setSizeTimeout=setTimeout((()=>{this.drawWidth=t[0].target.clientWidth,this.drawHeight=t[0].target.clientHeight,this._stage.width(this.drawWidth),this._stage.height(this.drawHeight),this._setSizeTimeout=null}),1e3/120))})),this._resizeObserver.observe(document.getElementById("CrossroadsStatsEdit_canvas"))},beforeDestroy(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),this._stage&&this._stage.destroy()},methods:{loadData(){Promise.all([this.getCrossroadsDetail(),this.getCrossroadsCorssStatsTable()]).then((t=>{setTimeout((()=>{this.handleDraw()}),200)}))},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},getCrossroadsDetail(){return ct(this.params.id).then((t=>{t.data.crossroads.mapInfo=(0,Xe.HW)(t.data.crossroads.mapInfo,{}),this.detail=t.data.crossroads}))},getCrossroadsCorssStatsTable(){return st(this.params.id).then((t=>{this.tableList1=t.data}))},handleClearDraw(){try{this._group.destroy(),this._group=new(ai().Group)({}),this._layer.add(this._group),this._LineMap={}}catch(t){}},handleDraw(){this.handleClearDraw();const{center:t,width:e,height:i,rotation:s}=this.detail.mapInfo,a=(new l.FM8).fromArray(t);this._group.x(this.drawWidth/2),this._group.y(this.drawHeight/2),this._group.rotation(s);const r=1080/i,n=this.drawHeight/1080;this._group.scale({x:n,y:n});const o=10;for(const h of this.tableList1){const t=(new l.FM8).fromArray((0,Xe.HW)(h.startPoint,[0,0])).sub(a).multiply(new l.FM8(1,-1)).multiplyScalar(r).toArray(),e=(new l.FM8).fromArray(h.inLinkInfo.toxy).sub(a).multiply(new l.FM8(1,-1)).multiplyScalar(r).toArray(),i=(new l.FM8).fromArray(h.outLinkInfo.fromxy).sub(a).multiply(new l.FM8(1,-1)).multiplyScalar(r).toArray(),s=(new l.FM8).fromArray((0,Xe.HW)(h.endPoint,[0,0])).sub(a).multiply(new l.FM8(1,-1)).multiplyScalar(r).toArray(),n=new(ai().Arrow)({name:String(h.id),points:[t,e,i,s].flat(2),fill:"#409EFF",stroke:"#409EFF",strokeWidth:o,bezier:!0});n.on("click",(t=>{this.handleSelectLine(t.target.name())})),n.on("mouseenter",(t=>{this._stage.container().style.cursor="pointer"})),n.on("mouseleave",(t=>{this._stage.container().style.cursor="default"})),this._LineMap[String(h.id)]=n,this._group.add(n)}console.log(this.drawWidth,this.drawHeight,this.detail.mapInfo,this._LineMap)},handleTableRowClick(t,e,i){this.handleSelectLine(t.id)},handleSelectLine(t){this.selectLineId=t;for(const e of Object.values(this._LineMap))e.name()==t?(e.moveToTop(),e.fill("#FF0000"),e.stroke("#FF0000")):(e.fill("#409EFF"),e.stroke("#409EFF"))},crossroadsAnalyzeVideo(){(this.params||this.params.id)&&lt(this.params.id)},crossroadsTrackImage(){(this.params||this.params.id)&&ht(this.params.id)},crossroadsExportCorssStatsTable(){(this.params||this.params.id)&&dt(this.params.id)},handleDelete(t,e){this.$confirm(`是否确认删除线名为 ${t.name} 的记录?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return at(t.id)})).then((()=>{const e=this._LineMap[t.id];e&&e.destroy(),this.getCrossroadsCorssStatsTable(),this.$message.success("删除成功")})).catch((()=>{}))},handleEdit(t){this.form=JSON.parse(JSON.stringify(t)),this.open=!0},handleSave(){this.$refs["form"].validate((t=>{if(t){const t=JSON.parse(JSON.stringify(this.form));t.count=t.car+t.van+t.bus+t.truck,void 0!=t.id?rt(t).then((t=>{this.$message.success("修改成功"),this.open=!1,this.getCrossroadsCorssStatsTable()})):nt(t).then((t=>{this.$message.success("新增成功"),this.open=!1,this.getCrossroadsCorssStatsTable()}))}}))},tableRowClassName({row:t,rowIndex:e}){return t.id==this.selectLineId?(console.log(t,this.selectLineId),"success-row"):""}}},pi=ui,gi=(0,St.Z)(pi,di,ci,!1,null,null,null),mi=gi.exports,fi=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"CrossroadsList",attrs:{title:"交叉口调查记录",top:40,left:40,width:600,hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"CrossroadsList_body"},[e("div",[e("el-form",{ref:"form",attrs:{"label-width":"auto",inline:"",size:"mini"}},[e("el-form-item",{attrs:{label:"交叉口名称"}},[e("el-select",{attrs:{"remote-method":t.handleGetIntersectionList,filterable:"",remote:"",clearable:"",placeholder:"请输入关键词"},on:{change:t.handleSreachCrossroadsList,clear:function(e){return t.handleGetIntersectionList("")}},model:{value:t.crossroadsList.intersectionId,callback:function(e){t.$set(t.crossroadsList,"intersectionId",e)},expression:"crossroadsList.intersectionId"}},t._l(t.intersectionList.data,(function(t){return e("el-option",{key:t.id+t.name,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),e("div",{staticStyle:{"margin-bottom":"18px"}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleGetCrossroadsList}},[t._v("刷新")]),e("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.crossroadsList.intersectionId},on:{click:t.handleShowEditIntersection}},[t._v("修改交叉口名称")]),e("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.crossroadsList.intersectionId},on:{click:t.handleShowManuallyEnteringCrossroads}},[t._v("人工录入")]),e("el-button",{attrs:{type:"primary",size:"mini",disabled:!t.crossroadsList.intersectionId},on:{click:t.handleShowVideoInputCrossroads}},[t._v("视频识别")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.crossroadsList.loading,expression:"crossroadsList.loading"}],staticClass:"small",attrs:{data:t.crossroadsList.data,border:"",stripe:"",height:"calc(100vh - 400px)"}},[e("el-table-column",{attrs:{prop:"id",label:"id",width:"50px"}}),e("el-table-column",{attrs:{prop:"name",label:"交叉口","min-width":"80px"}}),e("el-table-column",{attrs:{prop:"type",label:"调查方式","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(t._s(t.typeOptions[e.type]))]}}])}),e("el-table-column",{attrs:{prop:"status",label:"状态","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function({row:e}){return[t._v(t._s(t.videoStateOptions[e.status]))]}}])}),e("el-table-column",{attrs:{prop:"beginTime,endTime",label:"调查日期",width:"160px"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("div",[t._v(t._s(i.beginTime))]),e("div",[t._v(t._s(i.endTime))])]}}])}),e("el-table-column",{attrs:{prop:"操作",label:"操作",width:"130px"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return e("div",{staticClass:"operate_btn"},[1==i.status||3==i.type||4==i.type?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleRunCrossroad(i)}}},[t._v("运行")]):t._e(),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleShowCrossroadsDetail(i)}}},[t._v("查看")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleDeleteCrossroad(i)}}},[t._v("移除")]),e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleShowDrawLine(i)}}},[t._v("检测线绘制")])],1)}}])})],1),e("pagination",{staticClass:"crossroads_pagination",attrs:{total:t.crossroadsList.total,page:t.crossroadsList.pageNum,limit:t.crossroadsList.pageSize},on:{"update:page":function(e){return t.$set(t.crossroadsList,"pageNum",e)},"update:limit":function(e){return t.$set(t.crossroadsList,"pageSize",e)},pagination:t.handleGetCrossroadsList}})],1)])},yi=[],vi={name:"CrossroadsList",props:{visible:{type:Boolean},params:{type:Object}},inject:["rootVue"],components:{},computed:{},watch:{params:{handler(t){this.init()},immediate:!0,deep:!0},visible:{handler(t){this.init()},immediate:!0,deep:!0}},data(){return{loading:!1,intersectionList:{data:[],loading:!1,name:"",pageNum:1,pageSize:99999999,total:0},crossroadsList:{data:[],loading:!1,intersectionId:"",pageNum:1,pageSize:10,total:0},typeOptions:{0:"其他",1:"人工",2:"视频识别",3:"互联网路况估算"},videoTypeOptions:{0:"未知",1:"俯视航拍",1:"侧面路拍",1:"正斜角拍摄"},videoStateOptions:{0:"等待划线",1:"等待运行",2:"正在运行",3:"运行成功",4:"运行失败",5:"等待录入",6:"录入成功"},editIntersection:{show:!0,form:{id:"",name:""}}}},created(){},mounted(){},methods:{init(){this.visible&&(this.handleGetIntersectionList(this.params.name),this.handleSreachCrossroadsList(this.params.id))},handleClose(){this.handleSreachClear(),this.$emit("update:visible",!1),this.$emit("close")},handleSreachClear(){},handleGetIntersectionList(t){console.log(t),this.intersectionList.loading=!0,this.intersectionList.name=t,ut({name:this.intersectionList.name,pageSize:this.intersectionList.pageSize,pageNum:this.intersectionList.pageNum}).then((t=>{const{data:e,pageSize:i,pageNum:s,total:a}=t.data;this.intersectionList.data=e,this.intersectionList.pageSize=i,this.intersectionList.pageNum=s,this.intersectionList.loading=!1})).catch((t=>{this.intersectionList.loading=!1}))},async handleShowEditIntersection(){const t=(await pt(this.crossroadsList.intersectionId)).data;t.name=(await this.$prompt("请输入交叉口名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputPlaceholder:"请输入交叉口名称",inputPattern:/\S/})).value,await mt(t),this.handleGetIntersectionList(t.name),this.handleGetCrossroadsList(),this.$message.success("修改成功")},handleSreachCrossroadsList(t){console.log("handleSreachCrossroadsList",t),this.crossroadsList.intersectionId=t,this.crossroadsList.pageNum=1,this.handleGetCrossroadsList()},handleGetCrossroadsList(){this.crossroadsList.loading=!0;const t={intersectionId:this.crossroadsList.intersectionId,pageSize:this.crossroadsList.pageSize,pageNum:this.crossroadsList.pageNum};t.intersectionId?pt(t.intersectionId).then((t=>{this.rootVue._Map&&(this.rootVue._Map.setCenter([t.data.x,t.data.y]),this.rootVue._Map.setZoom(16)),this.selectIntersection=t.data})):this.selectIntersection=null,et(t).then((t=>{const{data:e,pageSize:i,pageNum:s,total:a}=t.data;this.crossroadsList.data=e,this.crossroadsList.pageSize=i,this.crossroadsList.pageNum=s,this.crossroadsList.total=a,this.crossroadsList.loading=!1})).catch((t=>{this.crossroadsList.loading=!1}))},handleDeleteCrossroad(t){const e=t.id;this.$confirm('是否确认删除编号为"'+e+'"的记录?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return it(e)})).then((()=>{this.handleGetCrossroadsList(),this.$message.success("删除成功")})).catch((t=>{console.log(t)}))},handleRunCrossroad(t){ot(t.id).then((t=>{this.handleGetCrossroadsList()}))},handleShowCrossroadsDetail(t){this.$emit("showCrossroadsDetail",t)},handleShowCrossroadsStatsEdit(t){this.$emit("showCrossroadsStatsEdit",t)},handleShowDrawLine(t){this.$emit("showDrawLine",t)},handleShowManuallyEnteringCrossroads(t){this.$emit("showManuallyEnteringCrossroads",{intersectionId:this.crossroadsList.intersectionId})},handleShowVideoInputCrossroads(t){this.$emit("showVideoInputCrossroads",{intersectionId:this.crossroadsList.intersectionId})}}},bi=vi,_i=(0,St.Z)(bi,fi,yi,!1,null,"72e4a0a6",null),wi=_i.exports,Ci=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"AddIntersection",attrs:{title:"新建交叉口",top:50,left:100,width:"600px",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px",size:"small"}},[e("el-form-item",{attrs:{label:"交叉口位置",prop:"center"}},[e("div",[t._v(t._s(t.MercatorToWGS84(t.form.center)))]),e("div",[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("调整位置")]),e("el-switch",{attrs:{"active-value":t.POINT_SELECT_STATE_KEY.ENABLE,"inactive-value":t.POINT_SELECT_STATE_KEY.DISABLE},on:{change:t.handleChangeSelectState},model:{value:t.selectState,callback:function(e){t.selectState=e},expression:"selectState"}})],1)]),e("el-form-item",{attrs:{label:"交叉口名称",prop:"name"}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:2}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",[e("el-button",{on:{click:t.handleClose}},[t._v("取消")]),e("el-button",{attrs:{loading:t.saving,type:"primary"},on:{click:t.handleSubmit}},[t._v("下一步")])],1)],1)],1)},Ai=[],Si={name:"AddIntersection",inject:["rootVue"],props:{visible:{type:Boolean}},components:{},computed:{},watch:{visible:{handler(t){t?this.handleEnable():this.handleDisable()},immediate:!0,deep:!0}},data(){return{POINT_SELECT_STATE_KEY:u,selectState:u.DISABLE,saving:!1,form:{center:[0,0],name:""},rules:{center:[{required:!0,message:"交叉口位置不能为空",trigger:"blur"}],name:[{required:!0,message:"交叉口名称不能为空",trigger:"blur"}]}}},created(){},mounted(){},beforeDestroy(){this.handleDisable()},methods:{MercatorToWGS84(t){try{return(0,n.Nq)(t[0],t[1]).map((t=>Number(Number(t).toFixed(9))))}catch(e){console.log(e)}},handleChangeSelectState(t){this._PointSelectLayer&&(this.rootVue._PointSelectLayer.state=t)},handleEnable(){this._PointSelectLayer=this.rootVue._PointSelectLayer,this._PointSelectLayer&&(this._eventId1=this._PointSelectLayer.addEventListener(p.STATE_CHANGE,(t=>{this.selectState=t.data.state})),this._eventId2=this._PointSelectLayer.addEventListener(p.POINT_CHANGE,(t=>{t.data.point[0]&&t.data.point[1]?this.form.center=t.data.point:this.form.center=null})),this.selectState=this.rootVue._PointSelectLayer.state,this.rootVue._PointSelectLayer.point[0]&&this.rootVue._PointSelectLayer.point[1]?this.form.center=this.rootVue._PointSelectLayer.point:this.form.center=null)},handleDisable(){this.form={center:[0,0],name:""},this.selectState=u.DISABLE,this._PointSelectLayer&&(this._PointSelectLayer.removeEventListener(p.STATE_CHANGE,this._eventId1),this._PointSelectLayer.removeEventListener(p.POINT_CHANGE,this._eventId2),this._PointSelectLayer=null)},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleSubmit(){this.$refs["form"].validate((t=>{if(t){const t={x:this.form.center[0],y:this.form.center[1],name:this.form.name};this.saving=!0,gt(t).then((t=>{this.$emit("submited",t.data),this.saving=!1})).catch((t=>{this.saving=!1}))}}))}}},xi=Si,ki=(0,St.Z)(xi,Ci,Ai,!1,null,"7e56a8a8",null),Li=ki.exports,Mi=function(){var t=this,e=t._self._c;return e("div",{staticClass:"UploadImageZip"},[t.updoading?e("div",{staticClass:"progress_box"},[e("el-progress",{attrs:{percentage:t.progress}}),e("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.controller.abort()}}})],1):e("el-button",{attrs:{type:"primary"},on:{click:t.handleSelectFile}},[t._v("选择Zip文件")])],1)},Ei=[],Ti={name:"UploadImageZip",props:{},components:{},computed:{},watch:{},data(){return{controller:null,progress:0,updoading:!1}},created(){},mounted(){},methods:{handleSelectFile(){this.controller&&this.controller.abort(),this.controller=new AbortController;let t=document.createElement("input");t.type="file",t.accept=".zip",t.style="position: fixed;left: -100vw;top: -100vh;",t.onchange=()=>{let e=t.files[0],i=new FormData;i.append("file",e),(0,I.Z)({url:"/mappicture/uploadzip",method:"post",headers:{"Content-Type":"multipart/form-data"},data:i,signal:this.controller.signal,onUploadProgress:t=>{console.log(t),this.progress=Math.floor(95*t.progress),this.updoading=!0}}).then((t=>{this.handleInput(t.data)})).finally((()=>{document.body.removeChild(t),this.updoading=!1,this.progress=0}))},document.body.appendChild(t),t.click()}}},Di=Ti,Fi=(0,St.Z)(Di,Mi,Ei,!1,null,"37f8c042",null),Pi=Fi.exports,Ii=function(){var t=this,e=t._self._c;return e("Dialog",{staticClass:"ImageListDialog",attrs:{title:"图片列表",top:50,left:100,width:"900px",hideMinimize:"",visible:t.visible},on:{close:t.handleClose}},[t.showImageList?e("div",[e("div",{staticClass:"image_title"},[e("div",{staticClass:"path"},[t._v(t._s(t.selectPath))]),e("el-button",{attrs:{icon:"el-icon-arrow-left",type:"primary",size:"mini"},on:{click:function(e){t.showImageList=!1}}},[t._v("返回")])],1),e("div",{staticClass:"image_list"},t._l(t.imageList,(function(i,s){return e("div",{key:s,staticClass:"image_box"},[e("el-image",{attrs:{src:i.url,"preview-src-list":t.previewSrcList,fit:"fill",lazy:!0}}),e("div",{staticClass:"btn_list"},[e("div",{staticClass:"el-icon-aim",on:{click:function(e){return e.stopPropagation(),t.handleSetCenter(i)}}}),e("div",{staticClass:"el-icon-delete",on:{click:function(e){return e.stopPropagation(),t.handleDeleteImage(i)}}})])],1)})),0)]):e("div",[e("el-form",{ref:"form",attrs:{model:t.queryparam,"label-width":"auto",inline:!0,size:"small"}},[e("el-form-item",{attrs:{label:"名称"}},[e("el-input",{model:{value:t.queryparam.name,callback:function(e){t.$set(t.queryparam,"name",e)},expression:"queryparam.name"}})],1),e("el-form-item",{attrs:{label:"时间"}},[e("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.queryparam.time,callback:function(e){t.$set(t.queryparam,"time",e)},expression:"queryparam.time"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.getTree}},[t._v("搜索")])],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dirList,height:"calc(100vh - 300px)","row-key":"path",border:"","default-expand-all":"","tree-props":{children:"subdir"}}},[e("el-table-column",{attrs:{label:"名称",prop:"name"}}),e("el-table-column",{attrs:{label:"时间",prop:"createTime",width:"180"}}),e("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function({row:i}){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleDeleteDir(i)}}},[t._v("删除")]),i.pictures&&i.pictures.length?e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleShowImageList(i)}}},[t._v("查看")]):t._e()]}}],null,!1,860358421)})],1)],1)])},Ni=[],Ri={name:"ImageListDialog",inject:["rootVue"],props:{visible:{type:Boolean}},components:{},computed:{previewSrcList(){return this.imageList.map((t=>t.url))}},watch:{visible:{handler(t){t?this.handleEnable():this.handleDisable()},immediate:!0,deep:!0}},data(){return{queryparam:{name:"",time:[]},dirList:[],showImageList:!1,selectPath:"",imageList:[]}},created(){},mounted(){},beforeDestroy(){this.handleDisable()},methods:{handleSetCenter(t){this.rootVue.handleSetHMash(t),this.rootVue._Map.setCenter([t.x,t.y])},getTree(){const{name:t,time:e}=this.queryparam;bt({name:t,beginTime:(e||[])[0]||"",endTime:(e||[])[1]||""}).then((t=>{this.dirList=t.data;const e=this.dirList.find((t=>t.path==this.selectPath));e?this.imageList=e.pictures:(this.imageList=[],this.showImageList=!1)}))},handleEnable(){this.getTree()},handleDisable(){},handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleDeleteDir(t){this.$confirm(`是否确认删除${t.path}下全部图片?`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return _t({path:t.path})})).then((()=>{this.getTree(),this.$message.success("删除成功")})).catch((()=>{}))},handleShowImageList(t){this.selectPath=t.path,this.imageList=t.pictures,this.showImageList=!0},handleDeleteImage(t){this.$confirm("是否确认删除当前图片?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return vt(t.id)})).then((()=>{this.imageDialog={visible:!1,data:null},this.getTree(),this.$message.success("删除成功")})).catch((()=>{}))}}},Oi=Ri,Bi=(0,St.Z)(Oi,Ii,Ni,!1,null,"22c09e4c",null),Gi=Bi.exports;const Ui=14;var zi={provide(){return{rootVue:this}},data(){return{SHOW_LINK_ZOOM:Ui,activeNames:["1","2","3","4"],activeNames2:["2-1","2-2"],selectRouteId:null,selectLinkId:null,ruleForm:{zoom:13,wayWidth:5,twoWayOffset:10,frameSelectState:h.NOT_STARTED,pointSelectState:u.DISABLE,timeList:[],type:null,routeName:null,center:(0,n.ob)(113.459868,23.171394),routeId:null,linkId:null},MAP_ZOOM_RANGE:r.$X,FRAME_SELECT_STATE_KEY:h,POINT_SELECT_STATE_KEY:u,lineFlow:{visible:!1,linkId:null},frameLink:{visible:!1,xyarr:null},frameCrossroads:{visible:!1,xyarr:null},videoInputCrossroads:{visible:!1,params:{}},manuallyEnteringCrossroads:{visible:!1,params:{}},drawLine:{visible:!1,params:{}},crossroadsStatsEdit:{visible:!1,params:{}},crossroadsDetail:{visible:!1,params:{}},crossroadsList:{visible:!1,params:{}},addIntersection:{visible:!1,params:{}},imageDialog:{visible:!1,data:null},imageListDialog:{visible:!1},typeOptions:{0:"其他",1:"人工",2:"视频识别",3:"互联网路况估算"},videoTypeOptions:{0:"未知",1:"俯视航拍",1:"侧面路拍",1:"正斜角拍摄"},videoStateOptions:{0:"等待划线",1:"等待运行",2:"正在运行",3:"运行成功",4:"运行失败",5:"等待录入",6:"录入成功"},showStyleMenu:!1,styleList:[],styleActive:0,showLinkStatsLayer:!0,showIntersectionListLayer:!0,showImageListLayer:!0}},components:{LineFlow:kt,FrameLink:Ft,HelpDialog:De,RouteSelect:Bt,LinkSelect:Yt,CenterInput:Zt,VideoInputCrossroads:Oe,DrawLine:ti,CrossroadsDetail:hi,CrossroadsStatsEdit:mi,ManuallyEnteringCrossroads:Ve,CrossroadsList:wi,AddIntersection:Li,UploadImageZip:Pi,ImageListDialog:Gi},computed:{showSetting(){return!this.addIntersection.visible&&!this.crossroadsList.visible&&!this.videoInputCrossroads.visible&&!this.manuallyEnteringCrossroads.visible&&!this.drawLine.visible&&!this.crossroadsStatsEdit.visible&&!this.crossroadsDetail.visible&&!this.imageDialog.visible&&!this.imageListDialog.visible},showCrossroadsList(){return this.crossroadsList.visible&&!this.videoInputCrossroads.visible&&!this.manuallyEnteringCrossroads.visible&&!this.drawLine.visible&&!this.crossroadsStatsEdit.visible&&!this.crossroadsDetail.visible}},watch:{showLinkStatsLayer(t){t?this._Map.addLayer(this._LinkStatsLayer):this._Map.removeLayer(this._LinkStatsLayer)},showIntersectionListLayer(t){t?this._Map.addLayer(this._IntersectionListLayer):this._Map.removeLayer(this._IntersectionListLayer)},showImageListLayer(t){t?this._Map.addLayer(this._ImageListLayer):this._Map.removeLayer(this._ImageListLayer)}},created(){this.initLayer()},async mounted(){this.initMap(),this.handleLoadNetwork(),this.handleLoadMaker(),this.handleLoadIntersectionList(),this.handleLoadImageList(),i.e(993).then(i.t.bind(i,2993,19)).then((t=>{this._GuangZhouLayer.setData(t.default)})),i.e(177).then(i.t.bind(i,2177,19)).then((t=>{this._HuangPuLayer.setData(t.default)}))},methods:{initLayer(){this._MapLayer=new r.t5({tileClass:r.LA[0],zIndex:0});{const t=r.LA,e=[],i=Object.values(t);for(let s=0,a=i.length;s<a;s++){const t=i[s];t===this._MapLayer.tileClass&&(this.styleActive=s);const a={title:t.style_name,url:new t(15,26700,14218,200).getUrl(),c:t};e.push(a)}this.styleList=e}this._NetworkLayer=new y({zIndex:10,lineWidth:this.ruleForm.wayWidth,event:{[r.kT.HANDLE_PICK_LEFT]:t=>{this.lineFlow={visible:!1,linkId:null},this.selectRouteId=t.data.id,this.getLink()}}}),this._LinkLayer=new S({zIndex:30,color:6799930,lineWidth:this.ruleForm.wayWidth,twoWayOffset:this.ruleForm.twoWayOffset,event:{[r.kT.HANDLE_PICK_LEFT]:t=>{this.handleChangeLink(t.data)}}}),this._LinkStatsLayer=new x({zIndex:100,event:{[r.kT.HANDLE_PICK_LEFT]:t=>{this.handleMoveToLink({value:t.data.linkId,item:{origid:t.data.wayId}})}}}),this._IntersectionListLayer=new T({zIndex:110,event:{[r.kT.HANDLE_PICK_LEFT]:t=>{this.handleSubmitAddIntersection(t.data)}}}),this._ImageListLayer=new D({zIndex:110,event:{[r.kT.HANDLE_PICK_LEFT]:t=>{this.handleShowImageDialog(t.data)}}}),this._FrameSelectLayer=new c({zIndex:50,event:{[d.STATE_CHANGE]:t=>{this.ruleForm.frameSelectState=t.data.state,this.ruleForm.frameSelectState===h.ENDED?this.frameLink.xyarr=[t.data.xy.rightTop,t.data.xy.rightBottom,t.data.xy.leftBottom,t.data.xy.leftTop]:this.frameLink.xyarr=null}}}),this._PointSelectLayer=new g({zIndex:120,color:"#ff0000",event:{[p.POINT_CHANGE]:t=>{this.showAddIntersection(t.data.point)},[p.STATE_CHANGE]:t=>{this.ruleForm.pointSelectState=t.data.state}}}),this._GuangZhouLayer=new L({zIndex:10,color:"blue"}),this._HuangPuLayer=new L({zIndex:10,color:"red"})},initMap(){this._Map=new r.s1({rootId:"mapRoot",zoom:this.ruleForm.zoom,center:this.ruleForm.center,event:{[r.kT.UPDATE_ZOOM]:t=>{this.ruleForm.zoom=Number(Number(this._Map.zoom).toFixed(2)),this.ruleForm.zoom>Ui?(this._Map.addLayer(this._NetworkLayer),this._Map.addLayer(this._LinkLayer)):(this._Map.removeLayer(this._NetworkLayer),this._Map.removeLayer(this._LinkLayer))},[r.kT.UPDATE_CENTER]:t=>{this.ruleForm.center=this._Map.center}}}),this._Map.addLayer(this._MapLayer),this.ruleForm.zoom>Ui?(this._Map.addLayer(this._NetworkLayer),this._Map.addLayer(this._LinkLayer)):(this._Map.removeLayer(this._NetworkLayer),this._Map.removeLayer(this._LinkLayer)),this.showLinkStatsLayer&&this._Map.addLayer(this._LinkStatsLayer),this.showIntersectionListLayer&&this._Map.addLayer(this._IntersectionListLayer),this.showImageListLayer&&this._Map.addLayer(this._ImageListLayer),this._Map.addLayer(this._FrameSelectLayer),this._Map.addLayer(this._PointSelectLayer),this._Map.addLayer(this._GuangZhouLayer),this._Map.addLayer(this._HuangPuLayer)},handleLoadNetwork(){N({selectAll:!0}).then((t=>{this._NetworkData=t.data,this._NetworkLayer.setData(t.data),this.$emit("loadNetwork")}))},handleLoadMaker(){let t=this.ruleForm.timeList||[],e={beginTime:t[0]||"",endTime:t[1]||"",type:this.ruleForm.type||""};z(e).then((t=>{this._LinkStatsLayer.setData(t.data)}))},handleLoadIntersectionList(){let t={pageSize:999999999,pageNum:1};ut(t).then((t=>{this._IntersectionListLayer.setData(t.data.data)}))},handleLoadImageList(){yt().then((t=>{this._ImageListLayer.setData(t.data)}))},handleChangeLink(t){this.lineFlow={visible:!0,linkId:t.id};const{clientWidth:e,clientHeight:i}=this._Map.rootDoc,[s,a]=this._Map.WindowXYToWebMercator(e/3,i/2),[r,n]=this._Map.center;let o=[(t.fromxy[0]+t.toxy[0])/2+r-s,(t.fromxy[1]+t.toxy[1])/2];this._Map.setCenter(o),this._LinkLayer.setSelectId(t.id)},lineFlowUpdateData(){this.handleLoadMaker(),this.selectRouteId&&R(this.selectRouteId).then((t=>{this._LinkLayer.setData(t.data,this._LinkLayer.selectId)}))},lineFlowClose(){this.selectRouteId&&R(this.selectRouteId).then((t=>{this._LinkLayer.setData(t.data)}))},getLink(){this.selectRouteId&&R(this.selectRouteId).then((t=>{this._LinkLayer.setData(t.data)}))},handleChangeStyle(t){this.showStyleMenu=!1,this.styleActive=t,this._MapLayer.setTileClass(this.styleList[t].c)},handleChangeZoomLavel(){this._Map.setZoom(this.ruleForm.zoom)},handleChangeTwoWayOffset(t){this._NetworkLayer&&this._NetworkLayer.setValues({twoWayOffset:t}),this._LinkLayer&&this._LinkLayer.setValues({twoWayOffset:t})},handleChangeWayWidth(t){this._NetworkLayer&&this._NetworkLayer.setValues({lineWidth:t}),this._LinkLayer&&this._LinkLayer.setValues({lineWidth:t})},handleShowFrameLink(){this.frameLink.visible=!0},handlePlayFrameSelect(){this.handleStopFrameSelect(),this.frameLink={visible:!1,xyarr:null},this._FrameSelectLayer&&(this._FrameSelectLayer.reset(),this._FrameSelectLayer.play(),this.ruleForm.frameSelectState=this._FrameSelectLayer.state)},handleReplayFrameSelect(){this.frameLink={visible:!1,xyarr:null},this._FrameSelectLayer&&(this._FrameSelectLayer.reset(),this._FrameSelectLayer.play(),this.ruleForm.frameSelectState=this._FrameSelectLayer.state)},handleStopFrameSelect(){this.frameLink={visible:!1,xyarr:null},this._FrameSelectLayer&&(this._FrameSelectLayer.reset(),this._FrameSelectLayer.stop(),this.ruleForm.frameSelectState=this._FrameSelectLayer.state)},handlePlayPointSelect(){this._PointSelectLayer.state=u.ENABLE},handleStopPointSelect(){this._PointSelectLayer.state=u.DISABLE,this._PointSelectLayer.point=[0,0]},showAddIntersection(t){this._PointSelectLayer&&(this._PointSelectLayer.point=t),this.addIntersection.visible=!0},handleSubmitAddIntersection(t){this.handleLoadIntersectionList(),this.addIntersection.visible=!1,this.crossroadsList.params=t||{},this.crossroadsList.visible=!0,this.handleStopPointSelect()},handleShowCrossroadsDetail(t){this.crossroadsDetail.params=t,this.crossroadsDetail.visible=!0},handleShowCrossroadsStatsEdit(t){this.crossroadsStatsEdit.params=t,this.crossroadsStatsEdit.visible=!0},handleShowVideoInputCrossroads(t){this.videoInputCrossroads.params=t,this.videoInputCrossroads.visible=!0},handleSubmitVideoInputCrossroads(t){this.videoInputCrossroads.visible=!1,this.handleShowDrawLine(t)},handleShowManuallyEnteringCrossroads(t){this.manuallyEnteringCrossroads.params=t,this.manuallyEnteringCrossroads.visible=!0},handleSubmitManuallyEnteringCrossroads(t){this.manuallyEnteringCrossroads.visible=!1,this.handleShowDrawLine(t)},handleShowDrawLine(t){this.drawLine.params=t,this.drawLine.visible=!0},handleDrawLineSuccess(){this.drawLine.visible=!1,this.handleStopPointSelect(),this.handleShowCrossroadsStatsEdit(this.drawLine.params)},handleShowCrossroadsStatsEdit(t){this.crossroadsStatsEdit.params=t,this.crossroadsStatsEdit.visible=!0},handleRedraw(){this.crossroadsStatsEdit.visible=!1,this.handleShowDrawLine(this.crossroadsStatsEdit.params)},handleMoveToRoute({value:t}){this.selectRouteId=t,R(this.selectRouteId).then((t=>{let{zoom:e,center:i}=this._Map.getFitZoomAndCenter(t.data[0].map((t=>t.fromxy)));this._Map.setCenter(i),this._Map.setZoom(e),this._LinkLayer.setData(t.data)}))},handleMoveToCenter(){this._Map.setCenter(this.ruleForm.center)},handleMoveToLink({value:t,item:e}){this.selectRouteId=e.origid,this.selectLinkId=t,R(this.selectRouteId).then((e=>{let{zoom:i,center:s}=this._Map.getFitZoomAndCenter(e.data[0].map((t=>t.fromxy)));this._Map.setCenter(s),this._Map.setZoom(i),this._LinkLayer.setData(e.data);for(const a of e.data)for(const e of a)if(e.id==t)return void setTimeout((()=>{this.handleChangeLink(e)}),500)}))},handleDeleteImage(t){this.$confirm("是否确认删除当前图片?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return vt(t.id)})).then((()=>{this.imageDialog={visible:!1,data:null},this.handleSetHMash(null),this.handleLoadImageList(),this.$message.success("删除成功")})).catch((()=>{}))},handleShowImageDialog(t){this.imageDialog={visible:!0,data:t},this.handleSetHMash(t)},handleSetHMash(t){this._ImageListLayer.setHMesh(t)}}},Wi=zi,Vi=(0,St.Z)(Wi,s,a,!1,null,"363c3bee",null),Yi=Vi.exports},7816:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Animation=void 0;const s=i(5640),a=i(1483),r=function(){return s.glob.performance&&s.glob.performance.now?function(){return s.glob.performance.now()}:function(){return(new Date).getTime()}}();class n{constructor(t,e){this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=t,this.setLayers(e)}setLayers(t){let e=[];return t&&(e=Array.isArray(t)?t:[t]),this.layers=e,this}getLayers(){return this.layers}addLayer(t){const e=this.layers,i=e.length;for(let s=0;s<i;s++)if(e[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const t=n,e=t.animations,i=e.length;for(let s=0;s<i;s++)if(e[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),n._addAnimation(this),this}stop(){return n._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const e=t.id,i=this.animations,s=i.length;for(let a=0;a<s;a++)if(i[a].id===e){this.animations.splice(a,1);break}}static _runFrames(){const t={},e=this.animations;for(let i=0;i<e.length;i++){const s=e[i],a=s.layers,n=s.func;s._updateFrameObject(r());const o=a.length;let l;if(l=!n||!1!==n.call(s,s.frame),l)for(let e=0;e<o;e++){const i=a[e];void 0!==i._id&&(t[i._id]=i)}}for(const i in t)t.hasOwnProperty(i)&&t[i].batchDraw()}static _animationLoop(){const t=n;t.animations.length?(t._runFrames(),a.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,a.Util.requestAnimFrame(this._animationLoop))}}e.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1},5277:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const i=(t,i,s)=>{let r,n;const o=20,l=s/2;r=0;for(let h=0;h<o;h++)n=l*e.tValues[o][h]+l,r+=e.cValues[o][h]*a(t,i,n);return l*r};e.getCubicArcLength=i;const s=(t,e,i)=>{void 0===i&&(i=1);const s=t[0]-2*t[1]+t[2],a=e[0]-2*e[1]+e[2],r=2*t[1]-2*t[0],n=2*e[1]-2*e[0],o=4*(s*s+a*a),l=4*(s*r+a*n),h=r*r+n*n;if(0===o)return i*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));const d=l/(2*o),c=h/o,u=i+d,p=c-d*d,g=u*u+p>0?Math.sqrt(u*u+p):0,m=d*d+p>0?Math.sqrt(d*d+p):0,f=d+Math.sqrt(d*d+p)!==0?p*Math.log(Math.abs((u+g)/(d+m))):0;return Math.sqrt(o)/2*(u*g-d*m+f)};function a(t,e,i){const s=r(1,i,t),a=r(1,i,e),n=s*s+a*a;return Math.sqrt(n)}e.getQuadraticArcLength=s;const r=(t,i,s)=>{const a=s.length-1;let n,o;if(0===a)return 0;if(0===t){o=0;for(let t=0;t<=a;t++)o+=e.binomialCoefficients[a][t]*Math.pow(1-i,a-t)*Math.pow(i,t)*s[t];return o}n=new Array(a);for(let e=0;e<a;e++)n[e]=a*(s[e+1]-s[e]);return r(t-1,i,n)},n=(t,e,i)=>{let s=1,a=t/e,r=(t-i(a))/e,n=0;while(s>.001){const o=i(a+r),l=Math.abs(t-o)/e;if(l<s)s=l,a+=r;else{const n=i(a-r),o=Math.abs(t-n)/e;o<s?(s=o,a-=r):r/=2}if(n++,n>500)break}return a};e.t2length=n},9415:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.HitCanvas=e.SceneCanvas=e.Canvas=void 0;const s=i(1483),a=i(4765),r=i(5640);let n;function o(){if(n)return n;const t=s.Util.createCanvasElement(),e=t.getContext("2d");return n=function(){const t=r.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}(),s.Util.releaseCanvas(t),n}class l{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const e=t||{},i=e.pixelRatio||r.Konva.pixelRatio||o();this.pixelRatio=i,this._canvas=s.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const e=this.pixelRatio,i=this.getContext()._context;i.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const e=this.pixelRatio,i=this.getContext()._context;i.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(i){try{return this._canvas.toDataURL()}catch(a){return s.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}e.Canvas=l;class h extends l{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new a.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}e.SceneCanvas=h;class d extends l{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new a.HitContext(this),this.setSize(t.width,t.height)}}e.HitCanvas=d},7590:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;const s=i(9861),a=i(1548),r=i(950);class n extends a.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const e=this.children||[],i=[];return e.forEach((function(e){t(e)&&i.push(e)})),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.remove()})),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach((t=>{t.parent=null,t.index=0,t.destroy()})),this.children=[],this._requestDraw(),this}add(...t){if(0===t.length)return this;if(t.length>1){for(let e=0;e<t.length;e++)this.add(t[e]);return this}const e=t[0];return e.getParent()?(e.moveTo(this),this):(this._validateAdd(e),e.index=this.getChildren().length,e.parent=this,e._clearCaches(),this.getChildren().push(e),this._fire("add",{child:e}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){const i=[];return this._descendants((s=>{const a=s._isMatch(t);return a&&i.push(s),!(!a||!e)})),i}_descendants(t){let e=!1;const i=this.getChildren();for(const s of i){if(e=t(s),e)return!0;if(s.hasChildren()&&(e=s._descendants(t),e))return!0}return!1}toObject(){const t=a.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach((e=>{t.children.push(e.toObject())})),t}isAncestorOf(t){let e=t.getParent();while(e){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){const e=a.Node.prototype.clone.call(this,t);return this.getChildren().forEach((function(t){e.add(t.clone())})),e}getAllIntersections(t){const e=[];return this.find("Shape").forEach((i=>{i.isVisible()&&i.intersects(t)&&e.push(i)})),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach((function(e){e._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach((function(t,e){t.index=e})),this._requestDraw()}drawScene(t,e,i){const s=this.getLayer(),a=t||s&&s.getCanvas(),r=a&&a.getContext(),n=this._getCanvasCache(),o=n&&n.scene,l=a&&a.isCache;if(!this.isVisible()&&!l)return this;if(o){r.save();const t=this.getAbsoluteTransform(e).getMatrix();r.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",a,e,i);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;const i=this.getLayer(),s=t||i&&i.hitCanvas,a=s&&s.getContext(),r=this._getCanvasCache(),n=r&&r.hit;if(n){a.save();const t=this.getAbsoluteTransform(e).getMatrix();a.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",s,e);return this}_drawChildren(t,e,i,s){var a;const r=e&&e.getContext(),n=this.clipWidth(),o=this.clipHeight(),l=this.clipFunc(),h="number"===typeof n&&"number"===typeof o||l,d=i===this;if(h){r.save();const t=this.getAbsoluteTransform(i);let e,s=t.getMatrix();if(r.transform(s[0],s[1],s[2],s[3],s[4],s[5]),r.beginPath(),l)e=l.call(this,r,this);else{const t=this.clipX(),e=this.clipY();r.rect(t||0,e||0,n,o)}r.clip.apply(r,e),s=t.copy().invert().getMatrix(),r.transform(s[0],s[1],s[2],s[3],s[4],s[5])}const c=!d&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;c&&(r.save(),r._applyGlobalCompositeOperation(this)),null===(a=this.children)||void 0===a||a.forEach((function(a){a[t](e,i,s)})),c&&r.restore(),h&&r.restore()}getClientRect(t={}){var e;const i=t.skipTransform,s=t.relativeTo;let a,r,n,o,l={x:1/0,y:1/0,width:0,height:0};const h=this;null===(e=this.children)||void 0===e||e.forEach((function(e){if(!e.visible())return;const i=e.getClientRect({relativeTo:h,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===i.width&&0===i.height||(void 0===a?(a=i.x,r=i.y,n=i.x+i.width,o=i.y+i.height):(a=Math.min(a,i.x),r=Math.min(r,i.y),n=Math.max(n,i.x+i.width),o=Math.max(o,i.y+i.height)))}));const d=this.find("Shape");let c=!1;for(let u=0;u<d.length;u++){const t=d[u];if(t._isVisible(this)){c=!0;break}}return l=c&&void 0!==a?{x:a,y:r,width:n-a,height:o-r}:{x:0,y:0,width:0,height:0},i?l:this._transformedRect(l,s)}}e.Container=n,s.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),s.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(n,"clipFunc")},4765:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.HitContext=e.SceneContext=e.Context=void 0;const s=i(1483),a=i(5640);function r(t){const e=[],i=t.length,a=s.Util;for(let s=0;s<i;s++){let i=t[s];a._isNumber(i)?i=Math.round(1e3*i)/1e3:a._isString(i)||(i+=""),e.push(i)}return e}const n=",",o="(",l=")",h="([",d="])",c=";",u="()",p="=",g=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100;class y{constructor(t){this.canvas=t,a.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){let i,a,r,g,m=this.traceArr,f=m.length,y="";for(i=0;i<f;i++)a=m[i],r=a.method,r?(g=a.args,y+=r,t?y+=u:s.Util._isArray(g[0])?y+=h+g.join(n)+d:(e&&(g=g.map((t=>"number"===typeof t?Math.floor(t):t))),y+=o+g.join(n)+l)):(y+=a.property,t||(y+=p+a.val)),y+=c;return y}clearTrace(){this.traceArr=[]}_trace(t){let e,i=this.traceArr;i.push(t),e=i.length,e>=f&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){const e=t.attrs.lineCap;e&&this.setAttr("lineCap",e)}_applyOpacity(t){const e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){const e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,i,s,a,r){this._context.arc(t,e,i,s,a,r)}arcTo(t,e,i,s,a){this._context.arcTo(t,e,i,s,a)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,i,s,a,r){this._context.bezierCurveTo(t,e,i,s,a,r)}clearRect(t,e,i,s){this._context.clearRect(t,e,i,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,e){const i=arguments;return 2===i.length?this._context.createImageData(t,e):1===i.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,i,s){return this._context.createLinearGradient(t,e,i,s)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,i,s,a,r){return this._context.createRadialGradient(t,e,i,s,a,r)}drawImage(t,e,i,s,a,r,n,o,l){const h=arguments,d=this._context;3===h.length?d.drawImage(t,e,i):5===h.length?d.drawImage(t,e,i,s,a):9===h.length&&d.drawImage(t,e,i,s,a,r,n,o,l)}ellipse(t,e,i,s,a,r,n,o){this._context.ellipse(t,e,i,s,a,r,n,o)}isPointInPath(t,e,i,s){return i?this._context.isPointInPath(i,t,e,s):this._context.isPointInPath(t,e,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,e,i,s){this._context.fillRect(t,e,i,s)}strokeRect(t,e,i,s){this._context.strokeRect(t,e,i,s)}fillText(t,e,i,s){s?this._context.fillText(t,e,i,s):this._context.fillText(t,e,i)}measureText(t){return this._context.measureText(t)}getImageData(t,e,i,s){return this._context.getImageData(t,e,i,s)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,i,s){this._context.rect(t,e,i,s)}roundRect(t,e,i,s,a){this._context.roundRect(t,e,i,s,a)}putImageData(t,e,i){this._context.putImageData(t,e,i)}quadraticCurveTo(t,e,i,s){this._context.quadraticCurveTo(t,e,i,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context["mozDash"]=t:"webkitLineDash"in this._context&&(this._context["webkitLineDash"]=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,i,s,a,r){this._context.setTransform(t,e,i,s,a,r)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,i,s){this._context.strokeText(t,e,i,s)}transform(t,e,i,s,a,r){this._context.transform(t,e,i,s,a,r)}translate(t,e){this._context.translate(t,e)}_enableTrace(){let t,e,i=this,s=g.length,a=this.setAttr;const n=function(t){let s,a=i[t];i[t]=function(){return e=r(Array.prototype.slice.call(arguments,0)),s=a.apply(i,arguments),i._trace({method:t,args:e}),s}};for(t=0;t<s;t++)n(g[t]);i.setAttr=function(){a.apply(i,arguments);const t=arguments[0];let e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),i._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation,i=!e||"source-over"===e;i||this.setAttr("globalCompositeOperation",e)}}e.Context=y,m.forEach((function(t){Object.defineProperty(y.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})}));class v extends y{constructor(t,{willReadFrequently:e=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:e})}_fillColor(t){const e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){const e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){const e=t.fill(),i=t.getFillPriority();if(e&&"color"===i)return void this._fillColor(t);const s=t.getFillPatternImage();if(s&&"pattern"===i)return void this._fillPattern(t);const a=t.getFillLinearGradientColorStops();if(a&&"linear-gradient"===i)return void this._fillLinearGradient(t);const r=t.getFillRadialGradientColorStops();r&&"radial-gradient"===i?this._fillRadialGradient(t):e?this._fillColor(t):s?this._fillPattern(t):a?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const e=t.getStrokeLinearGradientStartPoint(),i=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(e.x,e.y,i.x,i.y);if(s){for(let t=0;t<s.length;t+=2)a.addColorStop(s[t],s[t+1]);this.setAttr("strokeStyle",a)}}_stroke(t){const e=t.dash(),i=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!i){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");const s=t.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),i||this.restore()}}_applyShadow(t){var e,i,s;const a=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",r=null!==(i=t.getShadowBlur())&&void 0!==i?i:5,n=null!==(s=t.getShadowOffset())&&void 0!==s?s:{x:0,y:0},o=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),h=o.x*l,d=o.y*l;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",r*Math.min(Math.abs(h),Math.abs(d))),this.setAttr("shadowOffsetX",n.x*h),this.setAttr("shadowOffsetY",n.y*d)}}e.SceneContext=v;class b extends y{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const e=t.getStrokeScaleEnabled();if(!e){this.save();const t=this.getCanvas().getPixelRatio();this.setTransform(t,0,0,t,0,0)}this._applyLineCap(t);const i=t.hitStrokeWidth(),s="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}e.HitContext=b},9485:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const s=i(5640),a=i(1483);e.DD={get isDragging(){let t=!1;return e.DD._dragElements.forEach((e=>{"dragging"===e.dragStatus&&(t=!0)})),t},justDragged:!1,get node(){let t;return e.DD._dragElements.forEach((e=>{t=e.node})),t},_dragElements:new Map,_drag(t){const i=[];e.DD._dragElements.forEach(((e,s)=>{const{node:r}=e,n=r.getStage();n.setPointersPositions(t),void 0===e.pointerId&&(e.pointerId=a.Util._getFirstPointerId(t));const o=n._changedPointerPositions.find((t=>t.id===e.pointerId));if(o){if("dragging"!==e.dragStatus){const i=r.dragDistance(),s=Math.max(Math.abs(o.x-e.startPointerPos.x),Math.abs(o.y-e.startPointerPos.y));if(s<i)return;if(r.startDrag({evt:t}),!r.isDragging())return}r._setDragPosition(t,e),i.push(r)}})),i.forEach((e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)}))},_endDragBefore(t){const i=[];e.DD._dragElements.forEach((a=>{const{node:r}=a,n=r.getStage();t&&n.setPointersPositions(t);const o=n._changedPointerPositions.find((t=>t.id===a.pointerId));if(!o)return;"dragging"!==a.dragStatus&&"stopped"!==a.dragStatus||(e.DD.justDragged=!0,s.Konva._mouseListenClick=!1,s.Konva._touchListenClick=!1,s.Konva._pointerListenClick=!1,a.dragStatus="stopped");const l=a.node.getLayer()||a.node instanceof s.Konva["Stage"]&&a.node;l&&-1===i.indexOf(l)&&i.push(l)})),i.forEach((t=>{t.draw()}))},_endDragAfter(t){e.DD._dragElements.forEach(((i,s)=>{"stopped"===i.dragStatus&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:t},!0),"dragging"!==i.dragStatus&&e.DD._dragElements.delete(s)}))}},s.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))},9861:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const s=i(1483),a=i(950),r="get",n="set";e.Factory={addGetterSetter(t,i,s,a,r){e.Factory.addGetter(t,i,s),e.Factory.addSetter(t,i,a,r),e.Factory.addOverloadedGetterSetter(t,i)},addGetter(t,e,i){var a=r+s.Util._capitalize(e);t.prototype[a]=t.prototype[a]||function(){const t=this.attrs[e];return void 0===t?i:t}},addSetter(t,i,a,r){var o=n+s.Util._capitalize(i);t.prototype[o]||e.Factory.overWriteSetter(t,i,a,r)},overWriteSetter(t,e,i,a){var r=n+s.Util._capitalize(e);t.prototype[r]=function(t){return i&&void 0!==t&&null!==t&&(t=i.call(this,t,e)),this._setAttr(e,t),a&&a.call(this),this}},addComponentsGetterSetter(t,i,o,l,h){const d=o.length,c=s.Util._capitalize,u=r+c(i),p=n+c(i);t.prototype[u]=function(){const t={};for(let e=0;e<d;e++){const s=o[e];t[s]=this.getAttr(i+c(s))}return t};const g=(0,a.getComponentValidator)(o);t.prototype[p]=function(t){const e=this.attrs[i];l&&(t=l.call(this,t,i)),g&&g.call(this,t,i);for(const s in t)t.hasOwnProperty(s)&&this._setAttr(i+c(s),t[s]);return t||o.forEach((t=>{this._setAttr(i+c(t),void 0)})),this._fireChangeEvent(i,e,t),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(t,i)},addOverloadedGetterSetter(t,e){var i=s.Util._capitalize(e),a=n+i,o=r+i;t.prototype[e]=function(){return arguments.length?(this[a](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(t,i,a,n){s.Util.error("Adding deprecated "+i);const o=r+s.Util._capitalize(i),l=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[o]=function(){s.Util.error(l);const t=this.attrs[i];return void 0===t?a:t},e.Factory.addSetter(t,i,n,(function(){s.Util.error(l)})),e.Factory.addOverloadedGetterSetter(t,i)},backCompat(t,e){s.Util.each(e,(function(e,i){const a=t.prototype[i],o=r+s.Util._capitalize(e),l=n+s.Util._capitalize(e);function h(){a.apply(this,arguments),s.Util.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[e]=h,t.prototype[o]=h,t.prototype[l]=h}))},afterSetFilter(){this._filterUpToDate=!1}}},338:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.FastLayer=void 0;const s=i(1483),a=i(7114),r=i(5640);class n extends a.Layer{constructor(t){super(t),this.listening(!1),s.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}e.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n)},5640:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const s=Math.PI/180;function a(){return"undefined"!==typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}e.glob="undefined"!==typeof i.g?i.g:"undefined"!==typeof window?window:"undefined"!==typeof WorkerGlobalScope?self:{},e.Konva={_global:e.glob,version:"9.3.19",isBrowser:a(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return e.Konva.angleDeg?t*s:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!==typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva["DD"].isDragging},isTransforming(){var t;return null===(t=e.Konva["Transformer"])||void 0===t?void 0:t.isTransforming()},isDragReady(){return!!e.Konva["DD"].node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(t){e.glob.Konva=t}};const r=t=>{e.Konva[t.prototype.getClassName()]=t};e._registerNode=r,e.Konva._injectGlobal(e.Konva)},762:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;const s=i(1483),a=i(7590),r=i(5640);class n extends a.Container{_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&s.Util.throw("You may only add groups and shapes to groups.")}}e.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n)},7114:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=void 0;const s=i(1483),a=i(7590),r=i(1548),n=i(9861),o=i(9415),l=i(950),h=i(4318),d=i(5640),c="#",u="beforeDraw",p="draw",g=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=g.length;class f extends a.Container{constructor(t){super(t),this.canvas=new o.SceneCanvas,this.hitCanvas=new o.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){const t=this.canvas._canvas;return t.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){const t=r.Node.prototype.moveUp.call(this);if(!t)return!1;const e=this.getStage();return!(!e||!e.content)&&(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),t&&t.parentNode&&s.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){const e=t.getType();"Group"!==e&&"Shape"!==e&&s.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){s.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){s.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,s.Util.requestAnimFrame((()=>{this.draw(),this._waitingForDraw=!1}))),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let e=1,i=!1;while(1){for(let s=0;s<m;s++){const a=g[s],r=this._getIntersection({x:t.x+a.x*e,y:t.y+a.y*e}),n=r.shape;if(n)return n;if(i=!!r.antialiased,!r.antialiased)break}if(!i)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,a=i[3];if(255===a){const t=s.Util._rgbToHex(i[0],i[1],i[2]),e=h.shapes[c+t];return e?{shape:e}:{antialiased:!0}}return a>0?{antialiased:!0}:{}}drawScene(t,e){const i=this.getLayer(),s=t||i&&i.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),a.Container.prototype.drawScene.call(this,s,e),this._fire(p,{node:this}),this}drawHit(t,e){const i=this.getLayer(),s=t||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),a.Container.prototype.drawHit.call(this,s,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return s.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent["content"])return;const t=this.parent,e=!!this.hitCanvas._canvas.parentNode;e?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return s.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}e.Layer=f,f.prototype.nodeType="Layer",(0,d._registerNode)(f),n.Factory.addGetterSetter(f,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(f,"clearBeforeDraw",!0),n.Factory.addGetterSetter(f,"hitGraphEnabled",!0,(0,l.getBooleanValidator)())},1548:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;const s=i(1483),a=i(9861),r=i(9415),n=i(5640),o=i(9485),l=i(950),h="absoluteOpacity",d="allEventListeners",c="absoluteTransform",u="absoluteScale",p="canvas",g="Change",m="children",f="konva",y="listening",v="mouseenter",b="mouseleave",_="set",w="Shape",C=" ",A="stage",S="transform",x="Stage",k="visible",L=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(C);let M=1;class E{constructor(t){this._id=M++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==S&&t!==c||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){let i=this._cache.get(t);const s=t===S||t===c,a=void 0===i||s&&!0===i.dirty;return a&&(i=e.call(this),this._cache.set(t,i)),i}_calculate(t,e,i){if(!this._attachedDepsListeners.get(t)){const i=e.map((t=>t+"Change.konva")).join(C);this.on(i,(()=>{this._clearCache(t)})),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,i)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:t,filter:e,hit:i}=this._cache.get(p);s.Util.releaseCanvas(t,e,i),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const e=t||{};let i={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let a=Math.ceil(e.width||i.width),n=Math.ceil(e.height||i.height),o=e.pixelRatio,l=void 0===e.x?Math.floor(i.x):e.x,d=void 0===e.y?Math.floor(i.y):e.y,c=e.offset||0,g=e.drawBorder||!1,m=e.hitCanvasPixelRatio||1;if(!a||!n)return void s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");const f=Math.abs(Math.round(i.x)-l)>.5?1:0,y=Math.abs(Math.round(i.y)-d)>.5?1:0;a+=2*c+f,n+=2*c+y,l-=c,d-=c;const v=new r.SceneCanvas({pixelRatio:o,width:a,height:n}),b=new r.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),_=new r.HitCanvas({pixelRatio:m,width:a,height:n}),w=v.getContext(),C=_.getContext();return _.isCache=!0,v.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(v.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),w.save(),C.save(),w.translate(-l,-d),C.translate(-l,-d),this._isUnderCache=!0,this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(u),this.drawScene(v,this),this.drawHit(_,this),this._isUnderCache=!1,w.restore(),C.restore(),g&&(w.save(),w.beginPath(),w.rect(0,0,a,n),w.closePath(),w.setAttr("strokeStyle","red"),w.setAttr("lineWidth",5),w.stroke(),w.restore()),this._cache.set(p,{scene:v,filter:b,hit:_,x:l,y:d}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){const i=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,a=1/0,r=-1/0,n=-1/0;const o=this.getAbsoluteTransform(e);return i.forEach((function(t){const e=o.point(t);void 0===s&&(s=r=e.x,a=n=e.y),s=Math.min(s,e.x),a=Math.min(a,e.y),r=Math.max(r,e.x),n=Math.max(n,e.y)})),{x:s,y:a,width:r-s,height:n-a}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;t.drawImage(i._canvas,0,0,i.width/s,i.height/s),t.restore()}_drawCachedHitCanvas(t){const e=this._getCanvasCache(),i=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t,e,i,a,r=this.filters(),n=this._getCanvasCache(),o=n.scene,l=n.filter,h=l.getContext();if(r){if(!this._filterUpToDate){const n=o.pixelRatio;l.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=r.length,h.clear(),h.drawImage(o._canvas,0,0,o.getWidth()/n,o.getHeight()/n),e=h.getImageData(0,0,l.getWidth(),l.getHeight()),i=0;i<t;i++)a=r[i],"function"===typeof a?(a.call(this,e),h.putImageData(e,0,0)):s.Util.error("Filter should be type of function, but got "+typeof a+" instead. Please check correct filters")}catch(d){s.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return l}return o}on(t,e){if(this._cache&&this._cache.delete(d),3===arguments.length)return this._delegate.apply(this,arguments);let i,s,a,r,n,o=t.split(C),l=o.length;for(i=0;i<l;i++)s=o[i],a=s.split("."),r=a[0],n=a[1]||"",this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:n,handler:e});return this}off(t,e){let i,s,a,r,n,o,l=(t||"").split(C),h=l.length;if(this._cache&&this._cache.delete(d),!t)for(s in this.eventListeners)this._off(s);for(i=0;i<h;i++)if(a=l[i],r=a.split("."),n=r[0],o=r[1],n)this.eventListeners[n]&&this._off(n,o,e);else for(s in this.eventListeners)this._off(s,o,e);return this}dispatchEvent(t){const e={target:this,type:t.type,evt:t};return this.fire(t.type,e),this}addEventListener(t,e){return this.on(t,(function(t){e.call(this,t.evt)})),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,i){const a=this;this.on(t,(function(t){const r=t.target.findAncestors(e,!0,a);for(let e=0;e<r.length;e++)t=s.Util.cloneObject(t),t.currentTarget=r[e],i.call(r[e],t)}))}remove(){return this.isDragging()&&this.stopDrag(),o.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(k),this._clearSelfAndDescendantCache(y)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const e="get"+s.Util._capitalize(t);return s.Util._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){let t=this.getParent(),e=[];while(t)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges((()=>{let e,i;if(!t)return this;for(e in t)e!==m&&(i=_+s.Util._capitalize(e),s.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]))})),this}isListening(){return this._getCache(y,this._isListening)}_isListening(t){const e=this.listening();if(!e)return!1;const i=this.getParent();return!i||i===t||this===t||i._isListening(t)}isVisible(){return this._getCache(k,this._isVisible)}_isVisible(t){const e=this.visible();if(!e)return!1;const i=this.getParent();return!i||i===t||this===t||i._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);const i=this.getLayer();let s=!1;o.DD._dragElements.forEach((t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===i)&&(s=!0)}));const a=!e&&!n.Konva.hitOnDragEnabled&&(s||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t,e,i,s,a=this.getDepth(),r=this,n=0;function o(l){for(t=[],e=l.length,i=0;i<e;i++)s=l[i],n++,s.nodeType!==w&&(t=t.concat(s.getChildren().slice())),s._id===r._id&&(i=e);t.length>0&&t[0].getDepth()<=a&&o(t)}const l=this.getStage();return r.nodeType!==x&&l&&o(l.getChildren()),n}getDepth(){let t=0,e=this.parent;while(e)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(S),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges((()=>{this.x(t.x),this.y(t.y)})),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const e=t.getPointerPosition();if(!e)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(e)}getAbsolutePosition(t){let e=!1,i=this.parent;while(i){if(i.isCached()){e=!0;break}i=i.parent}e&&!t&&(t=!0);const a=this.getAbsoluteTransform(t).getMatrix(),r=new s.Transform,n=this.offset();return r.m=a.slice(),r.translate(n.x,n.y),r.getTranslation()}setAbsolutePosition(t){const{x:e,y:i,...s}=this._clearTransform();this.attrs.x=e,this.attrs.y=i,this._clearCache(S);const a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(t.x,t.y),t={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(S),this._clearSelfAndDescendantCache(c),this}_setTransform(t){let e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let e=t.x,i=t.y,s=this.x(),a=this.y();return void 0!==e&&(s+=e),void 0!==i&&(a+=i),this.setPosition({x:s,y:a}),this}_eachAncestorReverse(t,e){let i,s,a=[],r=this.getParent();if(!e||e._id!==this._id){a.unshift(this);while(r&&(!e||r._id!==e._id))a.unshift(r),r=r.parent;for(i=a.length,s=0;s<i;s++)t(a[s])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1&&(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,e=this.parent.getChildren().length;return t<e-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&s.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(h,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t,e,i,a,r,n=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(t in n)e=n[t],r=s.Util.isObject(e)&&!s.Util._isPlainObject(e)&&!s.Util._isArray(e),r||(i="function"===typeof this[t]&&this[t],delete n[t],a=i?i.call(this):null,n[t]=e,a!==e&&(o.attrs[t]=e));return s.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,i){const s=[];e&&this._isMatch(t)&&s.push(this);let a=this.parent;while(a){if(a===i)return s;a._isMatch(t)&&s.push(a),a=a.parent}return s}isAncestorOf(t){return!1}findAncestor(t,e,i){return this.findAncestors(t,e,i)[0]}_isMatch(t){if(!t)return!1;if("function"===typeof t)return t(this);let e,i,a=t.replace(/ /g,"").split(","),r=a.length;for(e=0;e<r;e++)if(i=a[e],s.Util.isValidSelector(i)||(s.Util.warn('Selector "'+i+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),"#"===i.charAt(0)){if(this.id()===i.slice(1))return!0}else if("."===i.charAt(0)){if(this.hasName(i.slice(1)))return!0}else if(this.className===i||this.nodeType===i)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(A,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,e={},i){return e.target=e.target||this,i?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let e;if(t)return e=new s.Transform,this._eachAncestorReverse((function(t){const i=t.transformsEnabled();"all"===i?e.multiply(t.getTransform()):"position"===i&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())}),t),e;{e=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();const t=this.transformsEnabled();if("all"===t)e.multiply(this.getTransform());else if("position"===t){const t=this.attrs.x||0,i=this.attrs.y||0,s=this.attrs.offsetX||0,a=this.attrs.offsetY||0;e.translate(t-s,i-a)}return e.dirty=!1,e}}getAbsoluteScale(t){let e=this;while(e)e._isUnderCache&&(t=e),e=e.getParent();const i=this.getAbsoluteTransform(t),s=i.decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(S,this._getTransform)}_getTransform(){var t,e;const i=this._cache.get(S)||new s.Transform;i.reset();const a=this.x(),r=this.y(),o=n.Konva.getAngle(this.rotation()),l=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,h=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,d=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return 0===a&&0===r||i.translate(a,r),0!==o&&i.rotate(o),0===d&&0===c||i.skew(d,c),1===l&&1===h||i.scale(l,h),0===u&&0===p||i.translate(-1*u,-1*p),i.dirty=!1,i}clone(t){let e,i,a,r,n,o=s.Util.cloneObject(this.attrs);for(e in t)o[e]=t[e];const l=new this.constructor(o);for(e in this.eventListeners)for(i=this.eventListeners[e],a=i.length,r=0;r<a;r++)n=i[r],n.name.indexOf(f)<0&&(l.eventListeners[e]||(l.eventListeners[e]=[]),l.eventListeners[e].push(n));return l}_toKonvaCanvas(t){t=t||{};const e=this.getClientRect(),i=this.getStage(),s=void 0!==t.x?t.x:Math.floor(e.x),a=void 0!==t.y?t.y:Math.floor(e.y),n=t.pixelRatio||1,o=new r.SceneCanvas({width:t.width||Math.ceil(e.width)||(i?i.width():0),height:t.height||Math.ceil(e.height)||(i?i.height():0),pixelRatio:n}),l=o.getContext(),h=new r.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(s),height:o.height/o.pixelRatio+Math.abs(a),pixelRatio:o.pixelRatio});return!1===t.imageSmoothingEnabled&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||a)&&l.translate(-1*s,-1*a),this.drawScene(o,void 0,h),l.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const e=t.mimeType||null,i=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(e,i);return t.callback&&t.callback(s),s}toImage(t){return new Promise(((e,i)=>{try{const i=null===t||void 0===t?void 0:t.callback;i&&delete t.callback,s.Util._urlToImage(this.toDataURL(t),(function(t){e(t),null===i||void 0===i||i(t)}))}catch(a){i(a)}}))}toBlob(t){return new Promise(((e,i)=>{try{const i=null===t||void 0===t?void 0:t.callback;i&&delete t.callback,this.toCanvas(t).toBlob((t=>{e(t),null===i||void 0===i||i(t)}),null===t||void 0===t?void 0:t.mimeType,null===t||void 0===t?void 0:t.quality)}catch(s){i(s)}}))}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(t,e,i){let s,a,r,n=this.eventListeners[t];for(s=0;s<n.length;s++)if(a=n[s].name,r=n[s].handler,("konva"!==a||"konva"===e)&&(!e||a===e)&&(!i||i===r)){if(n.splice(s,1),0===n.length){delete this.eventListeners[t];break}s--}}_fireChangeEvent(t,e,i){this._fire(t+g,{oldVal:e,newVal:i})}addName(t){if(!this.hasName(t)){const e=this.name(),i=e?e+" "+t:t;this.name(i)}return this}hasName(t){if(!t)return!1;const e=this.name();if(!e)return!1;const i=(e||"").split(/\s/g);return-1!==i.indexOf(t)}removeName(t){const e=(this.name()||"").split(/\s/g),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.name(e.join(" "))),this}setAttr(t,e){const i=this[_+s.Util._capitalize(t)];return s.Util._isFunction(i)?i.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();null===t||void 0===t||t.batchDraw()}}_setAttr(t,e){const i=this.attrs[t];(i!==e||s.Util.isObject(e))&&(void 0===e||null===e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,i,e),this._requestDraw())}_setComponentAttr(t,e,i){let s;void 0!==i&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,s,i))}_fireAndBubble(t,e,i){e&&this.nodeType===w&&(e.target=this);const s=(t===v||t===b)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||"Stage"===this.nodeType&&!i);if(!s){this._fire(t,e);const s=(t===v||t===b)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!s&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){var e,i,s;const a=null!==(e=this._cache.get(d))&&void 0!==e?e:{};let r=null===a||void 0===a?void 0:a[t];if(void 0===r){r=[];let e=Object.getPrototypeOf(this);while(e){const a=null!==(s=null===(i=e.eventListeners)||void 0===i?void 0:i[t])&&void 0!==s?s:[];r.push(...a),e=Object.getPrototypeOf(e)}a[t]=r,this._cache.set(d,a)}return r}_fire(t,e){e=e||{},e.currentTarget=this,e.type=t;const i=this._getProtoListeners(t);if(i)for(var s=0;s<i.length;s++)i[s].handler.call(this,e);const a=this.eventListeners[t];if(a)for(s=0;s<a.length;s++)a[s].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const e=t?t.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const a=i._getPointerById(e)||i._changedPointerPositions[0]||s;o.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-s.x,y:a.y-s.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){o.DD._dragElements.has(this._id)||this._createDragElement(t);const i=o.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const i=this.getStage()._getPointerById(e.pointerId);if(!i)return;let a={x:i.x-e.offset.x,y:i.y-e.offset.y};const r=this.dragBoundFunc();if(void 0!==r){const e=r.call(this,a,t);e?a=e:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===a.x&&this._lastPos.y===a.y||(this.setAbsolutePosition(a),this._requestDraw()),this._lastPos=a}stopDrag(t){const e=o.DD._dragElements.get(this._id);e&&(e.dragStatus="stopped"),o.DD._endDragBefore(t),o.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=o.DD._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(t){const e=void 0!==t.evt["button"],i=!e||n.Konva.dragButtons.indexOf(t.evt["button"])>=0;if(!i)return;if(this.isDragging())return;let s=!1;o.DD._dragElements.forEach((t=>{this.isAncestorOf(t.node)&&(s=!0)})),s||this._createDragElement(t)}))}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();const t=this.getStage();if(!t)return;const e=o.DD._dragElements.get(this._id),i=e&&"dragging"===e.dragStatus,s=e&&"ready"===e.dragStatus;i?this.stopDrag():s&&o.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const i={x:-t.x,y:-t.y,width:e.width()+2*t.x,height:e.height()+2*t.y};return s.Util.haveIntersection(i,this.getClientRect())}static create(t,e){return s.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){let i,a,r,o=E.prototype.getClassName.call(t),l=t.children;e&&(t.attrs.container=e),n.Konva[o]||(s.Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");const h=n.Konva[o];if(i=new h(t.attrs),l)for(a=l.length,r=0;r<a;r++)i.add(E._createNode(l[r]));return i}}e.Node=E,E.prototype.nodeType="Node",E.prototype._attrsAffectingSize=[],E.prototype.eventListeners={},E.prototype.on.call(E.prototype,L,(function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(S),this._clearSelfAndDescendantCache(c))})),E.prototype.on.call(E.prototype,"visibleChange.konva",(function(){this._clearSelfAndDescendantCache(k)})),E.prototype.on.call(E.prototype,"listeningChange.konva",(function(){this._clearSelfAndDescendantCache(y)})),E.prototype.on.call(E.prototype,"opacityChange.konva",(function(){this._clearSelfAndDescendantCache(h)}));const T=a.Factory.addGetterSetter;T(E,"zIndex"),T(E,"absolutePosition"),T(E,"position"),T(E,"x",0,(0,l.getNumberValidator)()),T(E,"y",0,(0,l.getNumberValidator)()),T(E,"globalCompositeOperation","source-over",(0,l.getStringValidator)()),T(E,"opacity",1,(0,l.getNumberValidator)()),T(E,"name","",(0,l.getStringValidator)()),T(E,"id","",(0,l.getStringValidator)()),T(E,"rotation",0,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(E,"scale",["x","y"]),T(E,"scaleX",1,(0,l.getNumberValidator)()),T(E,"scaleY",1,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(E,"skew",["x","y"]),T(E,"skewX",0,(0,l.getNumberValidator)()),T(E,"skewY",0,(0,l.getNumberValidator)()),a.Factory.addComponentsGetterSetter(E,"offset",["x","y"]),T(E,"offsetX",0,(0,l.getNumberValidator)()),T(E,"offsetY",0,(0,l.getNumberValidator)()),T(E,"dragDistance",void 0,(0,l.getNumberValidator)()),T(E,"width",0,(0,l.getNumberValidator)()),T(E,"height",0,(0,l.getNumberValidator)()),T(E,"listening",!0,(0,l.getBooleanValidator)()),T(E,"preventDefault",!0,(0,l.getBooleanValidator)()),T(E,"filters",void 0,(function(t){return this._filterUpToDate=!1,t})),T(E,"visible",!0,(0,l.getBooleanValidator)()),T(E,"transformsEnabled","all",(0,l.getStringValidator)()),T(E,"size"),T(E,"dragBoundFunc"),T(E,"draggable",!1,(0,l.getBooleanValidator)()),a.Factory.backCompat(E,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},1575:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.getCapturedShape=n,e.createEvent=o,e.hasPointerCapture=l,e.setPointerCapture=h,e.releaseCapture=d;const s=i(5640),a=new Map,r=void 0!==s.Konva._global["PointerEvent"];function n(t){return a.get(t)}function o(t){return{evt:t,pointerId:t.pointerId}}function l(t,e){return a.get(t)===e}function h(t,e){d(t);const i=e.getStage();i&&(a.set(t,e),r&&e._fire("gotpointercapture",o(new PointerEvent("gotpointercapture"))))}function d(t,e){const i=a.get(t);if(!i)return;const s=i.getStage();s&&s.content,a.delete(t),r&&i._fire("lostpointercapture",o(new PointerEvent("lostpointercapture")))}},4318:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const s=i(5640),a=i(1483),r=i(9861),n=i(1548),o=i(950),l=i(5640),h=i(1575),d="hasShadow",c="shadowRGBA",u="patternImage",p="linearGradient",g="radialGradient";let m;function f(){return m||(m=a.Util.createCanvasElement().getContext("2d"),m)}function y(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function v(t){t.stroke()}function b(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function _(t){t.stroke()}function w(){this._clearCache(d)}function C(){this._clearCache(c)}function A(){this._clearCache(u)}function S(){this._clearCache(p)}function x(){this._clearCache(g)}e.shapes={};class k extends n.Node{constructor(t){let i;super(t);while(1)if(i=a.Util.getRandomColor(),i&&!(i in e.shapes))break;this.colorKey=i,e.shapes[i]=this}getContext(){return a.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return a.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this["_sceneFunc"]}getHitFunc(){return this.attrs.hitFunc||this["_hitFunc"]}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(u,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=f(),e=t.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new a.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(s.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=t.getMatrix(),r="undefined"===typeof DOMMatrix?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);e.setTransform(r)}return e}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const e=f(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),a=e.createLinearGradient(i.x,i.y,s.x,s.y);for(let r=0;r<t.length;r+=2)a.addColorStop(t[r],t[r+1]);return a}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const e=f(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),a=e.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let r=0;r<t.length;r+=2)a.addColorStop(t[r],t[r+1]);return a}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=a.Util.colorToRGBA(this.shadowColor());return t?"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],(()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],(()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const e=this.getStage();if(!e)return!1;const i=e.bufferHitCanvas;i.getContext().clear(),this.drawHit(i,void 0,!0);const s=i.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data;return s[3]>0}destroy(){return n.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;const i=null===(e=this.attrs.perfectDrawEnabled)||void 0===e||e;if(!i)return!1;const s=t||this.hasFill(),a=this.hasStroke(),r=1!==this.getAbsoluteOpacity();if(s&&a&&r)return!0;const n=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(s&&a&&n&&o)}setStrokeHitEnabled(t){a.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let e=!1,i=this.getParent();while(i){if(i.isCached()){e=!0;break}i=i.getParent()}const s=t.skipTransform,a=t.relativeTo||e&&this.getStage()||void 0,r=this.getSelfRect(),n=!t.skipStroke&&this.hasStroke(),o=n&&this.strokeWidth()||0,l=r.width+o,h=r.height+o,d=!t.skipShadow&&this.hasShadow(),c=d?this.shadowOffsetX():0,u=d?this.shadowOffsetY():0,p=l+Math.abs(c),g=h+Math.abs(u),m=d&&this.shadowBlur()||0,f=p+2*m,y=g+2*m,v={width:f,height:y,x:-(o/2+m)+Math.min(c,0)+r.x,y:-(o/2+m)+Math.min(u,0)+r.y};return s?v:this._transformedRect(v,a)}drawScene(t,e,i){const s=this.getLayer();let a,r,n=t||s.getCanvas(),o=n.getContext(),l=this._getCanvasCache(),h=this.getSceneFunc(),d=this.hasShadow();const c=n.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(l){o.save();const t=this.getAbsoluteTransform(e).getMatrix();return o.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!h)return this;if(o.save(),this._useBufferCanvas()&&!c){a=this.getStage();const t=i||a.bufferCanvas;r=t.getContext(),r.clear(),r.save(),r._applyLineJoin(this);var p=this.getAbsoluteTransform(e).getMatrix();r.transform(p[0],p[1],p[2],p[3],p[4],p[5]),h.call(this,r,this),r.restore();const s=t.pixelRatio;d&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(t._canvas,0,0,t.width/s,t.height/s)}else{if(o._applyLineJoin(this),!u){p=this.getAbsoluteTransform(e).getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}d&&o._applyShadow(this),h.call(this,o,this)}return o.restore(),this}drawHit(t,e,i=!1){if(!this.shouldDrawHit(e,i))return this;const s=this.getLayer(),r=t||s.hitCanvas,n=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||a.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){n.save();const t=this.getAbsoluteTransform(e).getMatrix();return n.transform(t[0],t[1],t[2],t[3],t[4],t[5]),this._drawCachedHitCanvas(n),n.restore(),this}if(!o)return this;n.save(),n._applyLineJoin(this);const d=this===e;if(!d){const t=this.getAbsoluteTransform(e).getMatrix();n.transform(t[0],t[1],t[2],t[3],t[4],t[5])}return o.call(this,n,this),n.restore(),this}drawHitFromCache(t=0){const e=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=e.hit,r=s.getContext(),n=s.getWidth(),o=s.getHeight();r.clear(),r.drawImage(i._canvas,0,0,n,o);try{const e=r.getImageData(0,0,n,o),i=e.data,s=i.length,l=a.Util._hexToRgb(this.colorKey);for(let a=0;a<s;a+=4){const e=i[a+3];e>t?(i[a]=l.r,i[a+1]=l.g,i[a+2]=l.b,i[a+3]=255):i[a+3]=0}r.putImageData(e,0,0)}catch(l){a.Util.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(t){return h.hasPointerCapture(t,this)}setPointerCapture(t){h.setPointerCapture(t,this)}releaseCapture(t){h.releaseCapture(t,this)}}e.Shape=k,k.prototype._fillFunc=y,k.prototype._strokeFunc=v,k.prototype._fillFuncHit=b,k.prototype._strokeFuncHit=_,k.prototype._centroid=!1,k.prototype.nodeType="Shape",(0,l._registerNode)(k),k.prototype.eventListeners={},k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w),k.prototype.on.call(k.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",A),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",S),k.prototype.on.call(k.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",x),r.Factory.addGetterSetter(k,"stroke",void 0,(0,o.getStringOrGradientValidator)()),r.Factory.addGetterSetter(k,"strokeWidth",2,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillAfterStrokeEnabled",!1),r.Factory.addGetterSetter(k,"hitStrokeWidth","auto",(0,o.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(k,"strokeHitEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(k,"perfectDrawEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(k,"shadowForStrokeEnabled",!0,(0,o.getBooleanValidator)()),r.Factory.addGetterSetter(k,"lineJoin"),r.Factory.addGetterSetter(k,"lineCap"),r.Factory.addGetterSetter(k,"sceneFunc"),r.Factory.addGetterSetter(k,"hitFunc"),r.Factory.addGetterSetter(k,"dash"),r.Factory.addGetterSetter(k,"dashOffset",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"shadowColor",void 0,(0,o.getStringValidator)()),r.Factory.addGetterSetter(k,"shadowBlur",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"shadowOpacity",1,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(k,"shadowOffset",["x","y"]),r.Factory.addGetterSetter(k,"shadowOffsetX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"shadowOffsetY",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillPatternImage"),r.Factory.addGetterSetter(k,"fill",void 0,(0,o.getStringOrGradientValidator)()),r.Factory.addGetterSetter(k,"fillPatternX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillPatternY",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillLinearGradientColorStops"),r.Factory.addGetterSetter(k,"strokeLinearGradientColorStops"),r.Factory.addGetterSetter(k,"fillRadialGradientStartRadius",0),r.Factory.addGetterSetter(k,"fillRadialGradientEndRadius",0),r.Factory.addGetterSetter(k,"fillRadialGradientColorStops"),r.Factory.addGetterSetter(k,"fillPatternRepeat","repeat"),r.Factory.addGetterSetter(k,"fillEnabled",!0),r.Factory.addGetterSetter(k,"strokeEnabled",!0),r.Factory.addGetterSetter(k,"shadowEnabled",!0),r.Factory.addGetterSetter(k,"dashEnabled",!0),r.Factory.addGetterSetter(k,"strokeScaleEnabled",!0),r.Factory.addGetterSetter(k,"fillPriority","color"),r.Factory.addComponentsGetterSetter(k,"fillPatternOffset",["x","y"]),r.Factory.addGetterSetter(k,"fillPatternOffsetX",0,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillPatternOffsetY",0,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(k,"fillPatternScale",["x","y"]),r.Factory.addGetterSetter(k,"fillPatternScaleX",1,(0,o.getNumberValidator)()),r.Factory.addGetterSetter(k,"fillPatternScaleY",1,(0,o.getNumberValidator)()),r.Factory.addComponentsGetterSetter(k,"fillLinearGradientStartPoint",["x","y"]),r.Factory.addComponentsGetterSetter(k,"strokeLinearGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(k,"fillLinearGradientStartPointX",0),r.Factory.addGetterSetter(k,"strokeLinearGradientStartPointX",0),r.Factory.addGetterSetter(k,"fillLinearGradientStartPointY",0),r.Factory.addGetterSetter(k,"strokeLinearGradientStartPointY",0),r.Factory.addComponentsGetterSetter(k,"fillLinearGradientEndPoint",["x","y"]),r.Factory.addComponentsGetterSetter(k,"strokeLinearGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(k,"fillLinearGradientEndPointX",0),r.Factory.addGetterSetter(k,"strokeLinearGradientEndPointX",0),r.Factory.addGetterSetter(k,"fillLinearGradientEndPointY",0),r.Factory.addGetterSetter(k,"strokeLinearGradientEndPointY",0),r.Factory.addComponentsGetterSetter(k,"fillRadialGradientStartPoint",["x","y"]),r.Factory.addGetterSetter(k,"fillRadialGradientStartPointX",0),r.Factory.addGetterSetter(k,"fillRadialGradientStartPointY",0),r.Factory.addComponentsGetterSetter(k,"fillRadialGradientEndPoint",["x","y"]),r.Factory.addGetterSetter(k,"fillRadialGradientEndPointX",0),r.Factory.addGetterSetter(k,"fillRadialGradientEndPointY",0),r.Factory.addGetterSetter(k,"fillPatternRotation",0),r.Factory.addGetterSetter(k,"fillRule",void 0,(0,o.getStringValidator)()),r.Factory.backCompat(k,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},5086:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const s=i(1483),a=i(9861),r=i(7590),n=i(5640),o=i(9415),l=i(9485),h=i(5640),d=i(1575),c="Stage",u="string",p="px",g="mouseout",m="mouseleave",f="mouseover",y="mouseenter",v="mousemove",b="mousedown",_="mouseup",w="pointermove",C="pointerdown",A="pointerup",S="pointercancel",x="lostpointercapture",k="pointerout",L="pointerleave",M="pointerover",E="pointerenter",T="contextmenu",D="touchstart",F="touchend",P="touchmove",I="touchcancel",N="wheel",R=5,O=[[y,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[_,"_pointerup"],[m,"_pointerleave"],[D,"_pointerdown"],[P,"_pointermove"],[F,"_pointerup"],[I,"_pointercancel"],[f,"_pointerover"],[N,"_wheel"],[T,"_contextmenu"],[C,"_pointerdown"],[w,"_pointermove"],[A,"_pointerup"],[S,"_pointercancel"],[x,"_lostpointercapture"]],B={mouse:{[k]:g,[L]:m,[M]:f,[E]:y,[w]:v,[C]:b,[A]:_,[S]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[k]:"touchout",[L]:"touchleave",[M]:"touchover",[E]:"touchenter",[w]:P,[C]:D,[A]:F,[S]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[k]:k,[L]:L,[M]:M,[E]:E,[w]:w,[C]:C,[A]:A,[S]:S,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},G=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",U=t=>{const e=G(t);return"pointer"===e?n.Konva.pointerEventsEnabled&&B.pointer:"touch"===e?B.touch:"mouse"===e?B.mouse:void 0};function z(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&s.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const W="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class V extends r.Container{constructor(t){super(z(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(()=>{z(this.attrs)})),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),i="FastLayer"===t.getType(),a=e||i;a||s.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===u){if("."===t.charAt(0)){const e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var e;e="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(e)}if(!t)throw"Can not find container in document with id "+e}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,e=t.length;for(let i=0;i<e;i++)t[i].clear();return this}clone(t){return t||(t={}),t.container="undefined"!==typeof document&&document.createElement("div"),r.Container.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&s.Util._isInDocument(t)&&this.container().removeChild(t);const i=e.stages.indexOf(this);return i>-1&&e.stages.splice(i,1),s.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(s.Util.warn(W),null)}_getPointerById(t){return this._pointerPositions.find((e=>e.id===t))}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t=t||{},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const e=new o.SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),i=e.getContext()._context,s=this.children;return(t.x||t.y)&&i.translate(-1*t.x,-1*t.y),s.forEach((function(e){if(!e.isVisible())return;const s=e._toKonvaCanvas(t);i.drawImage(s._canvas,t.x,t.y,s.getWidth()/s.getPixelRatio(),s.getHeight()/s.getPixelRatio())})),e}getIntersection(t){if(!t)return null;const e=this.children,i=e.length,s=i-1;for(let a=s;a>=0;a--){const i=e[a].getIntersection(t);if(i)return i}return null}_resizeDOM(){const t=this.width(),e=this.height();this.content&&(this.content.style.width=t+p,this.content.style.height=e+p),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach((i=>{i.setSize({width:t,height:e}),i.draw()}))}add(t,...e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}super.add(t);const i=this.children.length;return i>R&&s.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),n.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return d.hasPointerCapture(t,this)}setPointerCapture(t){d.setPointerCapture(t,this)}releaseCapture(t){d.releaseCapture(t,this)}getLayers(){return this.children}_bindContentEvents(){n.Konva.isBrowser&&O.forEach((([t,e])=>{this.content.addEventListener(t,(t=>{this[e](t)}),{passive:!1})}))}_pointerenter(t){this.setPointersPositions(t);const e=U(t.type);e&&this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=U(t.type);e&&this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=U(t.type),i=G(t.type);if(!e)return;this.setPointersPositions(t);const s=this._getTargetShape(i),a=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;s&&a?(s._fireAndBubble(e.pointerout,{evt:t}),s._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[i+"targetShape"]=null):a&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const e=U(t.type),i=G(t.type);if(!e)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach((a=>{const r=this.getIntersection(a);if(l.DD.justDragged=!1,n.Konva["_"+i+"ListenClick"]=!0,!r||!r.isListening())return void(this[i+"ClickStartShape"]=void 0);n.Konva.capturePointerEventsEnabled&&r.setPointerCapture(a.id),this[i+"ClickStartShape"]=r,r._fireAndBubble(e.pointerdown,{evt:t,pointerId:a.id}),s=!0;const o=t.type.indexOf("touch")>=0;r.preventDefault()&&t.cancelable&&o&&t.preventDefault()})),s||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const e=U(t.type),i=G(t.type);if(!e)return;n.Konva.isDragging()&&l.DD.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t);const s=!(n.Konva.isDragging()||n.Konva.isTransforming())||n.Konva.hitOnDragEnabled;if(!s)return;const a={};let r=!1;const o=this._getTargetShape(i);this._changedPointerPositions.forEach((s=>{const n=d.getCapturedShape(s.id)||this.getIntersection(s),l=s.id,h={evt:t,pointerId:l},c=o!==n;if(c&&o&&(o._fireAndBubble(e.pointerout,{...h},n),o._fireAndBubble(e.pointerleave,{...h},n)),n){if(a[n._id])return;a[n._id]=!0}n&&n.isListening()?(r=!0,c&&(n._fireAndBubble(e.pointerover,{...h},o),n._fireAndBubble(e.pointerenter,{...h},o),this[i+"targetShape"]=n),n._fireAndBubble(e.pointermove,{...h})):o&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:l}),this[i+"targetShape"]=null)})),r||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=U(t.type),i=G(t.type);if(!e)return;this.setPointersPositions(t);const s=this[i+"ClickStartShape"],a=this[i+"ClickEndShape"],r={};let o=!1;this._changedPointerPositions.forEach((h=>{const c=d.getCapturedShape(h.id)||this.getIntersection(h);if(c){if(c.releaseCapture(h.id),r[c._id])return;r[c._id]=!0}const u=h.id,p={evt:t,pointerId:u};let g=!1;n.Konva["_"+i+"InDblClickWindow"]?(g=!0,clearTimeout(this[i+"DblTimeout"])):l.DD.justDragged||(n.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout((function(){n.Konva["_"+i+"InDblClickWindow"]=!1}),n.Konva.dblClickWindow),c&&c.isListening()?(o=!0,this[i+"ClickEndShape"]=c,c._fireAndBubble(e.pointerup,{...p}),n.Konva["_"+i+"ListenClick"]&&s&&s===c&&(c._fireAndBubble(e.pointerclick,{...p}),g&&a&&a===c&&c._fireAndBubble(e.pointerdblclick,{...p}))):(this[i+"ClickEndShape"]=null,n.Konva["_"+i+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:u}),g&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:u}))})),o||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),n.Konva["_"+i+"ListenClick"]=!1,t.cancelable&&"touch"!==i&&"pointer"!==i&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(T,{evt:t}):this._fire(T,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(N,{evt:t}):this._fire(N,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=d.getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(A,d.createEvent(t)),d.releaseCapture(t.pointerId)}_lostpointercapture(t){d.releaseCapture(t.pointerId)}setPointersPositions(t){const e=this._getContentPosition();let i=null,a=null;t=t||window.event,void 0!==t.touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,(t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})),Array.prototype.forEach.call(t.changedTouches||t.touches,(t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}))):(i=(t.clientX-e.left)/e.scaleX,a=(t.clientY-e.top)/e.scaleY,this.pointerPos={x:i,y:a},this._pointerPositions=[{x:i,y:a,id:s.Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:i,y:a,id:s.Util._getFirstPointerId(t)}])}_setPointerPosition(t){s.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!n.Konva.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return s.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach((function(t){t.batchDraw()})),this}}e.Stage=V,V.prototype.nodeType=c,(0,h._registerNode)(V),a.Factory.addGetterSetter(V,"container"),n.Konva.isBrowser&&document.addEventListener("visibilitychange",(()=>{e.stages.forEach((t=>{t.batchDraw()}))}))},5660:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const s=i(1483),a=i(7816),r=i(1548),n=i(5640),o={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=1,h=2,d=3,c=["fill","stroke","shadowColor"];let u=0;class p{constructor(t,e,i,s,a,r,n){this.prop=t,this.propFunc=e,this.begin=s,this._pos=s,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=n,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=a-this.begin,this.pause()}fire(t){const e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=h,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===h?this.setTime(t):this.state===d&&this.setTime(this.duration-t)}pause(){this.state=l,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class g{constructor(t){const i=this,r=t.node,l=r._id,h=t.easing||e.Easings.Linear,d=!!t.yoyo;let c,m;c="undefined"===typeof t.duration?.3:0===t.duration?.001:t.duration,this.node=r,this._id=u++;const f=r.getLayer()||(r instanceof n.Konva["Stage"]?r.getLayers():null);for(m in f||s.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new a.Animation((function(){i.tween.onEnterFrame()}),f),this.tween=new p(m,(function(t){i._tweenFunc(t)}),h,0,1,1e3*c,d),this._addListeners(),g.attrs[l]||(g.attrs[l]={}),g.attrs[l][this._id]||(g.attrs[l][this._id]={}),g.tweens[l]||(g.tweens[l]={}),t)void 0===o[m]&&this._addAttr(m,t[m]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,e){const i=this.node,a=i._id;let r,n,o,l,h;const d=g.tweens[a][t];d&&delete g.attrs[a][d][t];let u=i.getAttr(t);if(s.Util._isArray(e))if(r=[],n=Math.max(e.length,u.length),"points"===t&&e.length!==u.length&&(e.length>u.length?(l=u,u=s.Util._prepareArrayForTween(u,e,i.closed())):(o=e,e=s.Util._prepareArrayForTween(e,u,i.closed()))),0===t.indexOf("fill"))for(let c=0;c<n;c++)if(c%2===0)r.push(e[c]-u[c]);else{const t=s.Util.colorToRGBA(u[c]);h=s.Util.colorToRGBA(e[c]),u[c]=t,r.push({r:h.r-t.r,g:h.g-t.g,b:h.b-t.b,a:h.a-t.a})}else for(let s=0;s<n;s++)r.push(e[s]-u[s]);else-1!==c.indexOf(t)?(u=s.Util.colorToRGBA(u),h=s.Util.colorToRGBA(e),r={r:h.r-u.r,g:h.g-u.g,b:h.b-u.b,a:h.a-u.a}):r=e-u;g.attrs[a][this._id][t]={start:u,diff:r,end:e,trueEnd:o,trueStart:l},g.tweens[a][t]=this._id}_tweenFunc(t){const e=this.node,i=g.attrs[e._id][this._id];let a,r,n,o,l,h,d,u;for(a in i){if(r=i[a],n=r.start,o=r.diff,u=r.end,s.Util._isArray(n))if(l=[],d=Math.max(n.length,u.length),0===a.indexOf("fill"))for(h=0;h<d;h++)h%2===0?l.push((n[h]||0)+o[h]*t):l.push("rgba("+Math.round(n[h].r+o[h].r*t)+","+Math.round(n[h].g+o[h].g*t)+","+Math.round(n[h].b+o[h].b*t)+","+(n[h].a+o[h].a*t)+")");else for(h=0;h<d;h++)l.push((n[h]||0)+o[h]*t);else l=-1!==c.indexOf(a)?"rgba("+Math.round(n.r+o.r*t)+","+Math.round(n.g+o.g*t)+","+Math.round(n.b+o.b*t)+","+(n.a+o.a*t)+")":n+o*t;e.setAttr(a,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,e=g.attrs[t._id][this._id];e.points&&e.points.trueEnd&&t.setAttr("points",e.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,e=g.attrs[t._id][this._id];e.points&&e.points.trueStart&&t.points(e.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,e=this._id,i=g.tweens[t];this.pause();for(const s in i)delete g.tweens[t][s];delete g.attrs[t][e]}}e.Tween=g,g.attrs={},g.tweens={},r.Node.prototype.to=function(t){const e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};const i=new g(t);i.play()},e.Easings={BackEaseIn(t,e,i,s){const a=1.70158;return i*(t/=s)*t*((a+1)*t-a)+e},BackEaseOut(t,e,i,s){const a=1.70158;return i*((t=t/s-1)*t*((a+1)*t+a)+1)+e},BackEaseInOut(t,e,i,s){let a=1.70158;return(t/=s/2)<1?i/2*(t*t*((1+(a*=1.525))*t-a))+e:i/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+e},ElasticEaseIn(t,e,i,s,a,r){let n=0;return 0===t?e:1===(t/=s)?e+i:(r||(r=.3*s),!a||a<Math.abs(i)?(a=i,n=r/4):n=r/(2*Math.PI)*Math.asin(i/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/r)+e)},ElasticEaseOut(t,e,i,s,a,r){let n=0;return 0===t?e:1===(t/=s)?e+i:(r||(r=.3*s),!a||a<Math.abs(i)?(a=i,n=r/4):n=r/(2*Math.PI)*Math.asin(i/a),a*Math.pow(2,-10*t)*Math.sin((t*s-n)*(2*Math.PI)/r)+i+e)},ElasticEaseInOut(t,e,i,s,a,r){let n=0;return 0===t?e:2===(t/=s/2)?e+i:(r||(r=s*(.3*1.5)),!a||a<Math.abs(i)?(a=i,n=r/4):n=r/(2*Math.PI)*Math.asin(i/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/r)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*s-n)*(2*Math.PI)/r)*.5+i+e)},BounceEaseOut(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,i,s,a){return s-e.Easings.BounceEaseOut(a-t,0,s,a)+i},BounceEaseInOut(t,i,s,a){return t<a/2?.5*e.Easings.BounceEaseIn(2*t,0,s,a)+i:.5*e.Easings.BounceEaseOut(2*t-a,0,s,a)+.5*s+i},EaseIn(t,e,i,s){return i*(t/=s)*t+e},EaseOut(t,e,i,s){return-i*(t/=s)*(t-2)+e},EaseInOut(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,i,s){return i*(t/=s)*t*t*t*t+e},StrongEaseOut(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,i,s){return i*t/s+e}}},1483:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const s=i(5640);class a{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new a(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.m[0]*e+this.m[2]*i,a=this.m[1]*e+this.m[3]*i,r=this.m[0]*-i+this.m[2]*e,n=this.m[1]*-i+this.m[3]*e;return this.m[0]=s,this.m[1]=a,this.m[2]=r,this.m[3]=n,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){const i=this.m[0]+this.m[2]*e,s=this.m[1]+this.m[3]*e,a=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=s,this.m[2]=a,this.m[3]=r,this}multiply(t){const e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],a=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],n=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=a,this.m[4]=r,this.m[5]=n,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,s=-this.m[2]*t,a=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),n=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=s,this.m[3]=a,this.m[4]=r,this.m[5]=n,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],s=this.m[2],a=this.m[3],r=this.m[4],n=this.m[5],o=t*a-i*s,l={x:r,y:n,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=i){const e=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/e):-Math.acos(t/e),l.scaleX=e,l.scaleY=o/e,l.skewX=(t*s+i*a)/o,l.skewY=0}else if(0!=s||0!=a){const e=Math.sqrt(s*s+a*a);l.rotation=Math.PI/2-(a>0?Math.acos(-s/e):-Math.acos(s/e)),l.scaleX=o/e,l.scaleY=e,l.skewX=0,l.skewY=(t*s+i*a)/o}return l.rotation=e.Util._getRotation(l.rotation),l}}e.Transform=a;const r="[object Array]",n="[object Number]",o="[object String]",l="[object Boolean]",h=Math.PI/180,d=180/Math.PI,c="#",u="",p="0",g="Konva warning: ",m="Konva error: ",f="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const _="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)};e.Util={_isElement(t){return!(!t||1!=t.nodeType)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===r},_isNumber(t){return Object.prototype.toString.call(t)===n&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===o},_isBoolean(t){return Object.prototype.toString.call(t)===l},isObject(t){return t instanceof Object},isValidSelector(t){if("string"!==typeof t)return!1;const e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign(t){return 0===t||t>0?1:-1},requestAnimFrame(t){b.push(t),1===b.length&&_((function(){const t=b;b=[],t.forEach((function(t){t()}))}))},createCanvasElement(){const t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){while(t=t.parentNode)if(t==document)return!0;return!1},_urlToImage(t,i){const s=e.Util.createImageElement();s.onload=function(){i(s)},s.src=t},_rgbToHex(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(t){t=t.replace(c,u);const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){let t=(16777215*Math.random()<<0).toString(16);while(t.length<6)t=p+t;return c+t},getRGB(t){let e;return t in y?(e=y[t],{r:e[0],g:e[1],b:e[2]}):t[0]===c?this._hexToRgb(t.substring(1)):t.substr(0,4)===f?(e=v.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",e.Util._namedColorToRBA(t)||e.Util._hex3ColorToRGBA(t)||e.Util._hex4ColorToRGBA(t)||e.Util._hex6ColorToRGBA(t)||e.Util._hex8ColorToRGBA(t)||e.Util._rgbColorToRGBA(t)||e.Util._rgbaColorToRGBA(t)||e.Util._hslColorToRGBA(t)},_namedColorToRBA(t){const e=y[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){t=t.match(/rgb\(([^)]+)\)/)[1];const e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){t=t.match(/rgba\(([^)]+)\)/)[1];const e=t.split(/ *, */).map(((t,e)=>"%"===t.slice(-1)?3===e?parseInt(t)/100:parseInt(t)/100*255:Number(t)));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if("#"===t[0]&&9===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if("#"===t[0]&&5===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),s=Number(i[0])/360,a=Number(i[1])/100,r=Number(i[2])/100;let n,o,l;if(0===a)return l=255*r,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};n=r<.5?r*(1+a):r+a-r*a;const h=2*r-n,d=[0,0,0];for(let t=0;t<3;t++)o=s+1/3*-(t-1),o<0&&o++,o>1&&o--,l=6*o<1?h+6*(n-h)*o:2*o<1?n:3*o<2?h+(n-h)*(2/3-o)*6:h,d[t]=255*l;return{r:Math.round(d[0]),g:Math.round(d[1]),b:Math.round(d[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){const e={};for(const i in t)this._isPlainObject(t[i])?e[i]=this.cloneObject(t[i]):this._isArray(t[i])?e[i]=this.cloneArray(t[i]):e[i]=t[i];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*h},radToDeg(t){return t*d},_degToRad(t){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(t)},_radToDeg(t){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(t)},_getRotation(t){return s.Konva.angleDeg?e.Util.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(m+t)},error(t){console.error(m+t)},warn(t){s.Konva.showWarnings&&console.warn(g+t)},each(t,e){for(const i in t)e(i,t[i])},_inRange(t,e,i){return e<=t&&t<i},_getProjectionToSegment(t,e,i,s,a,r){let n,o,l;const h=(t-i)*(t-i)+(e-s)*(e-s);if(0==h)n=t,o=e,l=(a-i)*(a-i)+(r-s)*(r-s);else{const d=((a-t)*(i-t)+(r-e)*(s-e))/h;d<0?(n=t,o=e,l=(t-a)*(t-a)+(e-r)*(e-r)):d>1?(n=i,o=s,l=(i-a)*(i-a)+(s-r)*(s-r)):(n=t+d*(i-t),o=e+d*(s-e),l=(n-a)*(n-a)+(o-r)*(o-r))}return[n,o,l]},_getProjectionToLine(t,i,s){const a=e.Util.cloneObject(t);let r=Number.MAX_VALUE;return i.forEach((function(n,o){if(!s&&o===i.length-1)return;const l=i[(o+1)%i.length],h=e.Util._getProjectionToSegment(n.x,n.y,l.x,l.y,t.x,t.y),d=h[0],c=h[1],u=h[2];u<r&&(a.x=d,a.y=c,r=u)})),a},_prepareArrayForTween(t,i,s){const a=[],r=[];if(t.length>i.length){const e=i;i=t,t=e}for(let e=0;e<t.length;e+=2)a.push({x:t[e],y:t[e+1]});for(let e=0;e<i.length;e+=2)r.push({x:i[e],y:i[e+1]});const n=[];return r.forEach((function(t){const i=e.Util._getProjectionToLine(t,a,s);n.push(i.x),n.push(i.y)})),n},_prepareToStringify(t){let i;t.visitedByCircularReferenceRemoval=!0;for(const s in t)if(t.hasOwnProperty(s)&&t[s]&&"object"==typeof t[s])if(i=Object.getOwnPropertyDescriptor(t,s),t[s].visitedByCircularReferenceRemoval||e.Util._isElement(t[s])){if(!i.configurable)return null;delete t[s]}else if(null===e.Util._prepareToStringify(t[s])){if(!i.configurable)return null;delete t[s]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(const i in e)t[i]=e[i];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){s.Konva.releaseCanvasOnDestroy&&t.forEach((t=>{t.width=0,t.height=0}))},drawRoundedRectPath(t,e,i,s){let a=0,r=0,n=0,o=0;"number"===typeof s?a=r=n=o=Math.min(s,e/2,i/2):(a=Math.min(s[0]||0,e/2,i/2),r=Math.min(s[1]||0,e/2,i/2),o=Math.min(s[2]||0,e/2,i/2),n=Math.min(s[3]||0,e/2,i/2)),t.moveTo(a,0),t.lineTo(e-r,0),t.arc(e-r,r,r,3*Math.PI/2,0,!1),t.lineTo(e,i-o),t.arc(e-o,i-o,o,0,Math.PI/2,!1),t.lineTo(n,i),t.arc(n,i-n,n,Math.PI/2,Math.PI,!1),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1)}}},950:function(t,e,i){i(4224),i(1121),i(7133),Object.defineProperty(e,"__esModule",{value:!0}),e.RGBComponent=n,e.alphaComponent=o,e.getNumberValidator=l,e.getNumberOrArrayOfNumbersValidator=h,e.getNumberOrAutoValidator=d,e.getStringValidator=c,e.getStringOrGradientValidator=u,e.getFunctionValidator=p,e.getNumberArrayValidator=g,e.getBooleanValidator=m,e.getComponentValidator=f;const s=i(5640),a=i(1483);function r(t){return a.Util._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||a.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function n(t){return t>255?255:t<0?0:Math.round(t)}function o(t){return t>1?1:t<1e-4?1e-4:t}function l(){if(s.Konva.isUnminified)return function(t,e){return a.Util._isNumber(t)||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function h(t){if(s.Konva.isUnminified)return function(e,i){let s=a.Util._isNumber(e),n=a.Util._isArray(e)&&e.length==t;return s||n||a.Util.warn(r(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function d(){if(s.Konva.isUnminified)return function(t,e){var i=a.Util._isNumber(t),s="auto"===t;return i||s||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function c(){if(s.Konva.isUnminified)return function(t,e){return a.Util._isString(t)||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function u(){if(s.Konva.isUnminified)return function(t,e){const i=a.Util._isString(t),s="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t["addColorStop"];return i||s||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function p(){if(s.Konva.isUnminified)return function(t,e){return a.Util._isFunction(t)||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function g(){if(s.Konva.isUnminified)return function(t,e){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&t instanceof i||(a.Util._isArray(t)?t.forEach((function(t){a.Util._isNumber(t)||a.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")})):a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function m(){if(s.Konva.isUnminified)return function(t,e){var i=!0===t||!1===t;return i||a.Util.warn(r(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function f(t){if(s.Konva.isUnminified)return function(e,i){return void 0===e||null===e||a.Util.isObject(e)||a.Util.warn(r(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+t),e}}},2457:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const s=i(5640),a=i(1483),r=i(1548),n=i(7590),o=i(5086),l=i(7114),h=i(338),d=i(762),c=i(9485),u=i(4318),p=i(7816),g=i(5660),m=i(4765),f=i(9415);e.Konva=a.Util._assign(s.Konva,{Util:a.Util,Transform:a.Transform,Node:r.Node,Container:n.Container,Stage:o.Stage,stages:o.stages,Layer:l.Layer,FastLayer:h.FastLayer,Group:d.Group,DD:c.DD,Shape:u.Shape,shapes:u.shapes,Animation:p.Animation,Tween:g.Tween,Easings:g.Easings,Context:m.Context,Canvas:f.Canvas}),e["default"]=e.Konva},2604:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const s=i(2457),a=i(9464),r=i(9035),n=i(4705),o=i(360),l=i(1842),h=i(9894),d=i(3672),c=i(7546),u=i(6259),p=i(1773),g=i(9666),m=i(7221),f=i(7100),y=i(1658),v=i(2727),b=i(7534),_=i(7532),w=i(6205),C=i(9377),A=i(6223),S=i(5279),x=i(7268),k=i(3200),L=i(8193),M=i(143),E=i(7572),T=i(9058),D=i(8490),F=i(6190),P=i(5509),I=i(8352),N=i(9781),R=i(4989),O=i(4562),B=i(9688),G=i(9306);e.Konva=s.Konva.Util._assign(s.Konva,{Arc:a.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:o.Ellipse,Image:l.Image,Label:h.Label,Tag:h.Tag,Line:d.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:p.RegularPolygon,Ring:g.Ring,Sprite:m.Sprite,Star:f.Star,Text:y.Text,TextPath:v.TextPath,Transformer:b.Transformer,Wedge:_.Wedge,Filters:{Blur:w.Blur,Brighten:C.Brighten,Contrast:A.Contrast,Emboss:S.Emboss,Enhance:x.Enhance,Grayscale:k.Grayscale,HSL:L.HSL,HSV:M.HSV,Invert:E.Invert,Kaleidoscope:T.Kaleidoscope,Mask:D.Mask,Noise:F.Noise,Pixelate:P.Pixelate,Posterize:I.Posterize,RGB:N.RGB,RGBA:R.RGBA,Sepia:O.Sepia,Solarize:B.Solarize,Threshold:G.Threshold}})},6205:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Blur=void 0;const s=i(9861),a=i(1548),r=i(950);function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h(t,e){const i=t.data,s=t.width,a=t.height;let r,h,d,c,u,p,g,m,f,y,v,b,_,w,C,A,S,x,k,L,M,E,T,D;const F=e+e+1,P=s-1,I=a-1,N=e+1,R=N*(N+1)/2,O=new n,B=o[e],G=l[e];let U=null,z=O,W=null,V=null;for(d=1;d<F;d++)z=z.next=new n,d===N&&(U=z);for(z.next=O,g=p=0,h=0;h<a;h++){for(A=S=x=k=m=f=y=v=0,b=N*(L=i[p]),_=N*(M=i[p+1]),w=N*(E=i[p+2]),C=N*(T=i[p+3]),m+=R*L,f+=R*M,y+=R*E,v+=R*T,z=O,d=0;d<N;d++)z.r=L,z.g=M,z.b=E,z.a=T,z=z.next;for(d=1;d<N;d++)c=p+((P<d?P:d)<<2),m+=(z.r=L=i[c])*(D=N-d),f+=(z.g=M=i[c+1])*D,y+=(z.b=E=i[c+2])*D,v+=(z.a=T=i[c+3])*D,A+=L,S+=M,x+=E,k+=T,z=z.next;for(W=O,V=U,r=0;r<s;r++)i[p+3]=T=v*B>>G,0!==T?(T=255/T,i[p]=(m*B>>G)*T,i[p+1]=(f*B>>G)*T,i[p+2]=(y*B>>G)*T):i[p]=i[p+1]=i[p+2]=0,m-=b,f-=_,y-=w,v-=C,b-=W.r,_-=W.g,w-=W.b,C-=W.a,c=g+((c=r+e+1)<P?c:P)<<2,A+=W.r=i[c],S+=W.g=i[c+1],x+=W.b=i[c+2],k+=W.a=i[c+3],m+=A,f+=S,y+=x,v+=k,W=W.next,b+=L=V.r,_+=M=V.g,w+=E=V.b,C+=T=V.a,A-=L,S-=M,x-=E,k-=T,V=V.next,p+=4;g+=s}for(r=0;r<s;r++){for(S=x=k=A=f=y=v=m=0,p=r<<2,b=N*(L=i[p]),_=N*(M=i[p+1]),w=N*(E=i[p+2]),C=N*(T=i[p+3]),m+=R*L,f+=R*M,y+=R*E,v+=R*T,z=O,d=0;d<N;d++)z.r=L,z.g=M,z.b=E,z.a=T,z=z.next;for(u=s,d=1;d<=e;d++)p=u+r<<2,m+=(z.r=L=i[p])*(D=N-d),f+=(z.g=M=i[p+1])*D,y+=(z.b=E=i[p+2])*D,v+=(z.a=T=i[p+3])*D,A+=L,S+=M,x+=E,k+=T,z=z.next,d<I&&(u+=s);for(p=r,W=O,V=U,h=0;h<a;h++)c=p<<2,i[c+3]=T=v*B>>G,T>0?(T=255/T,i[c]=(m*B>>G)*T,i[c+1]=(f*B>>G)*T,i[c+2]=(y*B>>G)*T):i[c]=i[c+1]=i[c+2]=0,m-=b,f-=_,y-=w,v-=C,b-=W.r,_-=W.g,w-=W.b,C-=W.a,c=r+((c=h+N)<I?c:I)*s<<2,m+=A+=W.r=i[c],f+=S+=W.g=i[c+1],y+=x+=W.b=i[c+2],v+=k+=W.a=i[c+3],W=W.next,b+=L=V.r,_+=M=V.g,w+=E=V.b,C+=T=V.a,A-=L,S-=M,x-=E,k-=T,V=V.next,p+=s}}const d=function(t){const e=Math.round(this.blurRadius());e>0&&h(t,e)};e.Blur=d,s.Factory.addGetterSetter(a.Node,"blurRadius",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},9377:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Brighten=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=255*this.brightness(),i=t.data,s=i.length;for(let a=0;a<s;a+=4)i[a]+=e,i[a+1]+=e,i[a+2]+=e};e.Brighten=n,s.Factory.addGetterSetter(a.Node,"brightness",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},6223:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Contrast=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=Math.pow((this.contrast()+100)/100,2),i=t.data,s=i.length;let a=150,r=150,n=150;for(let o=0;o<s;o+=4)a=i[o],r=i[o+1],n=i[o+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,r/=255,r-=.5,r*=e,r+=.5,r*=255,n/=255,n-=.5,n*=e,n+=.5,n*=255,a=a<0?0:a>255?255:a,r=r<0?0:r>255?255:r,n=n<0?0:n>255?255:n,i[o]=a,i[o+1]=r,i[o+2]=n};e.Contrast=n,s.Factory.addGetterSetter(a.Node,"contrast",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},5279:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Emboss=void 0;const s=i(9861),a=i(1548),r=i(1483),n=i(950),o=function(t){const e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),s=this.embossDirection(),a=this.embossBlend(),n=t.data,o=t.width,l=t.height,h=4*o;let d=0,c=0,u=l;switch(s){case"top-left":d=-1,c=-1;break;case"top":d=-1,c=0;break;case"top-right":d=-1,c=1;break;case"right":d=0,c=1;break;case"bottom-right":d=1,c=1;break;case"bottom":d=1,c=0;break;case"bottom-left":d=1,c=-1;break;case"left":d=0,c=-1;break;default:r.Util.error("Unknown emboss direction: "+s)}do{const t=(u-1)*h;let s=d;u+s<1&&(s=0),u+s>l&&(s=0);const r=(u-1+s)*o*4;let p=o;do{const s=t+4*(p-1);let l=c;p+l<1&&(l=0),p+l>o&&(l=0);const h=r+4*(p-1+l),d=n[s]-n[h],u=n[s+1]-n[h+1],g=n[s+2]-n[h+2];let m=d;const f=m>0?m:-m,y=u>0?u:-u,v=g>0?g:-g;if(y>f&&(m=u),v>f&&(m=g),m*=e,a){const t=n[s]+m,e=n[s+1]+m,i=n[s+2]+m;n[s]=t>255?255:t<0?0:t,n[s+1]=e>255?255:e<0?0:e,n[s+2]=i>255?255:i<0?0:i}else{let t=i-m;t<0?t=0:t>255&&(t=255),n[s]=n[s+1]=n[s+2]=t}}while(--p)}while(--u)};e.Emboss=o,s.Factory.addGetterSetter(a.Node,"embossStrength",.5,(0,n.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"embossDirection","top-left",void 0,s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"embossBlend",!1,void 0,s.Factory.afterSetFilter)},7268:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Enhance=void 0;const s=i(9861),a=i(1548),r=i(950);function n(t,e,i,s,a){const r=i-e,n=a-s;if(0===r)return s+n/2;if(0===n)return s;let o=(t-e)/r;return o=n*o+s,o}const o=function(t){const e=t.data,i=e.length;let s,a,r,o=e[0],l=o,h=e[1],d=h,c=e[2],u=c;const p=this.enhance();if(0===p)return;for(let n=0;n<i;n+=4)s=e[n+0],s<o?o=s:s>l&&(l=s),a=e[n+1],a<h?h=a:a>d&&(d=a),r=e[n+2],r<c?c=r:r>u&&(u=r);let g,m,f,y,v,b,_,w,C;l===o&&(l=255,o=0),d===h&&(d=255,h=0),u===c&&(u=255,c=0),p>0?(m=l+p*(255-l),f=o-p*(o-0),v=d+p*(255-d),b=h-p*(h-0),w=u+p*(255-u),C=c-p*(c-0)):(g=.5*(l+o),m=l+p*(l-g),f=o+p*(o-g),y=.5*(d+h),v=d+p*(d-y),b=h+p*(h-y),_=.5*(u+c),w=u+p*(u-_),C=c+p*(c-_));for(let A=0;A<i;A+=4)e[A+0]=n(e[A+0],o,l,f,m),e[A+1]=n(e[A+1],h,d,b,v),e[A+2]=n(e[A+2],c,u,C,w)};e.Enhance=o,s.Factory.addGetterSetter(a.Node,"enhance",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},3200:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Grayscale=void 0;const i=function(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4){const t=.34*e[s]+.5*e[s+1]+.16*e[s+2];e[s]=t,e[s+1]=t,e[s+2]=t}};e.Grayscale=i},8193:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.HSL=void 0;const s=i(9861),a=i(1548),r=i(950);s.Factory.addGetterSetter(a.Node,"hue",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"saturation",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"luminance",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter);const n=function(t){const e=t.data,i=e.length,s=1,a=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,n=127*this.luminance(),o=s*a*Math.cos(r*Math.PI/180),l=s*a*Math.sin(r*Math.PI/180),h=.299*s+.701*o+.167*l,d=.587*s-.587*o+.33*l,c=.114*s-.114*o-.497*l,u=.299*s-.299*o-.328*l,p=.587*s+.413*o+.035*l,g=.114*s-.114*o+.293*l,m=.299*s-.3*o+1.25*l,f=.587*s-.586*o-1.05*l,y=.114*s+.886*o-.2*l;let v,b,_,w;for(let C=0;C<i;C+=4)v=e[C+0],b=e[C+1],_=e[C+2],w=e[C+3],e[C+0]=h*v+d*b+c*_+n,e[C+1]=u*v+p*b+g*_+n,e[C+2]=m*v+f*b+y*_+n,e[C+3]=w};e.HSL=n},143:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.HSV=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=t.data,i=e.length,s=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,n=s*a*Math.cos(r*Math.PI/180),o=s*a*Math.sin(r*Math.PI/180),l=.299*s+.701*n+.167*o,h=.587*s-.587*n+.33*o,d=.114*s-.114*n-.497*o,c=.299*s-.299*n-.328*o,u=.587*s+.413*n+.035*o,p=.114*s-.114*n+.293*o,g=.299*s-.3*n+1.25*o,m=.587*s-.586*n-1.05*o,f=.114*s+.886*n-.2*o;let y,v,b,_;for(let w=0;w<i;w+=4)y=e[w+0],v=e[w+1],b=e[w+2],_=e[w+3],e[w+0]=l*y+h*v+d*b,e[w+1]=c*y+u*v+p*b,e[w+2]=g*y+m*v+f*b,e[w+3]=_};e.HSV=n,s.Factory.addGetterSetter(a.Node,"hue",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"saturation",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"value",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},7572:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Invert=void 0;const i=function(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4)e[s]=255-e[s],e[s+1]=255-e[s+1],e[s+2]=255-e[s+2]};e.Invert=i},9058:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Kaleidoscope=void 0;const s=i(9861),a=i(1548),r=i(1483),n=i(950),o=function(t,e,i){const s=t.data,a=e.data,r=t.width,n=t.height,o=i.polarCenterX||r/2,l=i.polarCenterY||n/2;let h=Math.sqrt(o*o+l*l),d=r-o,c=n-l;const u=Math.sqrt(d*d+c*c);h=u>h?u:h;const p=n,g=r,m=360/g*Math.PI/180;for(let f=0;f<g;f+=1){const t=Math.sin(f*m),e=Math.cos(f*m);for(let i=0;i<p;i+=1){d=Math.floor(o+h*i/p*e),c=Math.floor(l+h*i/p*t);let n=4*(c*r+d);const u=s[n+0],g=s[n+1],m=s[n+2],y=s[n+3];n=4*(f+i*r),a[n+0]=u,a[n+1]=g,a[n+2]=m,a[n+3]=y}}},l=function(t,e,i){const s=t.data,a=e.data,r=t.width,n=t.height,o=i.polarCenterX||r/2,l=i.polarCenterY||n/2;let h=Math.sqrt(o*o+l*l),d=r-o,c=n-l;const u=Math.sqrt(d*d+c*c);h=u>h?u:h;const p=n,g=r,m=i.polarRotation||0;let f,y;for(d=0;d<r;d+=1)for(c=0;c<n;c+=1){const t=d-o,e=c-l,i=Math.sqrt(t*t+e*e)*p/h;let n=(180*Math.atan2(e,t)/Math.PI+360+m)%360;n=n*g/360,f=Math.floor(n),y=Math.floor(i);let u=4*(y*r+f);const v=s[u+0],b=s[u+1],_=s[u+2],w=s[u+3];u=4*(c*r+d),a[u+0]=v,a[u+1]=b,a[u+2]=_,a[u+3]=w}},h=function(t){const e=t.width,i=t.height;let s,a,n,h,d,c,u,p,g,m,f=Math.round(this.kaleidoscopePower());const y=Math.round(this.kaleidoscopeAngle()),v=Math.floor(e*(y%360)/360);if(f<1)return;const b=r.Util.createCanvasElement();b.width=e,b.height=i;const _=b.getContext("2d").getImageData(0,0,e,i);r.Util.releaseCanvas(b),o(t,_,{polarCenterX:e/2,polarCenterY:i/2});let w=e/Math.pow(2,f);while(w<=8)w*=2,f-=1;w=Math.ceil(w);let C=w,A=0,S=C,x=1;for(v+w>e&&(A=C,S=0,x=-1),a=0;a<i;a+=1)for(s=A;s!==S;s+=x)n=Math.round(s+v)%e,g=4*(e*a+n),d=_.data[g+0],c=_.data[g+1],u=_.data[g+2],p=_.data[g+3],m=4*(e*a+s),_.data[m+0]=d,_.data[m+1]=c,_.data[m+2]=u,_.data[m+3]=p;for(a=0;a<i;a+=1)for(C=Math.floor(w),h=0;h<f;h+=1){for(s=0;s<C+1;s+=1)g=4*(e*a+s),d=_.data[g+0],c=_.data[g+1],u=_.data[g+2],p=_.data[g+3],m=4*(e*a+2*C-s-1),_.data[m+0]=d,_.data[m+1]=c,_.data[m+2]=u,_.data[m+3]=p;C*=2}l(_,t,{polarRotation:0})};e.Kaleidoscope=h,s.Factory.addGetterSetter(a.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),s.Factory.afterSetFilter)},8490:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Mask=void 0;const s=i(9861),a=i(1548),r=i(950);function n(t,e,i){let s=4*(i*t.width+e);const a=[];return a.push(t.data[s++],t.data[s++],t.data[s++],t.data[s++]),a}function o(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function l(t){const e=[0,0,0];for(let i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function h(t,e){const i=n(t,0,0),s=n(t,t.width-1,0),a=n(t,0,t.height-1),r=n(t,t.width-1,t.height-1),h=e||10;if(o(i,s)<h&&o(s,r)<h&&o(r,a)<h&&o(a,i)<h){const e=l([s,i,r,a]),n=[];for(let i=0;i<t.width*t.height;i++){const s=o(e,[t.data[4*i],t.data[4*i+1],t.data[4*i+2]]);n[i]=s<h?0:255}return n}}function d(t,e){for(let i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}function c(t,e,i){const s=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),n=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let d=0;for(let n=0;n<a;n++)for(let h=0;h<a;h++){const c=o+n-r,u=l+h-r;if(c>=0&&c<i&&u>=0&&u<e){const i=c*e+u,r=s[n*a+h];d+=t[i]*r}}n[h]=2040===d?255:0}return n}function u(t,e,i){const s=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),n=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let d=0;for(let n=0;n<a;n++)for(let h=0;h<a;h++){const c=o+n-r,u=l+h-r;if(c>=0&&c<i&&u>=0&&u<e){const i=c*e+u,r=s[n*a+h];d+=t[i]*r}}n[h]=d>=1020?255:0}return n}function p(t,e,i){const s=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],a=Math.round(Math.sqrt(s.length)),r=Math.floor(a/2),n=[];for(let o=0;o<i;o++)for(let l=0;l<e;l++){const h=o*e+l;let d=0;for(let n=0;n<a;n++)for(let h=0;h<a;h++){const c=o+n-r,u=l+h-r;if(c>=0&&c<i&&u>=0&&u<e){const i=c*e+u,r=s[n*a+h];d+=t[i]*r}}n[h]=d}return n}const g=function(t){const e=this.threshold();let i=h(t,e);return i&&(i=c(i,t.width,t.height),i=u(i,t.width,t.height),i=p(i,t.width,t.height),d(t,i)),t};e.Mask=g,s.Factory.addGetterSetter(a.Node,"threshold",0,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},6190:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Noise=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=255*this.noise(),i=t.data,s=i.length,a=e/2;for(let r=0;r<s;r+=4)i[r+0]+=a-2*a*Math.random(),i[r+1]+=a-2*a*Math.random(),i[r+2]+=a-2*a*Math.random()};e.Noise=n,s.Factory.addGetterSetter(a.Node,"noise",.2,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},5509:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Pixelate=void 0;const s=i(9861),a=i(1483),r=i(1548),n=i(950),o=function(t){let e,i,s,r,n,o,l,h,d,c,u,p,g,m,f=Math.ceil(this.pixelSize()),y=t.width,v=t.height,b=Math.ceil(y/f),_=Math.ceil(v/f),w=t.data;if(f<=0)a.Util.error("pixelSize value can not be <= 0");else for(p=0;p<b;p+=1)for(g=0;g<_;g+=1){for(r=0,n=0,o=0,l=0,h=p*f,d=h+f,c=g*f,u=c+f,m=0,e=h;e<d;e+=1)if(!(e>=y))for(i=c;i<u;i+=1)i>=v||(s=4*(y*i+e),r+=w[s+0],n+=w[s+1],o+=w[s+2],l+=w[s+3],m+=1);for(r/=m,n/=m,o/=m,l/=m,e=h;e<d;e+=1)if(!(e>=y))for(i=c;i<u;i+=1)i>=v||(s=4*(y*i+e),w[s+0]=r,w[s+1]=n,w[s+2]=o,w[s+3]=l)}};e.Pixelate=o,s.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),s.Factory.afterSetFilter)},8352:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Posterize=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=Math.round(254*this.levels())+1,i=t.data,s=i.length,a=255/e;for(let r=0;r<s;r+=1)i[r]=Math.floor(i[r]/a)*a};e.Posterize=n,s.Factory.addGetterSetter(a.Node,"levels",.5,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},9781:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.RGB=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=t.data,i=e.length,s=this.red(),a=this.green(),r=this.blue();for(let n=0;n<i;n+=4){const t=(.34*e[n]+.5*e[n+1]+.16*e[n+2])/255;e[n]=t*s,e[n+1]=t*a,e[n+2]=t*r,e[n+3]=e[n+3]}};e.RGB=n,s.Factory.addGetterSetter(a.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),s.Factory.addGetterSetter(a.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),s.Factory.addGetterSetter(a.Node,"blue",0,r.RGBComponent,s.Factory.afterSetFilter)},4989:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=t.data,i=e.length,s=this.red(),a=this.green(),r=this.blue(),n=this.alpha();for(let o=0;o<i;o+=4){const t=1-n;e[o]=s*n+e[o]*t,e[o+1]=a*n+e[o+1]*t,e[o+2]=r*n+e[o+2]*t}};e.RGBA=n,s.Factory.addGetterSetter(a.Node,"red",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),s.Factory.addGetterSetter(a.Node,"green",0,(function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)})),s.Factory.addGetterSetter(a.Node,"blue",0,r.RGBComponent,s.Factory.afterSetFilter),s.Factory.addGetterSetter(a.Node,"alpha",1,(function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}))},4562:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Sepia=void 0;const i=function(t){const e=t.data,i=e.length;for(let s=0;s<i;s+=4){const t=e[s+0],i=e[s+1],a=e[s+2];e[s+0]=Math.min(255,.393*t+.769*i+.189*a),e[s+1]=Math.min(255,.349*t+.686*i+.168*a),e[s+2]=Math.min(255,.272*t+.534*i+.131*a)}};e.Sepia=i},9688:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Solarize=void 0;const i=function(t){const e=t.data,i=t.width,s=t.height,a=4*i;let r=s;do{const t=(r-1)*a;let s=i;do{const i=t+4*(s-1);let a=e[i],r=e[i+1],n=e[i+2];a>127&&(a=255-a),r>127&&(r=255-r),n>127&&(n=255-n),e[i]=a,e[i+1]=r,e[i+2]=n}while(--s)}while(--r)};e.Solarize=i},9306:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Threshold=void 0;const s=i(9861),a=i(1548),r=i(950),n=function(t){const e=255*this.threshold(),i=t.data,s=i.length;for(let a=0;a<s;a+=1)i[a]=i[a]<e?0:255};e.Threshold=n,s.Factory.addGetterSetter(a.Node,"threshold",.5,(0,r.getNumberValidator)(),s.Factory.afterSetFilter)},8684:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});const s=i(2604);t.exports=s.Konva},9464:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;const s=i(9861),a=i(4318),r=i(5640),n=i(950),o=i(5640);class l extends a.Shape{_sceneFunc(t){const e=r.Konva.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,i),t.arc(0,0,this.innerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),e=this.outerRadius(),i=this.clockwise(),s=r.Konva.getAngle(i?360-this.angle():this.angle()),a=Math.cos(Math.min(s,Math.PI)),n=1,o=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),h=a*(a>0?t:e),d=n*(n>0?e:t),c=o*(o>0?t:e),u=l*(l>0?e:t);return{x:h,y:i?-1*u:c,width:d-h,height:u-c}}}e.Arc=l,l.prototype._centroid=!0,l.prototype.className="Arc",l.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,o._registerNode)(l),s.Factory.addGetterSetter(l,"innerRadius",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"outerRadius",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"angle",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"clockwise",!1,(0,n.getBooleanValidator)())},9035:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;const s=i(9861),a=i(3672),r=i(950),n=i(5640),o=i(7546);class l extends a.Line{_sceneFunc(t){super._sceneFunc(t);const e=2*Math.PI,i=this.points();let s=i;const a=0!==this.tension()&&i.length>4;a&&(s=this.getTensionPoints());const r=this.pointerLength(),n=i.length;let l,h;if(a){const t=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[n-2],i[n-1]],e=o.Path.calcLength(s[s.length-4],s[s.length-3],"C",t),a=o.Path.getPointOnQuadraticBezier(Math.min(1,1-r/e),t[0],t[1],t[2],t[3],t[4],t[5]);l=i[n-2]-a.x,h=i[n-1]-a.y}else l=i[n-2]-i[n-4],h=i[n-1]-i[n-3];const d=(Math.atan2(h,l)+e)%e,c=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(i[n-2],i[n-1]),t.rotate(d),t.moveTo(0,0),t.lineTo(-r,c/2),t.lineTo(-r,-c/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(i[0],i[1]),a?(l=(s[0]+s[2])/2-i[0],h=(s[1]+s[3])/2-i[1]):(l=i[2]-i[0],h=i[3]-i[1]),t.rotate((Math.atan2(-h,-l)+e)%e),t.moveTo(0,0),t.lineTo(-r,c/2),t.lineTo(-r,-c/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const e=this.dashEnabled();e&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),e&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x,y:t.y-e,width:t.width,height:t.height+2*e}}}e.Arrow=l,l.prototype.className="Arrow",(0,n._registerNode)(l),s.Factory.addGetterSetter(l,"pointerLength",10,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(l,"pointerWidth",10,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(l,"pointerAtBeginning",!1),s.Factory.addGetterSetter(l,"pointerAtEnding",!0)},4705:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;const s=i(9861),a=i(4318),r=i(950),n=i(5640);class o extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}e.Circle=o,o.prototype._centroid=!0,o.prototype.className="Circle",o.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(o),s.Factory.addGetterSetter(o,"radius",0,(0,r.getNumberValidator)())},360:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Ellipse=void 0;const s=i(9861),a=i(4318),r=i(950),n=i(5640);class o extends a.Shape{_sceneFunc(t){const e=this.radiusX(),i=this.radiusY();t.beginPath(),t.save(),e!==i&&t.scale(1,i/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}e.Ellipse=o,o.prototype.className="Ellipse",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(o),s.Factory.addComponentsGetterSetter(o,"radius",["x","y"]),s.Factory.addGetterSetter(o,"radiusX",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(o,"radiusY",0,(0,r.getNumberValidator)())},1842:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;const s=i(1483),a=i(9861),r=i(4318),n=i(5640),o=i(950);class l extends r.Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",(t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()})),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t["addEventListener"]&&t["addEventListener"]("load",this._loadListener)}_removeImageLoad(t){t&&t["removeEventListener"]&&t["removeEventListener"]("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),i=this.getHeight(),a=this.cornerRadius(),r=this.attrs.image;let n;if(r){const t=this.attrs.cropWidth,s=this.attrs.cropHeight;n=t&&s?[r,this.cropX(),this.cropY(),t,s,0,0,e,i]:[r,0,0,e,i]}(this.hasFill()||this.hasStroke()||a)&&(t.beginPath(),a?s.Util.drawRoundedRectPath(t,e,i,a):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)),r&&(a&&t.clip(),t.drawImage.apply(t,n))}_hitFunc(t){const e=this.width(),i=this.height(),a=this.cornerRadius();t.beginPath(),a?s.Util.drawRoundedRectPath(t,e,i,a):t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e,i=null){const a=s.Util.createImageElement();a.onload=function(){const t=new l({image:a});e(t)},a.onerror=i,a.crossOrigin="Anonymous",a.src=t}}e.Image=l,l.prototype.className="Image",(0,n._registerNode)(l),a.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4)),a.Factory.addGetterSetter(l,"image"),a.Factory.addComponentsGetterSetter(l,"crop",["x","y","width","height"]),a.Factory.addGetterSetter(l,"cropX",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropY",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropWidth",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(l,"cropHeight",0,(0,o.getNumberValidator)())},9894:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.Label=void 0;const s=i(9861),a=i(4318),r=i(762),n=i(950),o=i(5640),l=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],h="Change.konva",d="none",c="up",u="right",p="down",g="left",m=l.length;class f extends r.Group{constructor(t){super(t),this.on("add.konva",(function(t){this._addListeners(t.child),this._sync()}))}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let e,i=this;const s=function(){i._sync()};for(e=0;e<m;e++)t.on(l[e]+h,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t,e,i,s,a,r,n,o=this.getText(),l=this.getTag();if(o&&l){switch(t=o.width(),e=o.height(),i=l.pointerDirection(),s=l.pointerWidth(),n=l.pointerHeight(),a=0,r=0,i){case c:a=t/2,r=-1*n;break;case u:a=t+s,r=e/2;break;case p:a=t/2,r=e+n;break;case g:a=-1*s,r=e/2;break}l.setAttrs({x:-1*a,y:-1*r,width:t,height:e}),o.setAttrs({x:-1*a,y:-1*r})}}}e.Label=f,f.prototype.className="Label",(0,o._registerNode)(f);class y extends a.Shape{_sceneFunc(t){const e=this.width(),i=this.height(),s=this.pointerDirection(),a=this.pointerWidth(),r=this.pointerHeight(),n=this.cornerRadius();let o=0,l=0,h=0,d=0;"number"===typeof n?o=l=h=d=Math.min(n,e/2,i/2):(o=Math.min(n[0]||0,e/2,i/2),l=Math.min(n[1]||0,e/2,i/2),d=Math.min(n[2]||0,e/2,i/2),h=Math.min(n[3]||0,e/2,i/2)),t.beginPath(),t.moveTo(o,0),s===c&&(t.lineTo((e-a)/2,0),t.lineTo(e/2,-1*r),t.lineTo((e+a)/2,0)),t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1),s===u&&(t.lineTo(e,(i-r)/2),t.lineTo(e+a,i/2),t.lineTo(e,(i+r)/2)),t.lineTo(e,i-d),t.arc(e-d,i-d,d,0,Math.PI/2,!1),s===p&&(t.lineTo((e+a)/2,i),t.lineTo(e/2,i+r),t.lineTo((e-a)/2,i)),t.lineTo(h,i),t.arc(h,i-h,h,Math.PI/2,Math.PI,!1),s===g&&(t.lineTo(0,(i+r)/2),t.lineTo(-1*a,i/2),t.lineTo(0,(i-r)/2)),t.lineTo(0,o),t.arc(o,o,o,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,e=0,i=this.pointerWidth(),s=this.pointerHeight(),a=this.pointerDirection(),r=this.width(),n=this.height();return a===c?(e-=s,n+=s):a===p?n+=s:a===g?(t-=1.5*i,r+=i):a===u&&(r+=1.5*i),{x:t,y:e,width:r,height:n}}}e.Tag=y,y.prototype.className="Tag",(0,o._registerNode)(y),s.Factory.addGetterSetter(y,"pointerDirection",d),s.Factory.addGetterSetter(y,"pointerWidth",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(y,"pointerHeight",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(y,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4))},3672:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;const s=i(9861),a=i(5640),r=i(4318),n=i(950);function o(t,e,i,s,a,r,n){const o=Math.sqrt(Math.pow(i-t,2)+Math.pow(s-e,2)),l=Math.sqrt(Math.pow(a-i,2)+Math.pow(r-s,2)),h=n*o/(o+l),d=n*l/(o+l),c=i-h*(a-t),u=s-h*(r-e),p=i+d*(a-t),g=s+d*(r-e);return[c,u,p,g]}function l(t,e){const i=t.length,s=[];for(let a=2;a<i-2;a+=2){const i=o(t[a-2],t[a-1],t[a],t[a+1],t[a+2],t[a+3],e);isNaN(i[0])||(s.push(i[0]),s.push(i[1]),s.push(t[a]),s.push(t[a+1]),s.push(i[2]),s.push(i[3]))}return s}class h extends r.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")}))}_sceneFunc(t){let e,i,s,a=this.points(),r=a.length,n=this.tension(),o=this.closed(),l=this.bezier();if(r){if(t.beginPath(),t.moveTo(a[0],a[1]),0!==n&&r>4){e=this.getTensionPoints(),i=e.length,s=o?0:4,o||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);while(s<i-2)t.bezierCurveTo(e[s++],e[s++],e[s++],e[s++],e[s++],e[s++]);o||t.quadraticCurveTo(e[i-2],e[i-1],a[r-2],a[r-1])}else if(l){s=2;while(s<r)t.bezierCurveTo(a[s++],a[s++],a[s++],a[s++],a[s++],a[s++])}else for(s=2;s<r;s+=2)t.lineTo(a[s],a[s+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():l(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),e=t.length,i=this.tension(),s=o(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),a=o(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),r=l(t,i),n=[s[2],s[3]].concat(r).concat([a[0],a[1],t[e-2],t[e-1],a[2],a[3],s[0],s[1],t[0],t[1]]);return n}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points();let e,i,s=t[0],a=t[0],r=t[1],n=t[1];for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],s=Math.min(s,e),a=Math.max(a,e),r=Math.min(r,i),n=Math.max(n,i);return{x:s,y:r,width:a-s,height:n-r}}}e.Line=h,h.prototype.className="Line",h.prototype._attrsAffectingSize=["points","bezier","tension"],(0,a._registerNode)(h),s.Factory.addGetterSetter(h,"closed",!1),s.Factory.addGetterSetter(h,"bezier",!1),s.Factory.addGetterSetter(h,"tension",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(h,"points",[],(0,n.getNumberArrayValidator)())},7546:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;const s=i(9861),a=i(4318),r=i(5640),n=i(5277);class o extends a.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute()}))}_readDataAttribute(){this.dataArray=o.parsePathData(this.data()),this.pathLength=o.getPathLength(this.dataArray)}_sceneFunc(t){const e=this.dataArray;t.beginPath();let i=!1;for(let g=0;g<e.length;g++){const m=e[g].command,f=e[g].points;switch(m){case"L":t.lineTo(f[0],f[1]);break;case"M":t.moveTo(f[0],f[1]);break;case"C":t.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":t.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var s=f[0],a=f[1],r=f[2],n=f[3],o=f[4],l=f[5],h=f[6],d=f[7],c=r>n?r:n,u=r>n?1:r/n,p=r>n?n/r:1;t.translate(s,a),t.rotate(h),t.scale(u,p),t.arc(0,0,c,o,o+l,1-d),t.scale(1/u,1/p),t.rotate(-h),t.translate(-s,-a);break;case"z":i=!0,t.closePath();break}}i||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach((function(e){if("A"===e.command){const i=e.points[4],s=e.points[5],a=e.points[4]+s;let r=Math.PI/180;if(Math.abs(i-a)<r&&(r=Math.abs(i-a)),s<0)for(let n=i-r;n>a;n-=r){const i=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(i.x,i.y)}else for(let n=i+r;n<a;n+=r){const i=o.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],n,0);t.push(i.x,i.y)}}else if("C"===e.command)for(let i=0;i<=1;i+=.01){const s=o.getPointOnCubicBezier(i,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(s.x,s.y)}else t=t.concat(e.points)}));let e,i,s=t[0],a=t[0],r=t[1],n=t[1];for(let o=0;o<t.length/2;o++)e=t[2*o],i=t[2*o+1],isNaN(e)||(s=Math.min(s,e),a=Math.max(a,e)),isNaN(i)||(r=Math.min(r,i),n=Math.max(n,i));return{x:s,y:r,width:a-s,height:n-r}}getLength(){return this.pathLength}getPointAtLength(t){return o.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))}static getPathLength(t){let e=0;for(let i=0;i<t.length;++i)e+=t[i].pathLength;return e}static getPointAtLengthOfDataArray(t,e){let i,s=0,a=e.length;if(!a)return null;while(s<a&&t>e[s].pathLength)t-=e[s].pathLength,++s;if(s===a)return i=e[s-1].points.slice(-2),{x:i[0],y:i[1]};if(t<.01)return i=e[s].points.slice(0,2),{x:i[0],y:i[1]};const r=e[s],l=r.points;switch(r.command){case"L":return o.getPointOnLine(t,r.start.x,r.start.y,l[0],l[1]);case"C":return o.getPointOnCubicBezier((0,n.t2length)(t,o.getPathLength(e),(t=>(0,n.getCubicArcLength)([r.start.x,l[0],l[2],l[4]],[r.start.y,l[1],l[3],l[5]],t))),r.start.x,r.start.y,l[0],l[1],l[2],l[3],l[4],l[5]);case"Q":return o.getPointOnQuadraticBezier((0,n.t2length)(t,o.getPathLength(e),(t=>(0,n.getQuadraticArcLength)([r.start.x,l[0],l[2]],[r.start.y,l[1],l[3]],t))),r.start.x,r.start.y,l[0],l[1],l[2],l[3]);case"A":var h=l[0],d=l[1],c=l[2],u=l[3],p=l[4],g=l[5],m=l[6];return p+=g*t/r.pathLength,o.getPointOnEllipticalArc(h,d,c,u,p,m)}return null}static getPointOnLine(t,e,i,s,a,r,n){r=null!==r&&void 0!==r?r:e,n=null!==n&&void 0!==n?n:i;const o=this.getLineLength(e,i,s,a);if(o<1e-10)return{x:e,y:i};if(s===e)return{x:r,y:n+(a>i?t:-t)};const l=(a-i)/(s-e),h=Math.sqrt(t*t/(1+l*l))*(s<e?-1:1),d=l*h;if(Math.abs(n-i-l*(r-e))<1e-10)return{x:r+h,y:n+d};const c=((r-e)*(s-e)+(n-i)*(a-i))/(o*o),u=e+c*(s-e),p=i+c*(a-i),g=this.getLineLength(r,n,u,p),m=Math.sqrt(t*t-g*g),f=Math.sqrt(m*m/(1+l*l))*(s<e?-1:1),y=l*f;return{x:u+f,y:p+y}}static getPointOnCubicBezier(t,e,i,s,a,r,n,o,l){function h(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function c(t){return 3*t*(1-t)*(1-t)}function u(t){return(1-t)*(1-t)*(1-t)}const p=o*h(t)+r*d(t)+s*c(t)+e*u(t),g=l*h(t)+n*d(t)+a*c(t)+i*u(t);return{x:p,y:g}}static getPointOnQuadraticBezier(t,e,i,s,a,r,n){function o(t){return t*t}function l(t){return 2*t*(1-t)}function h(t){return(1-t)*(1-t)}const d=r*o(t)+s*l(t)+e*h(t),c=n*o(t)+a*l(t)+i*h(t);return{x:d,y:c}}static getPointOnEllipticalArc(t,e,i,s,a,r){const n=Math.cos(r),o=Math.sin(r),l={x:i*Math.cos(a),y:s*Math.sin(a)};return{x:t+(l.x*n-l.y*o),y:e+(l.x*o+l.y*n)}}static parsePathData(t){if(!t)return[];let e=t;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var s=0;s<i.length;s++)e=e.replace(new RegExp(i[s],"g"),"|"+i[s]);const a=e.split("|"),r=[],n=[];let o=0,l=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let d;for(s=1;s<a.length;s++){let t=a[s],e=t.charAt(0);t=t.slice(1),n.length=0;while(d=h.exec(t))n.push(d[0]);const i=[];for(let s=0,a=n.length;s<a;s++){if("00"===n[s]){i.push(0,0);continue}const t=parseFloat(n[s]);isNaN(t)?i.push(0):i.push(t)}while(i.length>0){if(isNaN(i[0]))break;let t="",s=[];const a=o,n=l;var c,u,p,g,m,f,y,v,b,_;switch(e){case"l":o+=i.shift(),l+=i.shift(),t="L",s.push(o,l);break;case"L":o=i.shift(),l=i.shift(),s.push(o,l);break;case"m":var w=i.shift(),C=i.shift();if(o+=w,l+=C,t="M",r.length>2&&"z"===r[r.length-1].command)for(let t=r.length-2;t>=0;t--)if("M"===r[t].command){o=r[t].points[0]+w,l=r[t].points[1]+C;break}s.push(o,l),e="l";break;case"M":o=i.shift(),l=i.shift(),t="M",s.push(o,l),e="L";break;case"h":o+=i.shift(),t="L",s.push(o,l);break;case"H":o=i.shift(),t="L",s.push(o,l);break;case"v":l+=i.shift(),t="L",s.push(o,l);break;case"V":l=i.shift(),t="L",s.push(o,l);break;case"C":s.push(i.shift(),i.shift(),i.shift(),i.shift()),o=i.shift(),l=i.shift(),s.push(o,l);break;case"c":s.push(o+i.shift(),l+i.shift(),o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="C",s.push(o,l);break;case"S":u=o,p=l,c=r[r.length-1],"C"===c.command&&(u=o+(o-c.points[2]),p=l+(l-c.points[3])),s.push(u,p,i.shift(),i.shift()),o=i.shift(),l=i.shift(),t="C",s.push(o,l);break;case"s":u=o,p=l,c=r[r.length-1],"C"===c.command&&(u=o+(o-c.points[2]),p=l+(l-c.points[3])),s.push(u,p,o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="C",s.push(o,l);break;case"Q":s.push(i.shift(),i.shift()),o=i.shift(),l=i.shift(),s.push(o,l);break;case"q":s.push(o+i.shift(),l+i.shift()),o+=i.shift(),l+=i.shift(),t="Q",s.push(o,l);break;case"T":u=o,p=l,c=r[r.length-1],"Q"===c.command&&(u=o+(o-c.points[0]),p=l+(l-c.points[1])),o=i.shift(),l=i.shift(),t="Q",s.push(u,p,o,l);break;case"t":u=o,p=l,c=r[r.length-1],"Q"===c.command&&(u=o+(o-c.points[0]),p=l+(l-c.points[1])),o+=i.shift(),l+=i.shift(),t="Q",s.push(u,p,o,l);break;case"A":g=i.shift(),m=i.shift(),f=i.shift(),y=i.shift(),v=i.shift(),b=o,_=l,o=i.shift(),l=i.shift(),t="A",s=this.convertEndpointToCenterParameterization(b,_,o,l,y,v,g,m,f);break;case"a":g=i.shift(),m=i.shift(),f=i.shift(),y=i.shift(),v=i.shift(),b=o,_=l,o+=i.shift(),l+=i.shift(),t="A",s=this.convertEndpointToCenterParameterization(b,_,o,l,y,v,g,m,f);break}r.push({command:t||e,points:s,start:{x:a,y:n},pathLength:this.calcLength(a,n,t||e,s)})}"z"!==e&&"Z"!==e||r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,e,i,s){let a,r,l,h;const d=o;switch(i){case"L":return d.getLineLength(t,e,s[0],s[1]);case"C":return(0,n.getCubicArcLength)([t,s[0],s[2],s[4]],[e,s[1],s[3],s[5]],1);case"Q":return(0,n.getQuadraticArcLength)([t,s[0],s[2]],[e,s[1],s[3]],1);case"A":a=0;var c=s[4],u=s[5],p=s[4]+u,g=Math.PI/180;if(Math.abs(c-p)<g&&(g=Math.abs(c-p)),r=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),u<0)for(h=c-g;h>p;h-=g)l=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),a+=d.getLineLength(r.x,r.y,l.x,l.y),r=l;else for(h=c+g;h<p;h+=g)l=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),a+=d.getLineLength(r.x,r.y,l.x,l.y),r=l;return l=d.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],p,0),a+=d.getLineLength(r.x,r.y,l.x,l.y),a}return 0}static convertEndpointToCenterParameterization(t,e,i,s,a,r,n,o,l){const h=l*(Math.PI/180),d=Math.cos(h)*(t-i)/2+Math.sin(h)*(e-s)/2,c=-1*Math.sin(h)*(t-i)/2+Math.cos(h)*(e-s)/2,u=d*d/(n*n)+c*c/(o*o);u>1&&(n*=Math.sqrt(u),o*=Math.sqrt(u));let p=Math.sqrt((n*n*(o*o)-n*n*(c*c)-o*o*(d*d))/(n*n*(c*c)+o*o*(d*d)));a===r&&(p*=-1),isNaN(p)&&(p=0);const g=p*n*c/o,m=p*-o*d/n,f=(t+i)/2+Math.cos(h)*g-Math.sin(h)*m,y=(e+s)/2+Math.sin(h)*g+Math.cos(h)*m,v=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))},_=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=_([1,0],[(d-g)/n,(c-m)/o]),C=[(d-g)/n,(c-m)/o],A=[(-1*d-g)/n,(-1*c-m)/o];let S=_(C,A);return b(C,A)<=-1&&(S=Math.PI),b(C,A)>=1&&(S=0),0===r&&S>0&&(S-=2*Math.PI),1===r&&S<0&&(S+=2*Math.PI),[f,y,n,o,w,S,h,r]}}e.Path=o,o.prototype.className="Path",o.prototype._attrsAffectingSize=["data"],(0,r._registerNode)(o),s.Factory.addGetterSetter(o,"data")},6259:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Rect=void 0;const s=i(9861),a=i(4318),r=i(5640),n=i(1483),o=i(950);class l extends a.Shape{_sceneFunc(t){const e=this.cornerRadius(),i=this.width(),s=this.height();t.beginPath(),e?n.Util.drawRoundedRectPath(t,i,s,e):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}}e.Rect=l,l.prototype.className="Rect",(0,r._registerNode)(l),s.Factory.addGetterSetter(l,"cornerRadius",0,(0,o.getNumberOrArrayOfNumbersValidator)(4))},1773:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.RegularPolygon=void 0;const s=i(9861),a=i(4318),r=i(950),n=i(5640);class o extends a.Shape{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(let i=1;i<e.length;i++)t.lineTo(e[i].x,e[i].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,i=[];for(let s=0;s<t;s++)i.push({x:e*Math.sin(2*s*Math.PI/t),y:-1*e*Math.cos(2*s*Math.PI/t)});return i}getSelfRect(){const t=this._getPoints();let e=t[0].x,i=t[0].y,s=t[0].x,a=t[0].y;return t.forEach((t=>{e=Math.min(e,t.x),i=Math.max(i,t.x),s=Math.min(s,t.y),a=Math.max(a,t.y)})),{x:e,y:s,width:i-e,height:a-s}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.RegularPolygon=o,o.prototype.className="RegularPolygon",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(o),s.Factory.addGetterSetter(o,"radius",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(o,"sides",0,(0,r.getNumberValidator)())},9666:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;const s=i(9861),a=i(4318),r=i(950),n=i(5640),o=2*Math.PI;class l extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,o,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),o,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Ring=l,l.prototype.className="Ring",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(l),s.Factory.addGetterSetter(l,"innerRadius",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(l,"outerRadius",0,(0,r.getNumberValidator)())},7221:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;const s=i(9861),a=i(4318),r=i(7816),n=i(950),o=i(5640);class l extends a.Shape{constructor(t){super(t),this._updated=!0,this.anim=new r.Animation((()=>{const t=this._updated;return this._updated=!1,t})),this.on("animationChange.konva",(function(){this.frameIndex(0)})),this.on("frameIndexChange.konva",(function(){this._updated=!0})),this.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}))}_sceneFunc(t){const e=this.animation(),i=this.frameIndex(),s=4*i,a=this.animations()[e],r=this.frameOffsets(),n=a[s+0],o=a[s+1],l=a[s+2],h=a[s+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,h),t.closePath(),t.fillStrokeShape(this)),d)if(r){const s=r[e],a=2*i;t.drawImage(d,n,o,l,h,s[a+0],s[a+1],l,h)}else t.drawImage(d,n,o,l,h,0,0,l,h)}_hitFunc(t){const e=this.animation(),i=this.frameIndex(),s=4*i,a=this.animations()[e],r=this.frameOffsets(),n=a[s+2],o=a[s+3];if(t.beginPath(),r){const s=r[e],a=2*i;t.rect(s[a+0],s[a+1],n,o)}else t.rect(0,0,n,o);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval((function(){t._updateIndex()}),1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),e=this.animation(),i=this.animations(),s=i[e],a=s.length/4;t<a-1?this.frameIndex(t+1):this.frameIndex(0)}}e.Sprite=l,l.prototype.className="Sprite",(0,o._registerNode)(l),s.Factory.addGetterSetter(l,"animation"),s.Factory.addGetterSetter(l,"animations"),s.Factory.addGetterSetter(l,"frameOffsets"),s.Factory.addGetterSetter(l,"image"),s.Factory.addGetterSetter(l,"frameIndex",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"frameRate",17,(0,n.getNumberValidator)()),s.Factory.backCompat(l,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})},7100:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Star=void 0;const s=i(9861),a=i(4318),r=i(950),n=i(5640);class o extends a.Shape{_sceneFunc(t){const e=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(let a=1;a<2*s;a++){const r=a%2===0?i:e,n=r*Math.sin(a*Math.PI/s),o=-1*r*Math.cos(a*Math.PI/s);t.lineTo(n,o)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}e.Star=o,o.prototype.className="Star",o.prototype._centroid=!0,o.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(o),s.Factory.addGetterSetter(o,"numPoints",5,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(o,"innerRadius",0,(0,r.getNumberValidator)()),s.Factory.addGetterSetter(o,"outerRadius",0,(0,r.getNumberValidator)())},1658:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Text=void 0,e.stringToArray=h;const s=i(1483),a=i(9861),r=i(4318),n=i(5640),o=i(950),l=i(5640);function h(t){return[...t].reduce(((t,e,i,s)=>{if(/\p{Emoji}/u.test(e)){const a=s[i+1];a&&/\p{Emoji_Modifier}|\u200D/u.test(a)?(t.push(e+a),s[i+1]=""):t.push(e)}else/\p{Regional_Indicator}{2}/u.test(e+(s[i+1]||""))?t.push(e+s[i+1]):i>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(e)?t[t.length-1]+=e:e&&t.push(e);return t}),[])}const d="auto",c="center",u="inherit",p="justify",g="Change.konva",m="2d",f="-",y="left",v="text",b="Text",_="top",w="bottom",C="middle",A="normal",S="px ",x=" ",k="right",L="rtl",M="word",E="char",T="none",D="…",F=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],P=F.length;function I(t){return t.split(",").map((t=>{t=t.trim();const e=t.indexOf(" ")>=0,i=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!i&&(t=`"${t}"`),t})).join(", ")}let N;function R(){return N||(N=s.Util.createCanvasElement().getContext(m),N)}function O(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function B(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function G(t){return t=t||{},t.fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}class U extends r.Shape{constructor(t){super(G(t)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<P;e++)this.on(F[e]+g,this._setTextData);this._setTextData()}_sceneFunc(t){const e=this.textArr,i=e.length;if(!this.text())return;let s,a=this.padding(),r=this.fontSize(),o=this.lineHeight()*r,l=this.verticalAlign(),d=this.direction(),g=0,m=this.align(),f=this.getWidth(),v=this.letterSpacing(),b=this.fill(),_=this.textDecoration(),A=-1!==_.indexOf("underline"),S=-1!==_.indexOf("line-through");d=d===u?t.direction:d;let x=o/2,M=C;if(n.Konva._fixTextRendering){const t=this.measureSize("M");M="alphabetic",x=(t.fontBoundingBoxAscent-t.fontBoundingBoxDescent)/2+o/2}var E=0,T=0;for(d===L&&t.setAttr("direction",d),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",M),t.setAttr("textAlign",y),l===C?g=(this.getHeight()-i*o-2*a)/2:l===w&&(g=this.getHeight()-i*o-2*a),t.translate(a,g+a),s=0;s<i;s++){E=0,T=0;var D,F,P=e[s],I=P.text,N=P.width,R=P.lastInParagraph;if(t.save(),m===k?E+=f-N-2*a:m===c&&(E+=(f-N-2*a)/2),A){t.save(),t.beginPath();const e=n.Konva._fixTextRendering?Math.round(r/4):Math.round(r/2),i=E,s=x+T+e;t.moveTo(i,s),D=I.split(" ").length-1,0===D,F=m!==p||R?N:f-2*a,t.lineTo(i+Math.round(F),s),t.lineWidth=r/15;const o=this._getLinearGradient();t.strokeStyle=o||b,t.stroke(),t.restore()}if(S){t.save(),t.beginPath();const e=n.Konva._fixTextRendering?-Math.round(r/4):0;t.moveTo(E,x+T+e),D=I.split(" ").length-1,0===D,F=m!==p||R?N:f-2*a,t.lineTo(E+Math.round(F),x+T+e),t.lineWidth=r/15;const i=this._getLinearGradient();t.strokeStyle=i||b,t.stroke(),t.restore()}if(d===L||0===v&&m!==p)0!==v&&t.setAttr("letterSpacing",`${v}px`),this._partialTextX=E,this._partialTextY=x+T,this._partialText=I,t.fillStrokeShape(this);else{D=I.split(" ").length-1;const e=h(I);for(let i=0;i<e.length;i++){const s=e[i];" "!==s||R||m!==p||(E+=(f-2*a-N)/D),this._partialTextX=E,this._partialTextY=x+T,this._partialText=s,t.fillStrokeShape(this),E+=this.measureSize(s).width+v}}t.restore(),i>1&&(x+=o)}}_hitFunc(t){const e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)}setText(t){const e=s.Util._isString(t)?t:null===t||void 0===t?"":t+"";return this._setAttr(v,e),this}getWidth(){const t=this.attrs.width===d||void 0===this.attrs.width;return t?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){const t=this.attrs.height===d||void 0===this.attrs.height;return t?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,i,s,a,r,n,o,l,h,d,c;let u,p=R(),g=this.fontSize();p.save(),p.font=this._getContextFont(),u=p.measureText(t),p.restore();const m=g/100;return{actualBoundingBoxAscent:null!==(e=u.actualBoundingBoxAscent)&&void 0!==e?e:71.58203125*m,actualBoundingBoxDescent:null!==(i=u.actualBoundingBoxDescent)&&void 0!==i?i:0,actualBoundingBoxLeft:null!==(s=u.actualBoundingBoxLeft)&&void 0!==s?s:-7.421875*m,actualBoundingBoxRight:null!==(a=u.actualBoundingBoxRight)&&void 0!==a?a:75.732421875*m,alphabeticBaseline:null!==(r=u.alphabeticBaseline)&&void 0!==r?r:0,emHeightAscent:null!==(n=u.emHeightAscent)&&void 0!==n?n:100*m,emHeightDescent:null!==(o=u.emHeightDescent)&&void 0!==o?o:-20*m,fontBoundingBoxAscent:null!==(l=u.fontBoundingBoxAscent)&&void 0!==l?l:91*m,fontBoundingBoxDescent:null!==(h=u.fontBoundingBoxDescent)&&void 0!==h?h:21*m,hangingBaseline:null!==(d=u.hangingBaseline)&&void 0!==d?d:72.80000305175781*m,ideographicBaseline:null!==(c=u.ideographicBaseline)&&void 0!==c?c:-21*m,width:u.width,height:g}}_getContextFont(){return this.fontStyle()+x+this.fontVariant()+x+(this.fontSize()+S)+I(this.fontFamily())}_addTextLine(t){const e=this.align();e===p&&(t=t.trim());const i=this._getTextWidth(t);return this.textArr.push({text:t,width:i,lastInParagraph:!1})}_getTextWidth(t){const e=this.letterSpacing(),i=t.length;return R().measureText(t).width+e*i}_setTextData(){let t=this.text().split("\n"),e=+this.fontSize(),i=0,s=this.lineHeight()*e,a=this.attrs.width,r=this.attrs.height,n=a!==d&&void 0!==a,o=r!==d&&void 0!==r,l=this.padding(),c=a-2*l,u=r-2*l,p=0,g=this.wrap(),m=g!==T,y=g!==E&&m,v=this.ellipsis();this.textArr=[],R().font=this._getContextFont();const b=v?this._getTextWidth(D):0;for(let d=0,_=t.length;d<_;++d){let e=t[d],a=this._getTextWidth(e);if(n&&a>c)while(e.length>0){let t=0,r=h(e).length,n="",o=0;while(t<r){const i=t+r>>>1,s=h(e),a=s.slice(0,i+1).join(""),l=this._getTextWidth(a)+b;l<=c?(t=i+1,n=a,o=l):r=i}if(!n)break;{if(y){const i=h(e),s=h(n),a=i[s.length],r=a===x||a===f;let l;if(r&&o<=c)l=s.length;else{const t=s.lastIndexOf(x),e=s.lastIndexOf(f);l=Math.max(t,e)+1}l>0&&(t=l,n=i.slice(0,t).join(""),o=this._getTextWidth(n))}n=n.trimRight(),this._addTextLine(n),i=Math.max(i,o),p+=s;const r=this._shouldHandleEllipsis(p);if(r){this._tryToAddEllipsisToLastLine();break}const l=h(e);if(e=l.slice(t).join("").trimLeft(),e.length>0&&(a=this._getTextWidth(e),a<=c)){this._addTextLine(e),p+=s,i=Math.max(i,a);break}}}else this._addTextLine(e),p+=s,i=Math.max(i,a),this._shouldHandleEllipsis(p)&&d<_-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),o&&p+s>u)break}this.textHeight=e,this.textWidth=i}_shouldHandleEllipsis(t){const e=+this.fontSize(),i=this.lineHeight()*e,s=this.attrs.height,a=s!==d&&void 0!==s,r=this.padding(),n=s-2*r,o=this.wrap(),l=o!==T;return!l||a&&t+i>n}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,e=t!==d&&void 0!==t,i=this.padding(),s=t-2*i,a=this.ellipsis(),r=this.textArr[this.textArr.length-1];if(r&&a){if(e){const t=this._getTextWidth(r.text+D)<s;t||(r.text=r.text.slice(0,r.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+D)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),e=this.hasShadow();return!(!t||!e)||super._useBufferCanvas()}}e.Text=U,U.prototype._fillFunc=O,U.prototype._strokeFunc=B,U.prototype.className=b,U.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,l._registerNode)(U),a.Factory.overWriteSetter(U,"width",(0,o.getNumberOrAutoValidator)()),a.Factory.overWriteSetter(U,"height",(0,o.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(U,"direction",u),a.Factory.addGetterSetter(U,"fontFamily","Arial"),a.Factory.addGetterSetter(U,"fontSize",12,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(U,"fontStyle",A),a.Factory.addGetterSetter(U,"fontVariant",A),a.Factory.addGetterSetter(U,"padding",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(U,"align",y),a.Factory.addGetterSetter(U,"verticalAlign",_),a.Factory.addGetterSetter(U,"lineHeight",1,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(U,"wrap",M),a.Factory.addGetterSetter(U,"ellipsis",!1,(0,o.getBooleanValidator)()),a.Factory.addGetterSetter(U,"letterSpacing",0,(0,o.getNumberValidator)()),a.Factory.addGetterSetter(U,"text","",(0,o.getStringValidator)()),a.Factory.addGetterSetter(U,"textDecoration","")},2727:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.TextPath=void 0;const s=i(1483),a=i(9861),r=i(4318),n=i(7546),o=i(1658),l=i(950),h=i(5640),d="",c="normal";function u(t){t.fillText(this.partialText,0,0)}function p(t){t.strokeText(this.partialText,0,0)}class g extends r.Shape{constructor(t){super(t),this.dummyCanvas=s.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",(function(){this._readDataAttribute(),this._setTextData()})),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const e=this.pathLength;return t-1>e?null:n.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const e=this.textDecoration(),i=this.fill(),s=this.fontSize(),a=this.glyphInfo;"underline"===e&&t.beginPath();for(let r=0;r<a.length;r++){t.save();const i=a[r].p0;t.translate(i.x,i.y),t.rotate(a[r].rotation),this.partialText=a[r].text,t.fillStrokeShape(this),"underline"===e&&(0===r&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=i,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const e=this.glyphInfo;if(e.length>=1){const i=e[0].p0;t.moveTo(i.x,i.y)}for(let i=0;i<e.length;i++){const s=e[i].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return s.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return o.Text.prototype.setText.call(this,t)}_getContextFont(){return o.Text.prototype._getContextFont.call(this)}_getTextSize(t){const e=this.dummyCanvas,i=e.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(t);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:e}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=e,this.glyphInfo=[],!this.attrs.data)return null;const i=this.letterSpacing(),s=this.align(),a=this.kerningFunc(),r=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0);let l=0;"center"===s&&(l=Math.max(0,this.pathLength/2-r/2)),"right"===s&&(l=Math.max(0,this.pathLength-r));const h=(0,o.stringToArray)(this.text());let d=l;for(let o=0;o<h.length;o++){const t=this._getPointAtLength(d);if(!t)return;let e=this._getTextSize(h[o]).width+i;if(" "===h[o]&&"justify"===s){const t=this.text().split(" ").length-1;e+=(this.pathLength-r)/t}const l=this._getPointAtLength(d+e);if(!l)return;const u=n.Path.getLineLength(t.x,t.y,l.x,l.y);let p=0;if(a)try{p=a(h[o-1],h[o])*this.fontSize()}catch(c){p=0}t.x+=p,l.x+=p,this.textWidth+=p;const g=n.Path.getPointOnLine(p+u/2,t.x,t.y,l.x,l.y),m=Math.atan2(l.y-t.y,l.x-t.x);this.glyphInfo.push({transposeX:g.x,transposeY:g.y,text:h[o],rotation:m,p0:t,p1:l}),d+=e}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach((function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)}));let e,i,s=t[0]||0,a=t[0]||0,r=t[1]||0,n=t[1]||0;for(let l=0;l<t.length/2;l++)e=t[2*l],i=t[2*l+1],s=Math.min(s,e),a=Math.max(a,e),r=Math.min(r,i),n=Math.max(n,i);const o=this.fontSize();return{x:s-o/2,y:r-o/2,width:a-s+o,height:n-r+o}}destroy(){return s.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}e.TextPath=g,g.prototype._fillFunc=u,g.prototype._strokeFunc=p,g.prototype._fillFuncHit=u,g.prototype._strokeFuncHit=p,g.prototype.className="TextPath",g.prototype._attrsAffectingSize=["text","fontSize","data"],(0,h._registerNode)(g),a.Factory.addGetterSetter(g,"data"),a.Factory.addGetterSetter(g,"fontFamily","Arial"),a.Factory.addGetterSetter(g,"fontSize",12,(0,l.getNumberValidator)()),a.Factory.addGetterSetter(g,"fontStyle",c),a.Factory.addGetterSetter(g,"align","left"),a.Factory.addGetterSetter(g,"letterSpacing",0,(0,l.getNumberValidator)()),a.Factory.addGetterSetter(g,"textBaseline","middle"),a.Factory.addGetterSetter(g,"fontVariant",c),a.Factory.addGetterSetter(g,"text",d),a.Factory.addGetterSetter(g,"textDecoration",""),a.Factory.addGetterSetter(g,"kerningFunc",void 0)},7534:function(t,e,i){i(560),Object.defineProperty(e,"__esModule",{value:!0}),e.Transformer=void 0;const s=i(1483),a=i(9861),r=i(1548),n=i(4318),o=i(6259),l=i(762),h=i(5640),d=i(950),c=i(5640),u="tr-konva",p=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map((t=>t+`.${u}`)).join(" "),g="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},y="ontouchstart"in h.Konva._global;function v(t,e,i){if("rotater"===t)return i;e+=s.Util.degToRad(f[t]||0);const a=(s.Util.radToDeg(e)%360+360)%360;return s.Util._inRange(a,337.5,360)||s.Util._inRange(a,0,22.5)?"ns-resize":s.Util._inRange(a,22.5,67.5)?"nesw-resize":s.Util._inRange(a,67.5,112.5)?"ew-resize":s.Util._inRange(a,112.5,157.5)?"nwse-resize":s.Util._inRange(a,157.5,202.5)?"ns-resize":s.Util._inRange(a,202.5,247.5)?"nesw-resize":s.Util._inRange(a,247.5,292.5)?"ew-resize":s.Util._inRange(a,292.5,337.5)?"nwse-resize":(s.Util.error("Transformer has unknown angle for cursor detection: "+a),"pointer")}const b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],_=1e8;function w(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function C(t,e,i){const s=i.x+(t.x-i.x)*Math.cos(e)-(t.y-i.y)*Math.sin(e),a=i.y+(t.x-i.x)*Math.sin(e)+(t.y-i.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:s,y:a}}function A(t,e){const i=w(t);return C(t,e,i)}function S(t,e,i){let s=e;for(let a=0;a<t.length;a++){const r=h.Konva.getAngle(t[a]),n=Math.abs(r-e)%(2*Math.PI),o=Math.min(n,2*Math.PI-n);o<i&&(s=r)}return s}let x=0;class k extends l.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(p,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return s.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const e=t.filter((t=>!t.isAncestorOf(this)||(s.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1)));this._nodes=t=e,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach((t=>{const e=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};if(t._attrsAffectingSize.length){const i=t._attrsAffectingSize.map((t=>t+"Change."+this._getEventNamespace())).join(" ");t.on(i,e)}t.on(m.map((t=>t+`.${this._getEventNamespace()}`)).join(" "),e),t.on(`absoluteTransformChange.${this._getEventNamespace()}`,e),this._proxyDrag(t)})),this._resetTransformCache();const i=!!this.findOne(".top-left");return i&&this.update(),this}_proxyDrag(t){let e;t.on(`dragstart.${this._getEventNamespace()}`,(i=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(i,!1)})),t.on(`dragmove.${this._getEventNamespace()}`,(i=>{if(!e)return;const s=t.getAbsolutePosition(),a=s.x-e.x,r=s.y-e.y;this.nodes().forEach((e=>{if(e===t)return;if(e.isDragging())return;const s=e.getAbsolutePosition();e.setAbsolutePosition({x:s.x+a,y:s.y+r}),e.startDrag(i)})),e=null}))}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach((t=>{t.off("."+this._getEventNamespace())})),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(g),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(g,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),i){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=t.getAbsoluteScale(i),r=t.getAbsolutePosition(i),n=s.x*a.x-t.offsetX()*a.x,o=s.y*a.y-t.offsetY()*a.y,l=(h.Konva.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI),d={x:r.x+n*Math.cos(l)+o*Math.sin(-l),y:r.y+o*Math.cos(l)+n*Math.sin(l),width:s.width*a.x,height:s.height*a.y,rotation:l};return C(d,-h.Konva.getAngle(e),{x:0,y:0})}__getNodeRect(){const t=this.getNode();if(!t)return{x:-_,y:-_,width:0,height:0,rotation:0};const e=[];this.nodes().map((t=>{const i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=[{x:i.x,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x+i.width,y:i.y+i.height},{x:i.x,y:i.y+i.height}],a=t.getAbsoluteTransform();s.forEach((function(t){const i=a.point(t);e.push(i)}))}));const i=new s.Transform;i.rotate(-h.Konva.getAngle(this.rotation()));let a=1/0,r=1/0,n=-1/0,o=-1/0;e.forEach((function(t){const e=i.point(t);void 0===a&&(a=n=e.x,r=o=e.y),a=Math.min(a,e.x),r=Math.min(r,e.y),n=Math.max(n,e.x),o=Math.max(o,e.y)})),i.invert();const l=i.point({x:a,y:r});return{x:l.x,y:l.y,width:n-a,height:o-r,rotation:h.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),b.forEach((t=>{this._createAnchor(t)})),this._createAnchor("rotater")}_createAnchor(t){const e=new o.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:y?10:"auto"}),i=this;e.on("mousedown touchstart",(function(t){i._handleMouseDown(t)})),e.on("dragstart",(t=>{e.stopDrag(),t.cancelBubble=!0})),e.on("dragend",(t=>{t.cancelBubble=!0})),e.on("mouseenter",(()=>{const i=h.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=v(t,i,s);e.getStage().content&&(e.getStage().content.style.cursor=a),this._cursorChange=!0})),e.on("mouseout",(()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1})),this.add(e)}_createBack(){const t=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,e){const i=e.getParent(),a=i.padding();t.beginPath(),t.rect(-a,-a,e.width()+2*a,e.height()+2*a),t.moveTo(e.width()/2,-a),i.rotateEnabled()&&i.rotateLineVisible()&&t.lineTo(e.width()/2,-i.rotateAnchorOffset()*s.Util._sign(e.height())-a),t.fillStrokeShape(e)},hitFunc:(t,e)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();t.beginPath(),t.rect(-i,-i,e.width()+2*i,e.height()+2*i),t.fillStrokeShape(e)}});this.add(t),this._proxyDrag(t),t.on("dragstart",(t=>{t.cancelBubble=!0})),t.on("dragmove",(t=>{t.cancelBubble=!0})),t.on("dragend",(t=>{t.cancelBubble=!0})),this.on("dragmove",(t=>{this.update()}))}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const e=this._getNodeRect(),i=e.width,s=e.height,a=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/a),this.cos=Math.abs(i/a),"undefined"!==typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const r=t.target.getAbsolutePosition(),n=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:n.x-r.x,y:n.y-r.y},x++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach((e=>{e._fire("transformstart",{evt:t.evt,target:e})}))}_handleMouseMove(t){let e,i,s;const a=this.findOne("."+this._movingAnchorName),r=a.getStage();r.setPointersPositions(t);const n=r.getPointerPosition();let o={x:n.x-this._anchorDragOffset.x,y:n.y-this._anchorDragOffset.y};const l=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(o=this.anchorDragBoundFunc()(l,o,t)),a.setAbsolutePosition(o);const d=a.getAbsolutePosition();if(l.x===d.x&&l.y===d.y)return;if("rotater"===this._movingAnchorName){const s=this._getNodeRect();e=a.x()-s.width/2,i=-a.y()+s.height/2;let r=Math.atan2(-i,e)+Math.PI/2;s.height<0&&(r-=Math.PI);const n=h.Konva.getAngle(this.rotation()),o=n+r,l=h.Konva.getAngle(this.rotationSnapTolerance()),d=S(this.rotationSnaps(),o,l),c=d-s.rotation,u=A(s,c);return void this._fitNodesInto(u,t)}const c=this.shiftBehavior();let u;u="inverted"===c?this.keepRatio()&&!t.shiftKey:"none"===c?this.keepRatio():this.keepRatio()||t.shiftKey;var p=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(u){var g=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(g.y-a.y(),2));var m=this.findOne(".top-left").x()>g.x?-1:1,f=this.findOne(".top-left").y()>g.y?-1:1;e=s*this.cos*m,i=s*this.sin*f,this.findOne(".top-left").x(g.x-e),this.findOne(".top-left").y(g.y-i)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(a.y());else if("top-right"===this._movingAnchorName){if(u){g=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(g.y-a.y(),2));m=this.findOne(".top-right").x()<g.x?-1:1,f=this.findOne(".top-right").y()>g.y?-1:1;e=s*this.cos*m,i=s*this.sin*f,this.findOne(".top-right").x(g.x+e),this.findOne(".top-right").y(g.y-i)}var y=a.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if("middle-left"===this._movingAnchorName)this.findOne(".top-left").x(a.x());else if("middle-right"===this._movingAnchorName)this.findOne(".bottom-right").x(a.x());else if("bottom-left"===this._movingAnchorName){if(u){g=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(g.x-a.x(),2)+Math.pow(a.y()-g.y,2));m=g.x<a.x()?-1:1,f=a.y()<g.y?-1:1;e=s*this.cos*m,i=s*this.sin*f,a.x(g.x-e),a.y(g.y+i)}y=a.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if("bottom-center"===this._movingAnchorName)this.findOne(".bottom-right").y(a.y());else if("bottom-right"===this._movingAnchorName){if(u){g=p?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(a.x()-g.x,2)+Math.pow(a.y()-g.y,2));m=this.findOne(".bottom-right").x()<g.x?-1:1,f=this.findOne(".bottom-right").y()<g.y?-1:1;e=s*this.cos*m,i=s*this.sin*f,this.findOne(".bottom-right").x(g.x+e),this.findOne(".bottom-right").y(g.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));p=this.centeredScaling()||t.altKey;if(p){const t=this.findOne(".top-left"),e=this.findOne(".bottom-right"),i=t.x(),s=t.y(),a=this.getWidth()-e.x(),r=this.getHeight()-e.y();e.move({x:-i,y:-s}),t.move({x:a,y:r})}const v=this.findOne(".top-left").getAbsolutePosition();e=v.x,i=v.y;const b=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),_=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:i,width:b,height:_,rotation:h.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var e;if(this._transforming){this._transforming=!1,"undefined"!==typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();x--,this._fire("transformend",{evt:t,target:i}),null===(e=this.getLayer())||void 0===e||e.batchDraw(),i&&this._nodes.forEach((e=>{var i;e._fire("transformend",{evt:t,target:e}),null===(i=e.getLayer())||void 0===i||i.batchDraw()})),this._movingAnchorName=null}}_fitNodesInto(t,e){const i=this._getNodeRect(),a=1;if(s.Util._inRange(t.width,2*-this.padding()-a,a))return void this.update();if(s.Util._inRange(t.height,2*-this.padding()-a,a))return void this.update();const r=new s.Transform;if(r.rotate(h.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=r.point({x:2*-this.padding(),y:0});t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=r.point({x:2*this.padding(),y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=r.point({x:0,y:2*-this.padding()});t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=r.point({x:0,y:2*this.padding()});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(i,t);e?t=e:s.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const n=1e7,o=new s.Transform;o.translate(i.x,i.y),o.rotate(i.rotation),o.scale(i.width/n,i.height/n);const l=new s.Transform,d=t.width/n,c=t.height/n;!1===this.flipEnabled()?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(d),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(d,c));const u=l.multiply(o.invert());this._nodes.forEach((t=>{var e;const i=t.getParent().getAbsoluteTransform(),a=t.getTransform().copy();a.translate(t.offsetX(),t.offsetY());const r=new s.Transform;r.multiply(i.copy().invert()).multiply(u).multiply(i).multiply(a);const n=r.decompose();t.setAttrs(n),null===(e=t.getLayer())||void 0===e||e.batchDraw()})),this.rotation(s.Util._getRotation(t.rotation)),this._nodes.forEach((t=>{this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t})})),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){const i=this.findOne(t);i.setAttrs(e)}update(){var t;const e=this._getNodeRect();this.rotation(s.Util._getRotation(e.rotation));const i=e.width,a=e.height,r=this.enabledAnchors(),n=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach((t=>{t.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})})),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:n&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:n&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:n&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:a/2,offsetX:l/2+o,visible:n&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:a/2,offsetX:l/2-o,visible:n&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:a,offsetX:l/2+o,offsetY:l/2-o,visible:n&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:a,offsetY:l/2-o,visible:n&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:a,offsetX:l/2-o,offsetY:l/2-o,visible:n&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*s.Util._sign(a)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:a,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&h.forEach((t=>{d(t)})),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),l.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(t){const e=r.Node.prototype.clone.call(this,t);return e}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function L(t){return t instanceof Array||s.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach((function(t){-1===b.indexOf(t)&&s.Util.warn("Unknown anchor name: "+t+". Available names are: "+b.join(", "))})),t||[]}e.Transformer=k,k.isTransforming=()=>x>0,k.prototype.className="Transformer",(0,c._registerNode)(k),a.Factory.addGetterSetter(k,"enabledAnchors",b,L),a.Factory.addGetterSetter(k,"flipEnabled",!0,(0,d.getBooleanValidator)()),a.Factory.addGetterSetter(k,"resizeEnabled",!0),a.Factory.addGetterSetter(k,"anchorSize",10,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"rotateEnabled",!0),a.Factory.addGetterSetter(k,"rotateLineVisible",!0),a.Factory.addGetterSetter(k,"rotationSnaps",[]),a.Factory.addGetterSetter(k,"rotateAnchorOffset",50,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"rotateAnchorCursor","crosshair"),a.Factory.addGetterSetter(k,"rotationSnapTolerance",5,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderEnabled",!0),a.Factory.addGetterSetter(k,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(k,"anchorStrokeWidth",1,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"anchorFill","white"),a.Factory.addGetterSetter(k,"anchorCornerRadius",0,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(k,"borderStrokeWidth",1,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"borderDash"),a.Factory.addGetterSetter(k,"keepRatio",!0),a.Factory.addGetterSetter(k,"shiftBehavior","default"),a.Factory.addGetterSetter(k,"centeredScaling",!1),a.Factory.addGetterSetter(k,"ignoreStroke",!1),a.Factory.addGetterSetter(k,"padding",0,(0,d.getNumberValidator)()),a.Factory.addGetterSetter(k,"nodes"),a.Factory.addGetterSetter(k,"node"),a.Factory.addGetterSetter(k,"boundBoxFunc"),a.Factory.addGetterSetter(k,"anchorDragBoundFunc"),a.Factory.addGetterSetter(k,"anchorStyleFunc"),a.Factory.addGetterSetter(k,"shouldOverdrawWholeArea",!1),a.Factory.addGetterSetter(k,"useSingleNodeRotation",!0),a.Factory.backCompat(k,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})},7532:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.Wedge=void 0;const s=i(9861),a=i(4318),r=i(5640),n=i(950),o=i(5640);class l extends a.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}e.Wedge=l,l.prototype.className="Wedge",l.prototype._centroid=!0,l.prototype._attrsAffectingSize=["radius"],(0,o._registerNode)(l),s.Factory.addGetterSetter(l,"radius",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"angle",0,(0,n.getNumberValidator)()),s.Factory.addGetterSetter(l,"clockwise",!1),s.Factory.backCompat(l,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})},5564:function(t,e,i){t.exports=i.p+"static/img/image.5a09585b.svg"},2219:function(t,e,i){t.exports=i.p+"static/img/intersection.2af671f8.svg"},3509:function(t){t.exports="data:image/png;base64,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"},7674:function(t){t.exports="data:image/png;base64,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"},5061:function(t){t.exports="data:image/png;base64,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"},9595:function(t){t.exports="data:image/png;base64,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"},1534:function(t){t.exports="data:image/png;base64,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"},2630:function(t,e,i){t.exports=i.p+"static/img/video1.e775dc84.gif"},5311:function(t,e,i){t.exports=i.p+"static/img/video2.987233e8.gif"},3140:function(t,e,i){t.exports=i.p+"static/img/video3.93ef4c28.gif"},2165:function(t,e,i){t.exports=i.p+"static/img/video4.16a80fb2.gif"},7274:function(t,e,i){t.exports=i.p+"static/img/video5.63d51539.gif"}}]);